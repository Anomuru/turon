import{r as t,l as y,n as h,j as e,T,B as C,R as G,I as $,p as R,a5 as I,D as K}from"./index-Cux8sda1.js";import{g as V,a as q}from"./index-B3t1prr3.js";import{P as F}from"./pagination-Cj0p_t2O.js";import{L as J}from"./link-B95gzaLk.js";import{v as S,a as O,f as N}from"./vacancyPageParseSlice-DZBjzMqT.js";import"./index-CWuwSiDv.js";import"./selectors-BxbW-zmh.js";import{V as Q}from"./vacancyPageEdit-DQU4y9_Z.js";import{M as U}from"./modal-BR27MEf1.js";import{getSearchValue as W}from"./index-Dvh1lTlU.js";import"./editableCard-BNSd-vHU.js";import"./cross-BXlnQeE0.js";import"./workerSelect-N9ju4zO7.js";import"./Transition-CosWKtpf.js";import"./form-C3mZZqBW.js";import"./index.esm-DQmSsb0O.js";import"./alertSlice-XeBTN8B3.js";const X="_deletedGroups_zgp8m_1",Y="_mainContainer_filterPanelBox_zgp8m_1",Z="_mainContainer_buttonPanelBox_zgp8m_35",ee="_mainContainer_buttonPanelBox_leftCreateButton_zgp8m_42",te="_mainContainer_tablePanelBox_zgp8m_78",ae="_buttonHelper_zgp8m_93",c={deletedGroups:X,mainContainer_filterPanelBox:Y,mainContainer_buttonPanelBox:Z,mainContainer_buttonPanelBox_leftCreateButton:ee,mainContainer_tablePanelBox:te,buttonHelper:ae},ne="_anotherDiv_1wz17_9",se="_theadBody_1wz17_22",oe="_buttonHelper_1wz17_28",re="_otClick_1wz17_36",f={anotherDiv:ne,theadBody:se,buttonHelper:oe,otClick:re},ie=t.memo(({currentTableData:x,currentPage:p,PageSize:d,editMode:o,onEditClick:m})=>{y(),h(V);const r=()=>x?.map((a,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsx(J,{to:`vacancyWorkPage/${a.group.id}`,children:e.jsx("td",{className:f.otClick,children:a.group.name})}),e.jsx("td",{children:e.jsx("div",{className:f.anotherDiv,children:a.system_id.name})}),!o&&e.jsx("td",{children:e.jsx(C,{extraClass:f.buttonHelper,children:e.jsx("i",{className:"fas fa-pencil"}),onClick:()=>m(a)})})]},a.id));return e.jsxs(T,{children:[e.jsx("thead",{className:f.theadBody,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Kasblar nomi"}),e.jsx("th",{children:"System turi"}),!o&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:r()})]})}),ce="_filter_189ur_1",le="_filter__container_189ur_7",de="_filter__select_189ur_13",me="_buttonChange_189ur_51",_={filter:ce,filter__container:le,filter__select:de,buttonChange:me},ue=G.memo(({active:x,setActive:p,systems:d})=>{const[o,m]=t.useState(""),[r,a]=t.useState(""),i=y(),j=()=>{i(S({name:o,system_id:r})).then(u=>{S.fulfilled.match(u)?i(O(u.payload)):console.error("Failed to add vacancy:",u.error)}),i(N()),p(!1)};return e.jsx(U,{active:x,setActive:p,children:e.jsxs("div",{className:_.filter,children:[e.jsx("h1",{children:"Vakansiya qo'shish"}),e.jsxs("div",{className:_.filter__container,children:[e.jsx($,{extraClassName:_.filter__select,placeholder:"Kasb nomi",value:o,onChange:s=>m(s.target.value)}),e.jsx(R,{extraClass:_.filter__select,value:r,onChangeOption:s=>a(s),options:d}),e.jsx(C,{extraClass:_.buttonChange,onClick:j,children:"Qo'shish"})]})]})})}),ze=()=>{const[x,p]=t.useState(!1),[d,o]=t.useState(!1),[m,r]=t.useState(!1),a=h(W);let i=t.useMemo(()=>10,[]);const[j,s]=t.useState([]),[u,g]=t.useState(1),[k,b]=t.useState(!1),[z,w]=t.useState(null),D=y(),P=h(V),H=h(q),v=h(I),E=t.useMemo(()=>{const n=P.slice();return g(1),a?n.filter(l=>l?.group?.name?.toLowerCase().includes(a.toLowerCase())||l?.system_id?.name?.toLowerCase().includes(a.toLowerCase())):n},[P,a]);t.useEffect(()=>{D(N())},[]);const L=n=>{w(n),b(!0)},M=n=>{s(l=>l.map(B=>B.id===n.id?n:B)),b(!1)},A=n=>{s(l=>[...l,{id:Date.now(),...n}])};return H?e.jsx(K,{}):e.jsxs("div",{className:c.deletedGroups,children:[e.jsx("div",{className:c.mainContainer_filterPanelBox}),e.jsxs("div",{className:c.mainContainer_buttonPanelBox,children:[e.jsx("div",{}),e.jsxs("div",{className:c.mainContainer_buttonPanelBox_leftCreateButton,children:[e.jsx(C,{extraClass:c.buttonHelper,onClick:()=>r(!0),children:e.jsx("i",{className:"fas fa-plus"})}),e.jsx(C,{extraClass:c.buttonHelper,onClick:()=>o(!d),children:e.jsx("i",{className:"fas fa-pencil"})})]})]}),e.jsx("div",{className:c.mainContainer_tablePanelBox,children:e.jsx(ie,{currentTableData:j,editMode:!d,onEditClick:L})}),e.jsx(F,{setCurrentTableData:s,users:E,setCurrentPage:g,currentPage:u,pageSize:i,onPageChange:n=>{g(n)},type:"custom"}),e.jsx(Q,{setModal:b,modal:k,vacancy:z,onSave:M,systems:v}),e.jsx(ue,{setActive:r,active:m,addVacancy:A,systems:v})]})};export{ze as VacancyPage};
