import{r as n,l as B,n as u,j as e,B as m,i as g,T as q,p as w,I as S,H as V,M as z,u as J,A as K,h as Q}from"./index-Cux8sda1.js";import{u as E}from"./index.esm-DQmSsb0O.js";import{g as R,d as W,a as X,b as Y,c as Z,f as ee,e as se}from"./index-Dyh4sQR2.js";import{d as G}from"./user_image-CruVt77w.js";import{F as U}from"./form-C3mZZqBW.js";import{M as k}from"./modal-BR27MEf1.js";import{C as te}from"./confirmModal-DiNALKc8.js";import"./groupsAttendanceSlice-DmRNDpcI.js";import"./userProfileSlice-BflEK4KO.js";import{a as de}from"./index-B-IQsIPc.js";import"./teacherParseSlice-z7KSx3F7.js";import{f as ne}from"./teacherThunk-qU_2Y3xX.js";import{o as O}from"./alertSlice-XeBTN8B3.js";import{g as ae,a as le}from"./oftenUsedSelector-B4R2CTqR.js";const re="_studentsList_tlmf1_1",ce="_studentsList__icon_tlmf1_7",ie="_btns_tlmf1_10",oe="_btns__inner_tlmf1_16",_e="_studentsList__container_tlmf1_21",ue="_studentsList__input_tlmf1_50",he="_studentsList__delete_tlmf1_54",xe="_studentsList__status_tlmf1_65",me="_red_tlmf1_72",je="_yellow_tlmf1_76",fe="_deleteForm_tlmf1_81",pe="_deleteForm__form_tlmf1_87",be="_deleteForm__select_tlmf1_96",ge="_deleteForm__btn_tlmf1_100",Se="_addModal_tlmf1_104",Me="_addModal__container_tlmf1_113",Ce="_check_tlmf1_141",ve="_check__input_tlmf1_146",Le="_addModal__btn_tlmf1_171",d={studentsList:re,studentsList__icon:ce,btns:ie,btns__inner:oe,studentsList__container:_e,studentsList__input:ue,studentsList__delete:he,studentsList__status:xe,red:me,yellow:je,deleteForm:fe,deleteForm__form:pe,deleteForm__select:be,deleteForm__btn:ge,addModal:Se,addModal__container:Me,check:Ce,check__input:ve,addModal__btn:Le},Qe=n.memo(()=>{const{register:M,handleSubmit:C}=E(),A=B(),l=u(R),[j,c]=n.useState(!1),[v,h]=n.useState(""),[f,L]=n.useState(null),[N,_]=n.useState([]),[F,p]=n.useState([]),y=s=>{},I=()=>{A(W({id:f?.id}))},b=s=>{},D=()=>l?.students?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:s?.user?.profile_img?V+s?.user?.profile_img:G,alt:""})}),e.jsxs("td",{children:[s?.user?.name," ",s?.user?.surname]}),e.jsx("td",{children:s?.user?.phone}),e.jsx("td",{children:s?.parents_number}),e.jsx("td",{children:e.jsx("div",{className:g(d.studentsList__status,{[d.red]:Number(s.money)<0,[d.yellow]:Number(s.money)>0&&Number(s.money)<1e5}),children:s.money})}),j?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx(S,{extraClassName:d.studentsList__input,type:"checkbox",onChange:()=>p(r=>r.filter(i=>i===s.id)[0]?r.filter(i=>i!==s.id):[...r,s.id])})}),e.jsx("td",{children:e.jsx("i",{className:g("fas fa-trash",d.studentsList__delete),onClick:()=>L(s)})})]}):null]})),x=()=>l?.students?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:G,alt:""})}),e.jsx("td",{children:s?.user?.name}),e.jsx("td",{children:s?.user?.surname}),e.jsx("td",{children:s?.user?.phone}),e.jsx("td",{children:e.jsx("div",{className:d.check,children:e.jsx(S,{extraClassName:d.check__input,type:"checkbox",onChange:()=>_(r=>r.filter(i=>i===s.id)[0]?r.filter(i=>i!==s.id):[...r,s.id])})})})]})),T=D(),P=x();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.studentsList,children:[e.jsxs("div",{className:d.btns,children:[e.jsx("h1",{children:"O’quvchilar ro’yxati"}),e.jsxs("div",{className:d.btns__inner,children:[e.jsx(m,{disabled:F.length===0,type:F.length===0?"disabled":"",onClick:()=>h("change"),children:"Move"}),e.jsx(m,{onClick:()=>h("add"),children:"Add"}),e.jsx("i",{className:g("fas fa-edit",d.studentsList__icon),onClick:()=>c(!j)})]})]}),e.jsx("div",{className:d.studentsList__container,children:e.jsxs(q,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism Familya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Tel Ota-ona"}),e.jsx("th",{children:"Balans"}),j?e.jsxs(e.Fragment,{children:[e.jsx("th",{children:"check"}),e.jsx("th",{children:"del"})]}):null]})}),e.jsx("tbody",{children:T})]})})]}),e.jsxs(k,{extraClass:d.deleteForm,active:v==="change",setActive:h,children:[e.jsx("h1",{children:"Boshqa sinfga qo’shish"}),e.jsxs(U,{extraClassname:d.deleteForm__form,onSubmit:C(y),typeSubmit:"",children:[e.jsx(w,{extraClass:d.deleteForm__select,title:"Color",register:M,name:"color"}),e.jsx(w,{extraClass:d.deleteForm__select,title:"Class",register:M,name:"class"}),e.jsx(m,{extraClass:d.deleteForm__btn,children:"Add"})]})]}),e.jsxs(k,{active:v==="add",setActive:h,extraClass:d.addModal,children:[e.jsx(S,{placeholder:"Search"}),e.jsx("div",{className:d.addModal__container,children:e.jsxs(q,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:P})]})}),e.jsx(m,{extraClass:d.addModal__btn,onClick:b,children:"Add"})]}),e.jsx(te,{setActive:L,active:f,onClick:I,title:`Rostanham ${f.user} ni o'chirmoqchimisiz `,type:"danger"})]})}),Fe="_addModal_xl27x_1",ye="_addModal__container_xl27x_19",ke="_addModal__subject_xl27x_39",Ae="_check_xl27x_47",Ne="_check__input_xl27x_52",Ie="_status_xl27x_55",De="_active_xl27x_64",Te="_status__inner_xl27x_67",Pe="_addModal__btn_xl27x_77",a={addModal:Fe,addModal__container:ye,addModal__subject:ke,check:Ae,check__input:Ne,status:Ie,active:De,status__inner:Te,addModal__btn:Pe},We=n.memo(M=>{const{setActive:C,active:A,branch:l}=M,{request:j}=J(),c=B(),{register:v,handleSubmit:h}=E(),f=u(ae),L=u(X),N=u(Y),_=u(R);u(de),u(Z);const[F,p]=n.useState(!1),[y,I]=n.useState(null),[b,D]=n.useState([]),[x,T]=n.useState(""),P=t=>{c(se({id:t?.class})),p(!0)},s=()=>{const t={students:b,update_method:"add_students",group_type:"school"};j(`${K}Group/groups/profile/${_?.id}/`,"PATCH",JSON.stringify(t),Q()).then(o=>{c(O({type:"success",status:!0,msg:"O'quvchilar sinfga qo'shildi"})),p(!1),C(!1)}).catch(o=>{c(O({type:"error",status:!0,msg:"xatolik yuz berdi (outside classAdd)"}))})};n.useEffect(()=>{l&&c(le(l))},[l]),n.useEffect(()=>{_&&l&&(c(ee({userBranchId:l,group_id:_?.id,res:{ignore_students:_?.students.map(t=>t.id)}})),c(ne({userBranchId:l})))},[_,l]);const r=n.useMemo(()=>N?.slice()?.filter(o=>o?.user?.name?.toLowerCase().includes(x?.toLowerCase())||o?.user?.surname?.toLowerCase().includes(x?.toLowerCase())),[N,x]),H=r?.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:G,alt:""})}),e.jsx("td",{children:t?.user?.name}),e.jsx("td",{children:t?.user?.surname}),e.jsx("td",{children:t?.subject.length?e.jsx("div",{className:a.addModal__subject,children:t?.subject[0]?.name}):null}),e.jsx("td",{children:e.jsxs("div",{className:a.check,children:[e.jsx(S,{extraClassName:a.check__input,type:"checkbox",onChange:()=>D(o=>o.filter($=>$===t.id)[0]?o.filter($=>$!==t.id):[...o,t.id])}),e.jsx("div",{className:g(a.status,{[a.active]:t?.extra_info?.status}),children:e.jsx("div",{className:g(a.status__inner,{[a.active]:t?.extra_info?.status})})})]})})]}));return e.jsxs(e.Fragment,{children:[e.jsx(k,{setActive:t=>C(t),active:A,children:e.jsxs(U,{typeSubmit:"",extraClassname:a.addModal,onSubmit:h(P),children:[e.jsx("h2",{children:"Add Class"}),e.jsx(w,{onChangeOption:I,options:f,title:"Classes",register:v,name:"class"}),e.jsx(m,{disabled:!y,type:y?"":"disabled",children:"Tekshirmoq"})]})}),e.jsxs(k,{active:F,setActive:p,extraClass:a.addModal,children:[e.jsx(S,{placeholder:"Search",onChange:t=>T(t.target.value),defaultValue:x}),L?e.jsx(z,{}):e.jsx("div",{className:a.addModal__container,children:e.jsxs(q,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Fanlar"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:H})]})}),e.jsx(m,{extraClass:a.addModal__btn,onClick:s,type:b.length===0?"disabled":"",disabled:b.length===0?"disabled":"",children:"Add"})]})]})});export{We as C,Qe as a};
