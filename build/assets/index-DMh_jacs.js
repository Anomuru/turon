import{r as t,u as b,a as h,av as B,j as e,T as D,B as f,ab as T,aw as m,R as G,z as R,I as $,ax as v,ay as I,d as K}from"./index-DOfOZKEd.js";import{P as q}from"./pagination-ajK0EmM0.js";import{L as F}from"./link-DmpYtdoK.js";import{V as J}from"./vacancyPageEdit-laTWtwct.js";import{g as Q}from"./searchSelector-B3qtoac4.js";import"./editableCard-CFY1EtAX.js";const U="_deletedGroups_zgp8m_1",W="_mainContainer_filterPanelBox_zgp8m_1",O="_mainContainer_buttonPanelBox_zgp8m_35",X="_mainContainer_buttonPanelBox_leftCreateButton_zgp8m_42",Y="_mainContainer_tablePanelBox_zgp8m_78",Z="_buttonHelper_zgp8m_93",i={deletedGroups:U,mainContainer_filterPanelBox:W,mainContainer_buttonPanelBox:O,mainContainer_buttonPanelBox_leftCreateButton:X,mainContainer_tablePanelBox:Y,buttonHelper:Z},ee="_theadBody_1wz17_22",ae="_buttonHelper_1wz17_28",te="_otClick_1wz17_36",j={theadBody:ee,buttonHelper:ae,otClick:te},ne=t.memo(({currentTableData:c,currentPage:a,PageSize:o,editMode:d,onEditClick:r})=>{b(),h(B);const u=()=>c?.map((n,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsx(F,{to:`vacancyWorkPage/${n.group.id}`,children:e.jsx("td",{className:j.otClick,children:n.group.name})}),e.jsx("td",{}),!d&&e.jsx("td",{children:e.jsx(f,{extraClass:j.buttonHelper,children:e.jsx("i",{className:"fas fa-pencil"}),onClick:()=>r(n)})})]},n.id));return e.jsxs(D,{children:[e.jsx("thead",{className:j.theadBody,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Kasblar nomi"}),!d&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u()})]})}),se="_filter_189ur_1",oe="_filter__container_189ur_7",ce="_filter__select_189ur_13",re="_buttonChange_189ur_51",x={filter:se,filter__container:oe,filter__select:ce,buttonChange:re},le={vacancies:[],loading:!1,error:null},ie=T({name:"vacancies",initialState:le,reducers:{addVacancy:(c,a)=>{c.vacancies.push(a.payload)}},extraReducers:c=>{c.addCase(m.pending,a=>{a.loading=!0,a.error=null}).addCase(m.fulfilled,(a,o)=>{a.loading=!1,a.vacancies.push(o.payload)}).addCase(m.rejected,(a,o)=>{a.loading=!1,a.error=o.payload??null})}}),{addVacancy:de}=ie.actions,ue=G.memo(({active:c,setActive:a})=>{const[o,d]=t.useState(""),r=b(),u=()=>{r(m({name:o})).then(l=>{m.fulfilled.match(l)?r(de(l.payload)):console.error("Failed to add vacancy:",l.error)}),r(v()),a(!1)};return e.jsx(R,{active:c,setActive:a,children:e.jsxs("div",{className:x.filter,children:[e.jsx("h1",{children:"Vakansiya qo'shish"}),e.jsxs("div",{className:x.filter__container,children:[e.jsx($,{extraClassName:x.filter__select,placeholder:"Kasb nomi",value:o,onChange:n=>d(n.target.value)}),e.jsx(f,{extraClass:x.buttonChange,onClick:u,children:"Qo'shish"})]})]})})}),pe=()=>{const[c,a]=t.useState(!1),[o,d]=t.useState(!1),[r,u]=t.useState(!1),n=h(Q);let l=t.useMemo(()=>10,[]);const[S,C]=t.useState([]),[V,p]=t.useState(1),[N,g]=t.useState(!1),[k,z]=t.useState(null),H=b(),y=h(B),w=h(I),E=t.useMemo(()=>{const s=y.slice();return p(1),n?s.filter(_=>_?.group?.name?.toLowerCase().includes(n.toLowerCase())):s},[y,n]);t.useEffect(()=>{H(v())},[]);const A=s=>{z(s),g(!0)},L=s=>{C(_=>_.map(P=>P.id===s.id?s:P)),g(!1)},M=s=>{C(_=>[..._,{id:Date.now(),...s}])};return w?e.jsx(K,{}):e.jsxs("div",{className:i.deletedGroups,children:[e.jsx("div",{className:i.mainContainer_filterPanelBox}),e.jsxs("div",{className:i.mainContainer_buttonPanelBox,children:[e.jsx("div",{}),e.jsxs("div",{className:i.mainContainer_buttonPanelBox_leftCreateButton,children:[e.jsx(f,{extraClass:i.buttonHelper,onClick:()=>u(!0),children:e.jsx("i",{className:"fas fa-plus"})}),e.jsx(f,{extraClass:i.buttonHelper,onClick:()=>d(!o),children:e.jsx("i",{className:"fas fa-pencil"})})]})]}),e.jsx("div",{className:i.mainContainer_tablePanelBox,children:e.jsx(ne,{currentTableData:S,editMode:!o,onEditClick:A})}),e.jsx(q,{setCurrentTableData:C,users:E,setCurrentPage:p,currentPage:V,pageSize:l,onPageChange:s=>{p(s)},type:"custom"}),e.jsx(J,{setModal:g,modal:N,vacancy:k,onSave:L}),e.jsx(ue,{setActive:u,active:r,addVacancy:M})]})};export{pe as VacancyPage};
