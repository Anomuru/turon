import{n as d,o as D,l as H,r as t,j as e,T as K,I as E,O as q,R as Q,B as w}from"./index-Cux8sda1.js";import"./pagination-Cj0p_t2O.js";import{w as Y,a as $,V as J}from"./index-W3vkapA2.js";import{V as X}from"./vacancyPageEdit-DQU4y9_Z.js";import{g as z,a as Z,f as ee}from"./index-FTpBLBKi.js";import{S as te}from"./switch-sjHY-EbU.js";import"./selectors-BxbW-zmh.js";import{VacancyWorkerPermission as ae}from"./index-DKVhcpux.js";import{b as V}from"./index-B-IQsIPc.js";import"./userProfileSlice-BflEK4KO.js";import{vacancyWorkerListThunk as ne}from"./index-CWuwSiDv.js";import"./modal-BR27MEf1.js";import"./cross-BXlnQeE0.js";import"./vacancyPageParseSlice-DZBjzMqT.js";import"./alertSlice-XeBTN8B3.js";import"./editableCard-BNSd-vHU.js";import"./workerSelect-N9ju4zO7.js";import"./Transition-CosWKtpf.js";import"./form-C3mZZqBW.js";import"./index.esm-DQmSsb0O.js";import"./user_image-CruVt77w.js";const oe=[{id:1,workName:"Kimdir",workerNames:"Nima yozishni bilmadim"},{id:2,workName:"O'quvchi",workerNames:"Nima yozishni bilmadim"},{id:3,workName:"Manager",workerNames:"Nima yozishni bilmadim"},{id:4,workName:"Admin",workerNames:"Nima yozishni bilmadim"},{id:5,workName:"Qo'shni",workerNames:"Nima yozishni bilmadim"},{id:6,workName:"Sattor aka",workerNames:"Nima yozishni bilmadim"},{id:7,workName:"Ko'chani boshidagi brat",workerNames:"Nima yozishni bilmadim"}],se=[{workerImg:$,workerName:"Mahmud Yuldoshov",workerSetting:Y}],re="_deletedGroups_16ogk_1",ie="_mainContainer_filterPanelBox_16ogk_1",ce="_mainContainer_buttonPanelBox_16ogk_35",le="_mainContainer_buttonPanelBox_leftCreateButton_16ogk_42",de="_mainContainer_buttonPanelBox_leftCreateButtons_16ogk_50",me="_mainContainer_tablePanelBox_16ogk_86",he="_buttonHelper_16ogk_101",ue="_buttonHelpers_16ogk_110",s={deletedGroups:re,mainContainer_filterPanelBox:ie,mainContainer_buttonPanelBox:ce,mainContainer_buttonPanelBox_leftCreateButton:le,mainContainer_buttonPanelBox_leftCreateButtons:de,mainContainer_tablePanelBox:me,buttonHelper:he,buttonHelpers:ue},xe="_theadBody_adwtd_1",_e="_checkBox_adwtd_15",W={theadBody:xe,checkBox:_e},ke=({currentTableData:u,currentPage:k,PageSize:x,editMode:p,onEditClick:r,selectedItems:f,setSelectedItems:m})=>{const{id:i}=d(D),B=H(),N=d(z);N.job?.map(a=>a.group.name);const b=d(Z);t.useEffect(()=>{i&&B(ee(i))},[B,i]);const y=a=>{a.target.checked?m(u.map(n=>n.id)):m([])},P=(a,n)=>{a.target.checked?m(c=>[...c,n]):m(c=>c.filter(h=>h!==n))},S=()=>b?e.jsx(q,{}):N.job?.map((a,n)=>{const c=a.group.permissions||[];return e.jsx(Q.Fragment,{children:c.map((h,_)=>e.jsxs("tr",{children:[e.jsx("td",{children:(k-1)*x+_+1}),e.jsx("td",{children:a.group.name}),e.jsx("td",{children:h.name}),!p&&e.jsx("td",{children:e.jsx(E,{style:{width:"25px"},type:"checkbox",checked:f.includes(a.id),onChange:C=>P(C,a.id)})})]},h.id))},a.id)});return e.jsxs(K,{children:[e.jsx("thead",{className:W.theadBody,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Ishchi ismi"}),e.jsx("th",{children:"Ruxsatlari"}),!p&&e.jsx("th",{className:W.checkBox,children:e.jsx(E,{style:{width:"25px"},type:"checkbox",onChange:y,checked:f.length===u.length})})]})}),e.jsx("tbody",{children:S()})]})},Le=()=>{const[u,k]=t.useState(!1),[x,p]=t.useState(!1),[r,f]=t.useState(!1),[m,i]=t.useState(!1),[B,N]=t.useState(!1),[b,y]=t.useState(1),[P,S]=t.useState(""),[a,n]=t.useState([]),[c,h]=t.useState(null),[_,C]=t.useState([]),[I,A]=t.useState(!1),L=H();d(z);const v=t.useMemo(()=>20,[]),M=d(V),{id:T}=d(D),g=d(V);t.useEffect(()=>{g&&g?.job&&A(g.job.includes("director"))},[g]),t.useEffect(()=>{n(r?se:oe)},[r]);const G=o=>{h(o),i(!0)},O=o=>{n(l=>l.map(j=>j.id===o.id?o:j)),i(!1)},R=()=>{n(o=>o.filter(l=>!_.includes(l.id))),C([])},U=async o=>{f(!r);const l={job:Number(o)};try{await L(ne(l))}catch(j){console.error("An error occurred:",j)}},F=o=>{n(l=>[...l,o])};return e.jsxs("div",{className:s.deletedGroups,children:[e.jsx("div",{className:s.mainContainer_filterPanelBox}),e.jsxs("div",{className:s.mainContainer_buttonPanelBox,children:[e.jsx("div",{className:s.mainContainer_buttonPanelBox_leftCreateButtons,children:I?e.jsx(te,{activeSwitch:r,onChangeSwitch:()=>U(T)}):null}),e.jsxs("div",{className:s.mainContainer_buttonPanelBox_leftCreateButton,children:[r?null:e.jsxs(e.Fragment,{children:[e.jsx(w,{extraClass:s.buttonHelper,children:e.jsx("i",{className:"fas fa-plus"}),onClick:()=>k(!u)}),e.jsx(w,{extraClass:s.buttonHelper,children:e.jsx("i",{className:"fas fa-pencil"}),onClick:()=>p(!x)})]}),!x&&_.length>0&&e.jsx(w,{extraClass:s.buttonHelpers,children:e.jsx("i",{style:{color:"white"},className:"fas fa-trash"}),onClick:R})]})]}),e.jsx("div",{className:s.mainContainer_tablePanelBox,children:r?e.jsx(J,{currentTableData:M,currentPage:b,PageSize:v}):e.jsx(ke,{currentTableData:a,currentPage:b,PageSize:v,editMode:x,onEditClick:G,selectedItems:_,setSelectedItems:C})}),e.jsx(X,{setModal:i,modal:m,vacancy:c,onSave:O}),e.jsx(ae,{setActive:k,active:u,onAddVacancy:F})]})};export{Le as VacancyWorkPage};
