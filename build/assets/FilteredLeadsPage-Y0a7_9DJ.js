import{aa as p,h as m,A as _,i as S,u as b,a as u,r as d,j as e,T as y,ab as C,az as P,I as D}from"./index-BsgSvAdU.js";import{P as F}from"./pagination-BKwMBOPR.js";import{g as v}from"./brachSwitcherSelector-vlhkEAq9.js";const N="_fileteredLeads_1hq7e_1",T="_header_1hq7e_4",h={fileteredLeads:N,header:T},$="_list_17uka_1",k="_count_17uka_5",L={list:$,count:k},n=p("filteredLeadsListSlice/fetchFilteredListData",async({date:s,branch:a,currentPage:t,PageSize:c})=>{const{request:l}=m();return l(`${_}Lead/leads_by_branch/?date=${s}&branch_id=${a}&current_page=${t}&page_size=${c}`,"GET",null,S())}),z=s=>s.filteredLeadsListSlice.data,E=s=>s.filteredLeadsListSlice.count,I=({date:s})=>{const a=b(),t=u(v),[c,l]=d.useState([]),[i,x]=d.useState(1);let o=d.useMemo(()=>50,[]);d.useEffect(()=>{s&&t&&a(n({date:s,branch:t.id,currentPage:i,PageSize:o}))},[s,t.id,i,o]);const f=u(z),g=u(E);return e.jsxs("div",{className:L.list,children:[e.jsx("h1",{className:L.count,children:g}),e.jsxs(y,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Nomer"})]})}),e.jsx("tbody",{children:c?.map((r,j)=>e.jsxs("tr",{children:[e.jsx("td",{children:j+1}),e.jsx("td",{children:r?.name}),e.jsx("td",{children:r?.surname}),e.jsx("td",{children:r?.phone})]},j+1))})]}),e.jsx(F,{setCurrentTableData:l,users:f||[],setCurrentPage:x,currentPage:i,pageSize:o,onPageChange:r=>{x(r)},type:"custom"})]})},q={data:[],count:0,loading:!1,error:null};C({name:"filteredLeadsListSlice",initialState:q,reducers:{},extraReducers:s=>{s.addCase(n.pending,a=>{a.loading=!0}).addCase(n.fulfilled,(a,t)=>{a.loading=!1,a.data=t.payload.data,a.count=t.payload.lead_count}).addCase(n.rejected,a=>{a.loading=!1,a.error="error"})}});const G=()=>{const[s,a]=d.useState(null);return e.jsxs("div",{className:h.fileteredLeads,children:[e.jsxs("div",{className:h.header,children:[e.jsx(P,{}),e.jsx(D,{type:"date",value:s,onChange:t=>a(t.target.value)})]}),e.jsx("div",{className:h.content,children:e.jsx(I,{date:s})})]})};export{G as FilteredLeadsPage};
