import{r as n,j as e,B as T,I as H,i as S,T as G}from"./index-Cux8sda1.js";import{M as J}from"./modal-BR27MEf1.js";import{F as P}from"./form-C3mZZqBW.js";import{S as Q}from"./switch-sjHY-EbU.js";const X="_calendarHeader_147ng_1",Y="_calendarHeader__btn_147ng_11",Z="_calendarHeader__title_147ng_14",L={calendarHeader:X,calendarHeader__btn:Y,calendarHeader__title:Z},we=n.memo(()=>e.jsxs("div",{className:L.calendarHeader,children:[e.jsx("h1",{children:"Academic Calendar"}),e.jsx(T,{type:"simple",extraClass:L.calendarHeader__btn,children:"Change"}),e.jsxs("div",{className:L.calendarHeader__title,children:[e.jsx("i",{className:"far fa-calendar-alt"}),e.jsx("h2",{children:"2023-2024 years calendar"})]})]})),ee="_calendarAdd_4r69k_1",ae={calendarAdd:ee},De=n.memo(h=>{const{active:p,setActive:C,onSubmit:r,register:u,setValue:y,success:x}=h;return n.useEffect(()=>{x&&(y("name",""),y("color",null))},[x]),e.jsx(J,{active:p,setActive:C,children:e.jsxs("div",{className:ae.calendarAdd,children:[e.jsx("h1",{children:"Add"}),e.jsxs(P,{onSubmit:r,children:[e.jsx(H,{register:u,placeholder:"Kun nomi",name:"name",required:!0}),e.jsx(H,{register:u,type:"color",name:"color",required:!0})]})]})})}),te="_calendarListItem_1frf2_1",ne="_inner_1frf2_6",se="_inner__title_1frf2_11",re="_inner__items_1frf2_19",le="_inner__day_1frf2_45",de="_active_1frf2_53",ie="_demoActive_1frf2_61",ce="_inner__number_1frf2_65",_e="_inner__item_1frf2_19",oe="_calendarListItem__item_1frf2_75",me="_calendarListItem__title_1frf2_81",ue="_calendarListItem__display_1frf2_90",ye="_calendarListItem__container_1frf2_95",fe="_all_1frf2_117",ve="_item_1frf2_144",he="_item__inner_1frf2_150",pe="_item__icons_1frf2_154",xe="_item__icon_1frf2_154",Ie="_calendarListItem__btn_1frf2_168",t={calendarListItem:te,inner:ne,inner__title:se,inner__items:re,inner__day:le,active:de,demoActive:ie,inner__number:ce,inner__item:_e,calendarListItem__item:oe,calendarListItem__title:me,calendarListItem__display:ue,calendarListItem__container:ye,all:fe,item:ve,item__inner:he,item__icons:pe,item__icon:xe,calendarListItem__btn:Ie},He=n.memo(h=>{const{month:p,setActive:C,data:r,onActiveDays:u,sortWeeksDays:y,currentData:x,setSelected:E,onSubmit:W,isChanged:k,setIsChanged:$,onSubmitDelete:M}=h;n.useRef();const I=n.useMemo(()=>["1week","2week","3week","4week","5week","6week"],[]),[f,F]=n.useState([]),[l,v]=n.useState([]),[m,A]=n.useState([{}]),[c,j]=n.useState([]),[N,B]=n.useState([]),[q,be]=n.useState([]),[o,O]=n.useState(!0),[b,w]=n.useState([]),[D,ge]=n.useState(!1),[Se,Le]=n.useState([]);n.useEffect(()=>{F(y(r[0]?.days,r[0]?.days[0]?.day_name==="Friday"?4:r[0]?.days[0]?.day_name==="Saturday"?5:r[0]?.days[0]?.day_name==="Sunday"?6:r[0]?.days[0]?.day_name==="Monday"?0:r[0]?.days[0]?.day_name==="Tuesday"?1:r[0]?.days[0]?.day_name==="Wednesday"?2:3)),B(r[0]?.types),A([{}])},[r]),n.useEffect(()=>{k&&(j([]),w([]),$(!1))},[k,c]),n.useEffect(()=>{c.length&&!D&&o&&E(c)},[c,D]);const R=n.useCallback(()=>I.map((s,i)=>e.jsx("tr",{children:f[i]?.map((a,g)=>e.jsxs("td",{onClick:()=>{a.value&&w(_=>_.filter(d=>d===a?.value?.id)[0]?_.filter(d=>d!==a?.value?.id):[..._,a?.value?.id])},className:S(t.inner__day,{[t.active]:b.includes(a?.value?.id),[t.demoActive]:!1}),style:{padding:a?.value?.day_number>9?"1rem 0 .6rem .6rem":""},children:[e.jsx("p",{className:t.inner__number,style:{backgroundColor:(a?.value?.type_id?.color,a?.value?.type_id?.color),padding:a?.value?.day_number>9?".4em .9rem":""},children:a?.value?.day_number}),a?.value?.type_id?.type!==""]},g))},i)),[m,I,f,b]),U=n.useCallback(()=>I.map((s,i)=>e.jsx("tr",{children:f[i]?.map((a,g)=>{const _=m.filter(d=>d?.startId<=a?.value?.id&&d?.finishId>=a?.value?.id)[0];return _&&!c.length&&j(d=>[...d,a?.value?.id]),e.jsxs("td",{onClick:()=>{a.value&&(u(a?.value?.id,a?.value?.day_number,m,A,v,p,c,{func:()=>j([])}),l.length===2?v([]):v([a?.value?.id]))},onMouseEnter:()=>{l.length&&v([l[0],a?.value?.id])},className:S(t.inner__day,{[t.active]:o?_||a.value?l[0]===a?.value?.id:!1:a?.value?.type_id?.color!=="red"&&a?.value?.type_id?.color!=="green"?!1:_||m.filter(d=>d?.startId&&!d?.finishId?d?.startId===a?.value?.id:!1)[0],[t.demoActive]:(l[0]>l[1]?l[1]:l[0])<a?.value?.id&&(l[0]>l[1]?l[0]:l[1])>a?.value?.id}),style:{color:"white",padding:a?.value?.day_number>9?"1rem 0 .6rem .6rem":""},children:[e.jsx("p",{className:t.inner__number,style:{backgroundColor:(a?.value?.type_id?.color,a?.value?.type_id?.color),padding:a?.value?.day_number>9?".4em .9rem":""},children:a?.value?.day_number}),a?.value?.type_id?.type!==""]},g)})},i)),[c,m,f,l]),K=n.useCallback(()=>N.map((s,i)=>s?.days?.length?e.jsx("div",{className:t.all,style:{borderBottom:`8px solid ${s.color}`},children:e.jsxs("div",{className:t.item,children:[e.jsxs("p",{className:t.item__inner,children:[s.days?s.days[0]?.day_number:null,s.days.length>1?`-${s.days[s.days.length-1]?.day_number}`:null,e.jsx("span",{children:"/"}),e.jsx("span",{children:`${s.type.slice(0,16)}${s.type.length>16?"...":""}`})]}),e.jsx("div",{className:t.item__icons,children:s.type==="Ish kuni"||s.type==="Dam"?null:e.jsx("i",{className:S("fas fa-trash",t.item__icon),onClick:()=>{M(s.days.map(a=>a.id))}})})]})}):null),[N,q]),V=o?U():R(),z=K();return e.jsxs("div",{className:t.calendarListItem,children:[e.jsxs("div",{className:t.inner,children:[e.jsx("div",{className:t.inner__title,children:r[0]?.month_name}),e.jsxs(G,{extraClass:t.inner__items,children:[e.jsx("thead",{children:e.jsx("tr",{children:je.map((s,i)=>e.jsx("th",{style:{width:`${39/7}rem`},children:e.jsx("div",{className:t.inner__item,children:s})},i))})}),e.jsx("tbody",{children:V})]})]}),e.jsxs("div",{className:t.calendarListItem__item,children:[e.jsxs("div",{className:t.calendarListItem__title,children:[r[0]?.month_name,e.jsxs("div",{className:t.calendarListItem__display,children:[o?"select":"single",e.jsx(Q,{activeSwitch:o,onChangeSwitch:O})]})]}),e.jsx("div",{className:t.calendarListItem__container,children:z}),o?null:e.jsx(T,{onClick:()=>W(b),extraClass:t.calendarListItem__btn,children:"Submit"})]})]})}),je=["M","TU","W","TH","F","SA","SU"];export{He as C,we as a,De as b};
