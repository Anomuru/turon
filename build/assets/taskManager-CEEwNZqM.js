import{aL as M,aM as pe,aN as xe,r as f,aO as q,R as O,aP as he,aQ as me,aR as ve,aS as H,aT as _e,aU as be,j as d,e as ye,u as Ie,V as Re,aV as De,a0 as Se,D as Ne}from"./index-Dts_nlzx.js";import{h as je,T as Ce}from"./taskManagerRight-D91V-vBt.js";import"./confirmModal-BY7I8EU1.js";const ze="_container_abpzi_2",Te="_box_abpzi_7",we="_box__header_abpzi_16",Oe="_box__header_title_abpzi_20",Me="_box__sides_abpzi_28",w={container:ze,box:Te,box__header:we,box__header_title:Oe,box__sides:Me};function K(e,n,t){const s=e.slice();return s.splice(t<0?s.length+t:t,0,s.splice(n,1)[0]),s}function ke(e,n){return e.reduce((t,s,r)=>{const i=n.get(s);return i&&(t[r]=i),t},Array(e.length))}function k(e){return e!==null&&e>=0}function Ee(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function Le(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Q=e=>{let{rects:n,activeIndex:t,overIndex:s,index:r}=e;const i=K(n,s,t),a=n[r],c=i[r];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},E={scaleX:1,scaleY:1},$e=e=>{var n;let{activeIndex:t,activeNodeRect:s,index:r,rects:i,overIndex:a}=e;const c=(n=i[t])!=null?n:s;if(!c)return null;if(r===t){const l=i[a];return l?{x:0,y:t<a?l.top+l.height-(c.top+c.height):l.top-c.top,...E}:null}const u=Ae(i,r,t);return r>t&&r<=a?{x:0,y:-c.height-u,...E}:r<t&&r>=a?{x:0,y:c.height+u,...E}:{x:0,y:0,...E}};function Ae(e,n,t){const s=e[n],r=e[n-1],i=e[n+1];return s?t<n?r?s.top-(r.top+r.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):r?s.top-(r.top+r.height):0:0}const J="Sortable",W=O.createContext({activeIndex:-1,containerId:J,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Q,disabled:{draggable:!1,droppable:!1}});function Pe(e){let{children:n,id:t,items:s,strategy:r=Q,disabled:i=!1}=e;const{active:a,dragOverlay:c,droppableRects:u,over:l,measureDroppableContainers:o}=pe(),h=xe(J,t),v=c.rect!==null,x=f.useMemo(()=>s.map(S=>typeof S=="object"&&"id"in S?S.id:S),[s]),R=a!=null,p=a?x.indexOf(a.id):-1,_=l?x.indexOf(l.id):-1,y=f.useRef(x),D=!Ee(x,y.current),I=_!==-1&&p===-1||D,m=Le(i);q(()=>{D&&R&&o(x)},[D,x,R,o]),f.useEffect(()=>{y.current=x},[x]);const C=f.useMemo(()=>({activeIndex:p,containerId:h,disabled:m,disableTransforms:I,items:x,overIndex:_,useDragOverlay:v,sortedRects:ke(x,u),strategy:r}),[p,h,m.draggable,m.droppable,I,x,_,u,v,r]);return O.createElement(W.Provider,{value:C},n)}const Xe=e=>{let{id:n,items:t,activeIndex:s,overIndex:r}=e;return K(t,s,r).indexOf(n)},Ye=e=>{let{containerId:n,isSorting:t,wasDragging:s,index:r,items:i,newIndex:a,previousItems:c,previousContainerId:u,transition:l}=e;return!l||!s||c!==i&&r===a?!1:t?!0:a!==r&&n===u},Be={duration:200,easing:"ease"},Z="transform",Ue=H.Transition.toString({property:Z,duration:0,easing:"linear"}),Ve={roleDescription:"sortable"};function Fe(e){let{disabled:n,index:t,node:s,rect:r}=e;const[i,a]=f.useState(null),c=f.useRef(t);return q(()=>{if(!n&&t!==c.current&&s.current){const u=r.current;if(u){const l=be(s.current,{ignoreTransform:!0}),o={x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height};(o.x||o.y)&&a(o)}}t!==c.current&&(c.current=t)},[n,t,s,r]),f.useEffect(()=>{i&&a(null)},[i]),i}function ee(e){let{animateLayoutChanges:n=Ye,attributes:t,disabled:s,data:r,getNewIndex:i=Xe,id:a,strategy:c,resizeObserverConfig:u,transition:l=Be}=e;const{items:o,containerId:h,activeIndex:v,disabled:x,disableTransforms:R,sortedRects:p,overIndex:_,useDragOverlay:y,strategy:D}=f.useContext(W),I=Ge(s,x),m=o.indexOf(a),C=f.useMemo(()=>({sortable:{containerId:h,index:m,items:o},...r}),[h,r,m,o]),S=f.useMemo(()=>o.slice(o.indexOf(a)),[o,a]),{rect:P,node:X,isOver:te,setNodeRef:Y}=he({id:a,data:C,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...u}}),{active:z,activatorEvent:ne,activeNodeRect:re,attributes:se,setNodeRef:B,listeners:ae,isDragging:L,over:ie,setActivatorNodeRef:oe,transform:ce}=me({id:a,data:C,attributes:{...Ve,...t},disabled:I.draggable}),de=ve(Y,B),N=!!z,U=N&&!R&&k(v)&&k(_),V=!y&&L,F=V&&U?ce:null,le=U?F??(c??D)({rects:p,activeNodeRect:re,activeIndex:v,overIndex:_,index:m}):null,T=k(v)&&k(_)?i({id:a,items:o,activeIndex:v,overIndex:_}):m,j=z?.id,g=f.useRef({activeId:j,items:o,newIndex:T,containerId:h}),ue=o!==g.current.items,G=n({active:z,containerId:h,isDragging:L,isSorting:N,id:a,index:m,items:o,newIndex:g.current.newIndex,previousItems:g.current.items,previousContainerId:g.current.containerId,transition:l,wasDragging:g.current.activeId!=null}),$=Fe({disabled:!G,index:m,node:X,rect:P});return f.useEffect(()=>{N&&g.current.newIndex!==T&&(g.current.newIndex=T),h!==g.current.containerId&&(g.current.containerId=h),o!==g.current.items&&(g.current.items=o)},[N,T,h,o]),f.useEffect(()=>{if(j===g.current.activeId)return;if(j!=null&&g.current.activeId==null){g.current.activeId=j;return}const ge=setTimeout(()=>{g.current.activeId=j},50);return()=>clearTimeout(ge)},[j]),{active:z,activeIndex:v,attributes:se,data:C,rect:P,index:m,newIndex:T,items:o,isOver:te,isSorting:N,isDragging:L,listeners:ae,node:X,overIndex:_,over:ie,setNodeRef:de,setActivatorNodeRef:oe,setDroppableNodeRef:Y,setDraggableNodeRef:B,transform:$??le,transition:fe()};function fe(){if($||ue&&g.current.newIndex===m)return Ue;if(!(V&&!_e(ne)||!l)&&(N||G))return H.Transition.toString({...l,property:Z})}}function Ge(e,n){var t,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(t=e?.draggable)!=null?t:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}M.Down,M.Right,M.Up,M.Left;const qe="_funnel_zuotn_1",He="_funnel__wrapper_zuotn_16",A={funnel:qe,funnel__wrapper:He},Ke=f.forwardRef((e,n)=>{const{attributes:t,listeners:s,items:r,activeDown:i,onToggleChapter:a,style:c,dragOverlay:u,container:l,children:o}=e,h=f.useMemo(()=>r.map(v=>v.id),[r]);return d.jsxs("div",{style:c,...t,className:A.funnel,ref:n,children:[d.jsx("div",{className:A.funnel__header,children:d.jsx("h1",{children:l.title})}),d.jsx("div",{className:A.funnel__wrapper,children:d.jsx(Pe,{strategy:$e,items:h,children:o})})]})}),Qe="_leadCard_10zyz_1",Je="_dragging_10zyz_13",We="_dragOverlay_10zyz_13",Ze="_header_10zyz_26",et="_info_10zyz_35",tt="_date_10zyz_41",nt="_footer_10zyz_44",rt="_task_10zyz_47",b={leadCard:Qe,dragging:Je,dragOverlay:We,header:Ze,info:et,date:tt,footer:nt,task:rt},st=O.memo(O.forwardRef(({color:e,dragOverlay:n,dragging:t,disabled:s,fadeIn:r,handle:i,handleProps:a,height:c,index:u,listeners:l,attributes:o,onRemove:h,renderItem:v,sorting:x,transition:R,transform:p,value:_,wrapperStyle:y,...D},I)=>(CSS.Transform?.toString(p),d.jsxs("div",{className:ye(b.leadCard,{[b.dragging]:t,[b.dragOverlay]:n}),ref:I,style:{...y,transition:[R,y?.transition].filter(Boolean).join(", "),"--translate-x":p?`${Math.round(p.x)}px`:void 0,"--translate-y":p?`${Math.round(p.y)}px`:void 0,"--scale-x":p?.scaleX?`${p.scaleX}`:void 0,"--scale-y":p?.scaleY?`${p.scaleY}`:void 0,"--index":u,"--color":e},...l,...o,children:[d.jsxs("div",{className:b.header,children:[d.jsxs("div",{className:b.info,children:[d.jsxs("div",{className:b.name,children:["Ulug'bek ",_]}),d.jsx("div",{className:b.surname,children:"Fatxullayev"})]}),d.jsx("div",{className:b.date,children:d.jsx("div",{className:b.date__title,children:"22-iyul 16:30"})})]}),d.jsx("div",{className:b.footer,children:d.jsx("div",{className:b.task,children:"Task: yes"})})]}))));O.memo(e=>{const{item:n}=e,{active:t,attributes:s,isDragging:r,listeners:i,over:a,setNodeRef:c,transition:u,transform:l}=ee({id:n.id,data:{type:"container",children:n.items}});return a&&(n.id===a.id&&t?.data.current?.type!=="container"||n.items.some(o=>o.id===a.id)),d.jsx(Ke,{style:{transition:u,transform:CSS?.Translate?.toString(l),opacity:r?.5:void 0},attributes:s,listeners:i,ref:c,items:n?.items,container:n,children:n.items.map(o=>d.jsx(at,{item:o},o.id))})});function at({item:e}){const{isDragging:n,attributes:t,listeners:s,setNodeRef:r,transform:i,transition:a}=ee({id:e.id,transition:{duration:150,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}});return d.jsx(st,{attributes:t,listeners:s,ref:r,transform:i,transition:a,id:e.id,item:e,dragging:n})}const it={},ut=()=>{const e=Ie(),n=localStorage.getItem("branchId"),[t,s]=f.useState(new Date),[r,i]=f.useState("progress"),a=Re(t);return f.useEffect(()=>{e(De({date:a,taskType:r,branch:n})),e(Se())},[a,r]),d.jsx(Ne,{reducers:it,children:d.jsx("div",{className:w.container,children:d.jsxs("div",{className:w.box,children:[d.jsx("div",{className:w.box__header,children:d.jsx("h1",{className:w.box__header_title,children:"My Projects"})}),d.jsxs("div",{className:w.box__sides,children:[d.jsx(je,{setTaskType:i,taskType:r,formatted:a}),d.jsx(Ce,{selectedDate:t,setSelectedDate:s})]})]})})})};export{ut as TaskManager};
