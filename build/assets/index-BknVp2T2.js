import{k as q,r as o,l as H,j as e,B as n,T as L,D as B,I as w,p as r}from"./index-Cux8sda1.js";import"./studentsSlice-JQcNq_2O.js";import{F as D,a as E,b as I,f as P}from"./flowsSlice-BXoIT3Tq.js";import{M as u}from"./modal-BR27MEf1.js";import{T as V}from"./textArea-1604NtUh.js";import{u as $}from"./index.esm-DQmSsb0O.js";import{F as p}from"./form-C3mZZqBW.js";import{g as z}from"./flowsSelector-BUggl1rg.js";const J="_flow_t6vt0_1",K="_flowMain_t6vt0_7",R="_flowMain__wrapper_t6vt0_12",G="_flow__header_t6vt0_15",Q="_flow__filter_t6vt0_23",U="_modal_t6vt0_57",W="_flowModal_t6vt0_61",X="_flowModalHeader_t6vt0_64",Y="_flowModalForm_t6vt0_69",l={flow:J,flowMain:K,flowMain__wrapper:R,flow__header:G,flow__filter:Q,modal:U,flowModal:W,flowModalHeader:X,flowModalForm:Y},Z=({currentTableData:v,teacherData:d,loading:F,levelData:h,getLevelData:M,setActive:b,branchId:S})=>{const f=q(),{register:a,handleSubmit:g,setValue:y}=$(),[_,m]=o.useState(!1),[N,C]=o.useState(!1),[x,j]=o.useState(!1),[s,A]=o.useState([]);H();const[c,k]=o.useState(!1),O=t=>{const i={...t,activity:c,branch:S};localStorage.setItem("flowData",JSON.stringify(i)),f("flow-list")};o.useEffect(()=>{s&&y("subject",s[0]?.id)},[s]);const T=()=>v?.map((t,i)=>e.jsxs("tr",{onClick:()=>f(`./flowsProfile/${t?.id}`),children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:t?.name}),e.jsxs("td",{children:[t?.subject_name,t?.level_name?` / ${t?.level_name}`:null]}),e.jsx("td",{children:t?.student_count}),e.jsxs("td",{children:[t?.teacher_name,t?.teacher_surname]})]}));return e.jsxs("div",{className:l.flowMain,children:[e.jsxs("div",{className:l.flow__filter,children:[e.jsx(n,{onClick:()=>j(!x),type:"simple-add",children:"Filter"}),e.jsxs("div",{className:l.flowMain__wrapper,children:[e.jsx(n,{onClick:()=>m(!_),type:"simple",children:"Create Flow"}),e.jsx(n,{type:"simple-add",onClick:()=>b(!0),children:"Add Flow"})]})]}),e.jsxs(L,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Fan Level"}),e.jsx("th",{children:"O'quvchi soni"}),e.jsx("th",{children:"O'qituvchisi"})]})}),F==="loading"?e.jsx(B,{}):e.jsx("tbody",{children:T()})]}),e.jsxs(u,{active:_,setActive:m,extraClass:l.modal,children:[e.jsx("h2",{children:"Create Flow"}),e.jsxs("div",{className:l.flowModal,children:[e.jsxs("div",{className:l.flowModalHeader,children:[e.jsx("h3",{children:"Activity"}),e.jsx(w,{onChange:()=>k(!c),type:"checkbox"})]}),e.jsx("div",{className:l.flowModalForm,children:e.jsxs(p,{typeSubmit:"",onSubmit:g(O),action:"",children:[e.jsx(w,{placeholder:"Nomi",register:a,name:"name",required:!0}),c?null:e.jsxs(e.Fragment,{children:[e.jsx(r,{title:"O'qituvchini tanlang",options:d,onChangeOption:t=>{t&&M(t),A(d.filter(i=>i.id===+t)[0]?.subject)},register:a,name:"teacher"}),s?.length?e.jsx(r,{title:"Fan",options:s,register:a,name:"subject",defaultValue:s[0]?.id}):null,h?.length?e.jsx(r,{title:"Level",options:h,register:a,name:"level"}):null,e.jsx(V,{placeholder:"Koment",register:a,name:"comment"})]}),e.jsx(n,{children:"Next"})]})})]})]}),e.jsxs(u,{active:N,setActive:C,children:[e.jsx("h2",{children:"Add Flow"}),e.jsx("div",{className:l.flowModalForm,children:e.jsxs(p,{typeSubmit:"",children:[e.jsx(r,{}),e.jsx(n,{type:"simple",children:"Add"})]})})]}),e.jsx(D,{active:x,setActive:j})]})},re=Object.freeze(Object.defineProperty({__proto__:null,Flows:Z,fetchFlows:E,flowListThunk:P,flowsSlice:I,getFlows:z},Symbol.toStringTag,{value:"Module"}));export{Z as F,l as c,re as i};
