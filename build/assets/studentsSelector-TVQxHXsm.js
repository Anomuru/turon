import{r as o,k as Q,l as A,j as e,T as K,u as $,A as P,h as O,f as W,n as l,I as T,p as w,B as L,M as H,i as z}from"./index-Cux8sda1.js";import{o as I}from"./alertSlice-XeBTN8B3.js";import{u as E}from"./index.esm-DQmSsb0O.js";import"./userProfileSlice-BflEK4KO.js";import{g as R,a as X}from"./index-B-IQsIPc.js";import{a as Y,b as Z,g as ee,c as te,j as se,k as ae,e as re}from"./index-Dyh4sQR2.js";import{M}from"./modal-BR27MEf1.js";import{m as ne,a as oe,g as de}from"./studentsSlice-JQcNq_2O.js";import{C as ce}from"./confirmModal-DiNALKc8.js";import"./pagination-Cj0p_t2O.js";import{g as le,f as ie}from"./groupsAttendanceSlice-DmRNDpcI.js";import{d as ue}from"./user_image-CruVt77w.js";import{F as V}from"./form-C3mZZqBW.js";import"./workerSelect-N9ju4zO7.js";import"./teacherParseSlice-z7KSx3F7.js";import"./teacherThunk-qU_2Y3xX.js";import{g as me}from"./roomsSelectors-Dutms6Wd.js";import"./filterRoomsSlice-ClpK4_Fa.js";import"./textArea-1604NtUh.js";import"./editableCard-BNSd-vHU.js";import"./index-CO9axSa1.js";import{i as he}from"./oftenUsedSelector-B4R2CTqR.js";import"./switch-sjHY-EbU.js";const _e="_mainContainer_tablePanelBox_yq31o_7",xe="_xmark_yq31o_34",D={mainContainer_tablePanelBox:_e,xmark:xe},dt=o.memo(({currentTableData:t,setSelectStudents:b,theme:F,branchId:y})=>{const[i,C]=o.useState(!1),[m,u]=o.useState(!1),[x,p]=o.useState(!1),n=Q(),c=JSON.parse(localStorage.getItem("selectedSystem")),g=t?.map((s,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{onClick:()=>n(`profile/${s.id}`),children:`${s.user?.surname} ${s.user?.name}`}),e.jsx("td",{children:s.user?.age}),e.jsx("td",{children:s.deleted?s.user?.language.name:s.user?.language}),e.jsxs("td",{children:[s?.class_number,"-sinf"]}),e.jsx("td",{children:s.user?.registered_date}),e.jsx("td",{onClick:()=>{C(s.id),p(!x),u(s?.deleted)},children:e.jsx("i",{style:{color:"#FF3737FF"},className:`fa-solid fa-xmark ${D.xmark}`})})]},s.id)),G=A(),{request:N}=$(),d=()=>{N(`${P}Students/students_delete/${i}/`,"DELETE",null,O()).then(s=>{G(I({type:"success",status:!0,msg:s.msg}))}),p(!1),G(ne(i))};return e.jsxs("div",{className:D.mainContainer,children:[e.jsx("div",{className:D.mainContainer_tablePanelBox,children:e.jsxs(K,{children:[e.jsx("thead",{className:D.thead,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Age"}),e.jsx("th",{children:"Til"}),c?.name==="school"?e.jsx("th",{children:"Sinf"}):e.jsxs(e.Fragment,{children:[e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fani"})]}),e.jsx("th",{children:"Reg. sana"}),e.jsx("th",{children:"O'chirish"})]})}),e.jsx("tbody",{children:g})]})}),e.jsx(ce,{type:m?"success":"danger",title:m?"Qaytarmoq":"O'chirmoq",text:m?"Studentni qaytarishni hohlaysizmi":"Studentni o'chirishni hohlaysizmi",active:x,setActive:p,onClick:d})]})}),pe="_createGroup_11qn0_1",ge="_createGroupTitle_11qn0_6",je="_createGroupFormItem_11qn0_16",Se="_createGroupForm_11qn0_12",j={createGroup:pe,createGroupTitle:ge,createGroupFormItem:je,createGroupForm:Se},ct=o.memo(t=>{const{setActive:b,active:F,selectedStudents:y,selectedTeachers:i,selectedSubjectId:C,selectedTime:m}=t,{register:u,handleSubmit:x}=E();localStorage.getItem("selectedBranch"),W(),A();const p=l(qe),n=l(Be),c=l(he),[v,g]=o.useState(!1);return e.jsx(M,{setActive:b,active:F,children:e.jsxs("div",{className:j.createGroup,children:[e.jsx("div",{className:j.createGroupTitle,children:e.jsx("h2",{children:"Gruppa ochish"})}),e.jsx("div",{className:j.createGroupForm,children:e.jsxs(V,{children:[e.jsx(T,{extraClassName:j.createGroupFormItem,placeholder:"Gruppa nomi",register:u,name:"name"}),e.jsx(w,{extraClassName:j.createGroupFormItem,title:"Kurs turi",options:p,register:u,name:"course_types"}),n?.length?e.jsx(w,{extraClassName:j.createGroupFormItem,title:"Kurs darajasi",options:n,register:u,name:"level"}):null,e.jsx(w,{extraClassName:j.createGroupFormItem,title:"Kurs tili",options:c,register:u,name:"language"}),e.jsx(T,{extraClassName:j.createGroupFormItem,placeholder:"Gruppa narxi",register:u,name:"price",type:"number"}),e.jsx(T,{extraClassName:j.createGroupFormItem,placeholder:"O'qituvchi ulushi",register:u,name:"teacher_salary",type:"number"})]})})]})})}),fe="_addModal_xl27x_1",be="_addModal__container_xl27x_19",Te="_addModal__subject_xl27x_39",Fe="_check_xl27x_47",ye="_check__input_xl27x_52",Ce="_status_xl27x_55",ve="_active_xl27x_64",Ge="_status__inner_xl27x_67",Ne="_addModal__btn_xl27x_77",_={addModal:fe,addModal__container:be,addModal__subject:Te,check:Fe,check__input:ye,status:Ce,active:ve,status__inner:Ge,addModal__btn:Ne},lt=o.memo(t=>{const{setActive:b,active:F}=t,{request:y}=$(),i=A(),{register:C,handleSubmit:m}=E(),u=l(le),x=l(Y),p=l(Z),n=l(ee),c=l(R),v=l(X),g=l(te),[G,N]=o.useState(!1),[d,s]=o.useState([]),[h,S]=o.useState(""),f=a=>{i(re({id:a?.group})),N(!0)},q=()=>{const a={students:d,update_method:"add_students",group_type:"center"};y(`${P}Group/groups/profile/${n?.id}/`,"PATCH",JSON.stringify(a),O()).then(r=>{i(I({type:"success",status:!0,msg:"O'quvchilar guruhga qo'shildi"}))}).catch(r=>{i(I({type:"error",status:!0,msg:"xatolik yuz berdi (outside groupAdd)"}))})};o.useEffect(()=>{c&&i(ie({userBranchId:c}))},[c]),o.useEffect(()=>{n&&i(se({group_id:n?.id}))},[n]),o.useEffect(()=>{if(c&&n&&g&&v===1){const a={time_tables:g.map(r=>({week:r.week.id,room:r.room.id,end_time:r.end_time,start_time:r.start_time})),ignore_students:n?.students.map(r=>r.id),ignore_teacher:n?.teacher.map(r=>r.id)[0]};i(ae({branch_id:c,subject_id:n?.subject?.id,res:a}))}},[c,n,g,v]);const U=o.useMemo(()=>p?.slice()?.filter(r=>r?.user?.name?.toLowerCase().includes(h?.toLowerCase())||r?.user?.surname?.toLowerCase().includes(h?.toLowerCase())),[p,h]),J=U?.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:ue,alt:""})}),e.jsx("td",{children:a?.user?.name}),e.jsx("td",{children:a?.user?.surname}),e.jsx("td",{children:a?.subject.length?e.jsx("div",{className:_.addModal__subject,children:a?.subject[0]?.name}):null}),e.jsx("td",{children:e.jsxs("div",{className:_.check,children:[e.jsx(T,{extraClassName:_.check__input,type:"checkbox",onChange:()=>s(r=>r.filter(B=>B===a.id)[0]?r.filter(B=>B!==a.id):[...r,a.id])}),e.jsx("div",{className:z(_.status,{[_.active]:a?.extra_info?.status}),children:e.jsx("div",{className:z(_.status__inner,{[_.active]:a?.extra_info?.status})})})]})})]}));return e.jsxs(e.Fragment,{children:[e.jsx(M,{setActive:b,active:F,children:e.jsxs(V,{typeSubmit:"",extraClassname:_.addModal,onSubmit:m(f),children:[e.jsx("h2",{children:"Add Group"}),e.jsx(w,{options:u,title:"Groups",register:C,name:"group"}),e.jsx(L,{children:"Tekshirmoq"})]})}),e.jsxs(M,{active:G,setActive:N,extraClass:_.addModal,children:[e.jsx(T,{placeholder:"Search",onChange:a=>S(a.target.value),defaultValue:h}),x?e.jsx(H,{}):e.jsx("div",{className:_.addModal__container,children:e.jsxs(K,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Fanlar"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:J})]})}),e.jsx(L,{extraClass:_.addModal__btn,onClick:q,children:"Add"})]})]})}),ke="_timeTable_n2c1a_1",we="_timeTable__scroll_n2c1a_6",Ie="_timeTableForm_n2c1a_24",De="_timeTableAddPlus_n2c1a_28",Me="_timeTableFooterBtn_n2c1a_43",k={timeTable:ke,timeTable__scroll:we,timeTableForm:Ie,timeTableAddPlus:De,timeTableFooterBtn:Me},it=o.memo(t=>{const{setActive:b,active:F,selectTime:y,setSelectTime:i,weekDays:C}=t,{register:m,handleSubmit:u}=E(),x=A(),{request:p}=$(),n=l(me),c=l(R),v=l(Ae),[g,G]=o.useState([1]),N=d=>{let s=Object.entries(d).sort();const h=g.map((S,f)=>({end_time:s[f][1],start_time:s[s.length/2+f][1],room:+s[s.length/4+f][1],week:+s[s.length-(g.length-f)][1],branch:c}));x(oe()),i(h),p(`${P}Students/api/filter_students_subject/?branch=${c}`,"POST",JSON.stringify(h),O()).then(S=>{x(de(S)),x(I({type:"success",status:!0,msg:"Filterlangan o'quvchilar keldi"})),b(!1)}).catch(S=>{console.log(S),x(I({type:"error",status:!0,msg:"Databazada xatolik yuz berdi"}))})};return e.jsx(M,{setActive:b,active:F,children:e.jsxs(V,{typeSubmit:"",extraClassname:k.timeTable,onSubmit:u(N),children:[e.jsx("h1",{className:k.timeTableHeader,children:"Vaqti Kiritish"}),e.jsx("div",{className:k.timeTable__scroll,children:g.map((d,s)=>{const h=`week${d}`,S=`room${d}`,f=`start_time${d}`,q=`end_time${d}`;return e.jsxs("div",{className:k.timeTableForm,children:[e.jsx(w,{title:"Kunlar",options:C,register:m,name:h,defaultValue:y[s]?.week}),e.jsx(w,{title:"Honalar",options:n,register:m,name:S,defaultValue:y[s]?.room}),e.jsx(T,{type:"time",placeholder:"Boshlanish vaqti",register:m,name:f}),e.jsx(T,{type:"time",placeholder:"Tugash vaqti",register:m,name:q})]})})}),e.jsx("div",{className:k.timeTableAddPlus,onClick:()=>G(d=>[...d,d[d.length-1]+1]),children:e.jsx("i",{className:"fa fa-plus"})}),e.jsx("div",{className:k.timeTableFooterBtn,children:v==="loading"?e.jsx(H,{}):e.jsx(L,{children:"Tekshirmoq"})})]})})}),ut=t=>t.newStudents.filteredByClass,mt=t=>t.newStudents.filteredByClassStudents,ht=t=>t.newStudents?.newStudentsStatus,_t=t=>t.newStudents?.studyingStudentsStatus,xt=t=>t.newStudents?.loading,pt=t=>t.newStudents?.newStudentes,gt=t=>t.newStudents.studyingStudents,jt=t=>t.newStudents?.filteredStudents,St=t=>t.newStudents?.filteredTeachers,ft=t=>t.newStudents?.filteredErrors,Ae=t=>t.newStudents?.newStudentsStatus,qe=t=>t.newStudents?.filteredCurseTypes,Be=t=>t.newStudents?.filteredCurseLevel,bt=t=>t.newStudents?.deletedStudents;export{it as G,dt as N,gt as a,Be as b,qe as c,St as d,jt as e,Ae as f,pt as g,ft as h,bt as i,lt as j,ct as k,mt as l,ut as m,ht as n,_t as o,xt as p};
