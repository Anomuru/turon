import{r as u,j as e,e as k,T as B,I,aa as p,h as S,A as g,i as N,aA as H,u as O,a as F,a4 as R,ae as q,g as U,a6 as G,af as P,aB as z,z as V,a8 as b,S as L,B as $,aC as J,aD as M,ab as D}from"./index-DJEj1NQv.js";import"./groupsList-8FJTz9uE.js";import"./pagination-3QzX85Ud.js";const K="_accordion_nysnm_1",Q="_header_nysnm_8",W="_info_nysnm_18",X="_title_nysnm_35",Y="_btns_nysnm_44",Z="_arrow_nysnm_50",ee="_active_nysnm_54",se="_wrapper_nysnm_62",d={accordion:K,header:Q,info:W,title:X,btns:Y,arrow:Z,active:ee,wrapper:se},ae=({title:a,subtitle:s,children:r,backOpen:o,setBackOpen:_,clazz:l,btns:i,number:m})=>{const[t,w]=u.useState(!1),h=u.useRef(),v=c=>{c.target.tagName!=="BUTTON"&&(o!==void 0?_(!o):w(!t))};return e.jsxs("div",{className:k(d.accordion,l,{[d.active]:o||t}),children:[e.jsxs("div",{className:d.header,children:[e.jsxs("div",{className:d.info,children:[e.jsx("span",{children:m}),a?e.jsx("div",{className:d.title,children:a}):null]}),e.jsxs("div",{className:d.btns,children:[s&&e.jsx("div",{className:d.checkbox,children:s}),i?.map(c=>c),e.jsx("div",{onClick:v,className:k(d.arrow,{[d.active]:o||t}),children:e.jsx("i",{className:"fas fa-angle-down"})})]})]}),e.jsx("div",{style:o||t?{height:h.current?.scrollHeight}:{height:"0px"},ref:h,className:d.wrapper,children:e.jsx("div",{children:r})})]})},te="_flowList_1lms2_1",re="_flowList__container_1lms2_4",ne="_flowList__input_1lms2_9",oe="_status_1lms2_12",ue="_active_1lms2_21",le="_status__inner_1lms2_24",f={flowList:te,flowList__container:re,flowList__input:ne,status:oe,active:ue,status__inner:le},_e=u.memo(({flowList:a,number:s,onChangeSingle:r,onChangeAll:o,currentPage:_})=>{const[l,i]=u.useState(!1);u.useEffect(()=>{i(!1)},[_]);const m=()=>a?.students?.map((t,w)=>e.jsxs("tr",{children:[e.jsx("td",{children:w+1}),e.jsxs("td",{children:[t?.name," ",t?.surname]}),e.jsx("td",{children:t?.phone}),e.jsx("td",{children:e.jsxs("div",{className:f.flowList__container,children:[e.jsx(I,{extraClassName:f.flowList__input,type:"checkbox",onChange:()=>r(t?.id,a?.id),checked:t?.isCheck?t?.isCheck:a?.isCheck,disabled:t?.extra_info?!t?.extra_info?.status:!1}),t?.extra_info?e.jsx("div",{className:k(f.status,{[f.active]:t?.extra_info?.status}),children:e.jsx("div",{className:k(f.status__inner,{[f.active]:t?.extra_info?.status})})}):null]})})]}));return e.jsx("div",{className:f.flowList,children:e.jsx(ae,{setBackOpen:i,backOpen:l,number:s+1,title:a?.name,subtitle:e.jsx(I,{type:"checkbox",onChange:()=>o(a?.id),checked:a?.isCheck}),children:e.jsxs(B,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon Numer"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:m()})]})})})}),x=p("flowsSlice/fetchFlows",async({branch:a,subject:s,teacher:r})=>{const{request:o}=S();return await o(`${g}Flow/flow-list/?${H({branch:a,subject:s,teacher:r})}`,"GET",null,N())}),y=p("flowsSlice/fetchFilterFlow",({subject:a,teacher:s})=>{const{request:r}=S();return r(`${g}Flow/flow-list/?subject=${a}&teacher=${s}`,"GET",null,N())});p("flowsSlice/fetchFilterFlows",()=>{const{request:a}=S();return a(`${g}`,"GET",null,N())});const C=p("flowsSlice/flowListThunk",async({data:a})=>{const{request:s}=S();return await s(`${g}Flow/flow-list-create/`,"POST",JSON.stringify(a),N())}),be=u.memo(({active:a,setActive:s})=>{const r=O(),o=F(R),_=F(q)??[],l=F(U),[i,m]=u.useState("all"),[t,w]=u.useState("all"),[h,v]=u.useState(!1),c=(n,j)=>{r(x({branch:l,subject:n,teacher:j}))};u.useEffect(()=>{l&&(r(G()),r(P(l)))},[l]),u.useEffect(()=>{const n=z().flowFilter;if(l)if(!h&&n){const{selectedSubject:j,selectedTeacher:T}=n;m(j||"all"),w(T||"all"),c(j,T),v(!0)}else h||(c(i,t),v(!0))},[h,l]);const A=()=>{c(i,t),M("flowFilter",{selectedSubject:i,selectedTeacher:t})},E=()=>{m("all"),w("all"),c("all","all"),J("flowFilter")};return e.jsx(V,{active:a,setActive:s,children:e.jsxs("div",{className:b.filter,children:[e.jsx("h1",{children:"Filter"}),e.jsxs("div",{className:b.filter__container,children:[e.jsx(L,{title:"Teacher",extraClass:b.filter__select,onChangeOption:n=>w(n),defaultValue:t,options:[{name:"Hamma",id:"all"},..._.map(n=>({id:n.id,name:`${n.name} ${n.surname}`}))]}),e.jsx(L,{title:"Fan",extraClass:b.filter__select,onChangeOption:n=>m(n),defaultValue:i,options:[{name:"Hamma",id:"all"},...o]}),e.jsxs("div",{className:b.filter__switch,children:[e.jsx($,{onClick:E,type:"danger",children:"Tozalash"}),e.jsx($,{onClick:A,children:"Filter"})]})]})]})})}),de={subjectId:null,teacherId:null,isDelete:!1},ie=D({name:"flowFilterSlice",initialState:de,reducers:{getSubjectId:(a,s)=>{a.subjectId=s.payload},getTeacherId:(a,s)=>{a.teacherId=s.payload},getIsDelete:(a,s)=>{a.isDelete=s.payload}}}),{getSubjectId:ve,getTeacherId:je,getIsDelete:xe}=ie.actions,ce={flows:[],flowsStatus:"idle",flowList:[{className:"1blue",status:!0,data:[{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0}]},{className:"2blue",data:[{name:"dewdewde",surname:"ikromov",number:"432423",status:!0},{name:"sardeedwedor",surname:"ikromov",number:"432423",status:!0},{name:"dewde",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0}]},{className:"3blue",data:[{name:"sardor",surname:"dewdew",number:"432423",status:!0},{name:"dewdewd",surname:"ikromov",number:"432423",status:!0},{name:"dewdewded",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikrodewdewdmov",number:"432423",status:!0}]},{className:"2blue",data:[{name:"dewdewde",surname:"ikromov",number:"432423",status:!0},{name:"sardeedwedor",surname:"ikromov",number:"432423",status:!0},{name:"dewde",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0}]},{className:"3blue",data:[{name:"sardor",surname:"dewdew",number:"432423",status:!0},{name:"dewdewd",surname:"ikromov",number:"432423",status:!0},{name:"dewdewded",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikrodewdewdmov",number:"432423",status:!0}]},{className:"2blue",data:[{name:"dewdewde",surname:"ikromov",number:"432423",status:!0},{name:"sardeedwedor",surname:"ikromov",number:"432423",status:!0},{name:"dewde",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0}]},{className:"3blue",data:[{name:"sardor",surname:"dewdew",number:"432423",status:!0},{name:"dewdewd",surname:"ikromov",number:"432423",status:!0},{name:"dewdewded",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikrodewdewdmov",number:"432423",status:!0}]},{className:"2blue",data:[{name:"dewdewde",surname:"ikromov",number:"432423",status:!0},{name:"sardeedwedor",surname:"ikromov",number:"432423",status:!0},{name:"dewde",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikromov",number:"432423",status:!0}]},{className:"3blue",data:[{name:"sardor",surname:"dewdew",number:"432423",status:!0},{name:"dewdewd",surname:"ikromov",number:"432423",status:!0},{name:"dewdewded",surname:"ikromov",number:"432423",status:!0},{name:"sardor",surname:"ikrodewdewdmov",number:"432423",status:!0}]}],flowListStatus:"idle"},me=D({name:"flowsSlice",initialState:ce,reducers:{},extraReducers:a=>{a.addCase(x.pending,s=>{s.flowsStatus="loading"}).addCase(x.fulfilled,(s,r)=>{s.flows=r.payload,s.flowsStatus="success"}).addCase(x.rejected,(s,r)=>{s.flowsStatus="error"}).addCase(y.pending,s=>{s.flowsStatus="loading"}).addCase(y.fulfilled,(s,r)=>{s.flows=r.payload,s.flowsStatus="success"}).addCase(y.rejected,(s,r)=>{s.flowsStatus="error"}).addCase(C.pending,s=>{s.flowsStatus="loading"}).addCase(C.fulfilled,(s,r)=>{s.flowList=r.payload,s.flowsStatus="success"}).addCase(C.rejected,(s,r)=>{s.flowsStatus="error"})}}),{reducer:ke}=me;export{_e as F,be as a,ke as b,x as c,C as f};
