import{l as N,a as l,m as v,n as H,p as U,q as z,u as O,g as R,r as t,s as $,j as e,B as p,T as V,P as W,t as G,C as J,i as K,A as Q,k as X,v as Y,o as S}from"./index-B1KXs2zi.js";import{g as Z}from"./searchSelector-CJfw-E7m.js";import{D as ee}from"./deletedTeachers-fT-pBAih.js";import{M as te}from"./MultiPage-OkwmnpSM.js";import{E as se}from"./employerCategoryPage-D-tZGHLW.js";const ae="_teacher_5jqb1_1",re="_teacher__filter_5jqb1_14",ce="_header_btn_5jqb1_18",oe="_table_5jqb1_21",le="_category_5jqb1_33",ne="_categoryItem_5jqb1_37",c={teacher:ae,teacher__filter:re,header_btn:ce,table:oe,category:le,categoryItem:ne},pe=()=>{const{theme:D}=N();l(v);const r=l(Z),C=l(H),j=l(U),d=l(z),n=O(),{id:L}=l(R),_=L;t.useEffect(()=>{_&&n($({userBranchId:_}))},[n,_]);let i=t.useMemo(()=>30,[]);const[ie,w]=t.useState([]),[h,o]=t.useState(1),[he,ue]=t.useState(),[x,T]=t.useState(),[g,A]=t.useState(!1),[P,q]=t.useState({}),[u,E]=t.useState(!1),[M,f]=t.useState(!1),[m,I]=t.useState(!1),{request:F}=K(),y=t.useMemo(()=>{const a=m?d.slice():C.slice();return o(1),r?a.filter(s=>s?.name?.toLowerCase().includes(r.toLowerCase())||s?.surname?.toLowerCase().includes(r.toLowerCase())):a},[C,d,o,r,m]),b=t.useMemo(()=>{const a=m?d.slice():j.slice();return o(1),r?a.filter(s=>s?.name?.toLowerCase().includes(r.toLowerCase())||s?.surname?.toLowerCase().includes(r.toLowerCase())):a},[j,d,o,r,m]),k=[{name:"O'qituvchilar",type:"teachers"}],B=()=>{const a=P.id;F(`${Q}Teachers/teachers/delete/${a}/`,"DELETE",null,X()).then(s=>{s.status&&n(Y(a)),n(S({type:s.status?"success":"danger",status:!0,msg:s.msg})),f(!1)}).catch(s=>{n(S({type:"danger",status:!0,msg:s.msg}))})};return e.jsxs(te,{types:k,page:"teachers",children:[e.jsxs("div",{className:c.teacher,children:[e.jsxs("div",{className:c.teacher__filter,children:[u?null:e.jsx(p,{status:"filter",extraClass:c.extraCutClassFilter,onClick:()=>T(!x),type:"filter",children:"Filter"}),e.jsxs("div",{className:c.header_btn,children:[u?null:e.jsx(p,{type:"login",status:"timeTable",children:"time table"}),e.jsx(p,{extraClass:c.category,type:"simple",onClick:()=>E(!u),children:"Toifa"})]})]}),e.jsxs("div",{className:c.table,children:[e.jsx("h2",{children:u?"Toifa ":g?"Deleted Teachers":"Teachers"}),u?e.jsx(se,{extraClass:c.categoryItem}):g?e.jsx(ee,{data:b.slice((h-1)*i,h*i)}):e.jsx(V,{setActiveDelete:q,setActiveModal:f,theme:D==="app_school_theme",loading:v,data:y.slice((h-1)*i,h*i)})]}),e.jsx(W,{setCurrentTableData:w,users:g?b:y,search:r,setCurrentPage:o,currentPage:h,pageSize:i,onPageChange:a=>{o(a)},type:"custom"}),e.jsx(G,{setIsFilter:I,activeSwitch:g,setActiveSwitch:A,setActive:T,active:x})]}),e.jsx(J,{setActive:f,active:M,onClick:B,type:"danger"})]})};export{pe as TeachersPage};
