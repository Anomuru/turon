import{a as y,r as s,j as e,d as le,T as $,z as Z,S as k,B as E,b as ne,u as M,g as H,aB as Ie,a8 as se,a9 as ye,aD as ge,aC as qe,ab as Re,D as G,h as Q,A as I,i as q,o as V,n as ie,e as he,F as _e,I as X,Q as Be,ao as Ue,au as Ve,bB as Se,bC as U,M as Je}from"./index-DOfOZKEd.js";import{P as K}from"./pagination-ajK0EmM0.js";import{g as Qe,a as Ye,b as Ke,c as We,d as Ge,e as Xe,s as Ze,f as et,h as tt,i as ve,j as st,k as fe,l as at,m as nt,n as rt,p as ct,q as lt,r as it,t as dt,u as ot,o as ht,v as be,w as ut,x as pt,y as xt,z as mt,A as jt,B as yt,C as gt,D as _t,E as St,F as vt,G as ft,H as bt,I as Ct,J as Tt,K as Dt}from"./otchotAccountingSlice-CvArhwji.js";import{g as Nt}from"./brachSwitcherSelector-vlhkEAq9.js";import{h as ae,d as Ce,j as At}from"./capitalSelector-BXm8bH-I.js";import{L as ce}from"./link-DmpYtdoK.js";import{g as W}from"./searchSelector-B3qtoac4.js";import{C as re}from"./confirmModal-ARekbj1x.js";import{R as Te}from"./radio-D8KPMsXX.js";import{D as Pt}from"./deletedTeachers-ASsSuOUp.js";import"./teachers-D35-71qq.js";import"./seq-fiWyDIXz.js";const kt="_empSalary_15d12_1",Ot="_cash_15d12_5",wt="_changeType_15d12_24",Y={empSalary:kt,cash:Ot,changeType:wt},Et=({additionalCosts:t,extraclassName:o,setActiveDelete:u,setChangingData:c,formatSalary:n,paymentStyle:a,setChangePaymentType:i,setChangePayment:d,changePayment:l,getCapitalType:m,onChange:x})=>{const h=y(W),r=y(Ne);let p=s.useMemo(()=>50,[]);const[_,g]=s.useState([]),[b,D]=s.useState(1),N=s.useMemo(()=>{const j=t?.slice();return D(1),h?j.filter(v=>v.name?.toLowerCase().includes(h.toLowerCase())):j},[t,D,h]),C=_?.map((j,v)=>e.jsxs("tr",{children:[e.jsx("td",{children:v+1}),e.jsx("td",{children:j.name}),e.jsx("td",{children:n(j.price)}),e.jsx("td",{children:j.created}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{i(j),d(!0)},className:a,children:j.payment})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(E,{onClick:()=>{u(!0),c({id:j.id,name:j.name})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o,children:r?e.jsx(le,{}):e.jsxs($,{children:[e.jsx("thead",{style:{position:"sticky",top:"0"},children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),e.jsx("tbody",{children:C})]})}),e.jsxs(Z,{active:l,setActive:d,children:[e.jsx("h2",{children:"To'lov turini uzgartirish"}),e.jsx("div",{className:Y.changeType,children:e.jsx(k,{options:m,onChangeOption:x})})]}),e.jsx(K,{setCurrentTableData:g,users:N,setCurrentPage:D,currentPage:b,pageSize:p,onPageChange:j=>{D(j)},type:"custom"})]})},Ft=({capitalData:t,setChangingData:o,setActiveDelete:u})=>{const c=a=>{u(!0)},n=()=>t?.map((a,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:a?.name}),e.jsx("td",{children:a?.price}),e.jsx("td",{children:a?.added_date}),e.jsx("td",{children:a.payment_type}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(E,{onClick:()=>{c({id:a.id,name:a.name}),o({id:a.id,name:a.name})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]}));return e.jsx("div",{style:{height:"calc(100vh - 50rem)",overflow:"auto"},children:e.jsxs($,{children:[e.jsx("thead",{style:{position:"sticky",top:"0"},children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),e.jsx("tbody",{children:n()})]})})},Lt=({deletedStudent:t,formatSalary:o})=>{const u=y(W);let c=s.useMemo(()=>50,[]);const[n,a]=s.useState([]),[i,d]=s.useState(1),l=s.useMemo(()=>{const x=t?.slice();return d(1),u?x.filter(h=>h.name?.toLowerCase().includes(u.toLowerCase())):x},[t,d,u]),m=()=>n.map((x,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsxs("td",{children:[x?.student?.user?.name," ",x?.student?.user?.surname]}),e.jsx("td",{children:o(x.payment_sum)}),e.jsx("td",{children:x.added_data}),e.jsx("td",{children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:x?.payment_type?.name})})]}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Y.empSalary,children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),e.jsx("tbody",{children:m()})]})}),e.jsx(K,{setCurrentTableData:a,users:l,setCurrentPage:d,currentPage:i,pageSize:c,onPageChange:x=>{d(x)},type:"custom"})]})},$t=({studentData:t,changingData:o,setChangingData:u,onDelete:c,deleted:n,activeDelete:a,setActiveDelete:i,formatSalary:d})=>{const l=y(W),m=y(De);let x=s.useMemo(()=>50,[]);const[h,r]=s.useState([]),[p,_]=s.useState(1),g=s.useMemo(()=>{const S=t?.slice();return _(1),l?S.filter(C=>C?.student_name?.toLowerCase().includes(l.toLowerCase())):S},[t,_,l]),b=ne(),D=S=>{i(!0)},N=()=>h.map((S,C)=>e.jsxs("tr",{children:[e.jsx("td",{children:C+1}),e.jsxs("td",{onClick:()=>b(`../../students/profile/${S.id}`),children:[S?.student_name," ",S?.student_surname]}),e.jsx("td",{children:d(S.payment_sum)}),e.jsx("td",{children:S.date}),e.jsx("td",{children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:S?.payment_type_name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(E,{onClick:()=>{D({id:S.id,name:S?.student_name,surname:S?.student_surname}),u({id:S.id,name:S?.student_name,surname:S?.student_surname})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Y.empSalary,children:m?e.jsx(le,{}):e.jsxs($,{children:[e.jsx("thead",{style:{top:"0",position:"sticky"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Ochirich"})]})}),e.jsx("tbody",{children:N()})]})}),e.jsx(K,{setCurrentTableData:r,users:g,setCurrentPage:_,currentPage:p,pageSize:x,onPageChange:S=>{_(S)},type:"custom"})]})},Mt=({changingData:t,filteredSalary:o,sum2:u,formatSalary:c,onChange:n,changePayment:a,setChangePayment:i,setChangingData:d,setActiveDelete:l,activeDelete:m,getCapitalType:x})=>{const h=ne(),r=y(W),p=y(Ut);let _=s.useMemo(()=>50,[]);const[g,b]=s.useState([]),[D,N]=s.useState(1),[S,C]=s.useState(null),j=s.useMemo(()=>{const f=o?.slice();return N(1),r?f.filter(J=>J?.user?.name.toLowerCase().includes(r.toLowerCase())):f},[o,N,r]),w=g?.map((f,J)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:J+1}),e.jsxs("td",{onClick:()=>h(`../../employer/employerProfile/${f?.user?.id}`),children:[f?.user?.name," ",f.user.surname]}),e.jsx("td",{children:f?.salary}),e.jsx("td",{children:f?.date}),e.jsx("td",{children:f?.user?.job?.length?f?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{d({id:f.id,name:f.user.name,surname:f.user.surname,payment_types:f.payment_types.name,item:f}),C({payment_types:f.payment_types}),i(!0)},className:Y.cash,children:f?.payment_types?.name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(E,{onClick:()=>{l(!0),d({id:f.id,name:f.user.name,surname:f.user.surname,payment_types:f.payment_types.name})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Y.empSalary,children:[p?e.jsx(le,{}):e.jsxs($,{children:[e.jsx("thead",{style:{position:"sticky",top:"0"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),w]}),e.jsxs(Z,{active:a,setActive:i,children:[e.jsx("h2",{children:"To'lov turini uzgartirish"}),e.jsx("div",{className:Y.changeType,children:e.jsx(k,{options:x,onChangeOption:n})})]})]}),e.jsx(K,{setCurrentTableData:b,users:j,setCurrentPage:N,currentPage:D,pageSize:_,onPageChange:f=>{N(f)},type:"custom"})]})},Ht=({teacherSalary:t,onDelete:o,deleted:u,setChangePayment:c,setChangingData:n,changePayment:a,setActiveDelete:i,changingData:d,activeDelete:l})=>{t?.filter(j=>!j.deleted);const m=y(W),x=y(Zt);let h=s.useMemo(()=>50,[]);const[r,p]=s.useState([]),[_,g]=s.useState(1),b=s.useMemo(()=>{const j=t?.slice();return g(1),m?j.filter(v=>v?.teacher?.user?.name?.toLowerCase().includes(m.toLowerCase())):j},[t,g,m]),D=j=>{i(!0)},N=ne(),C=r?.map((j,v)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:v+1}),e.jsxs("td",{onClick:()=>N(`../../teacher/teacherProfile/${j?.teacher?.id}`,{relative:"path"}),children:[j?.teacher?.user?.name," ",j?.teacher?.user?.surname]}),e.jsx("td",{children:j?.salary}),e.jsx("td",{children:j?.comment}),e.jsx("td",{children:j?.date}),e.jsx("td",{onClick:()=>{n({id:j?.id,payment:j?.payment}),c(!0)},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:j?.payment?.name})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(E,{onClick:()=>{D({id:j?.id,name:j?.teacher?.user?.name,surname:j?.teacher?.user?.surname}),n({id:j?.id,name:j?.teacher?.user?.name,surname:j?.teacher?.user?.surname})},type:"delete",children:e.jsx("i",{className:"fa fa-times",style:{color:"white"}})})})})]},j.id)}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"calc(100vh - 50rem)",overflow:"auto"},children:x?e.jsx(le,{}):e.jsxs($,{children:[e.jsx("thead",{style:{position:"sticky",top:"0"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"O'chirish"})]})}),C]})}),e.jsx(K,{setCurrentTableData:p,users:b,setCurrentPage:g,currentPage:_,pageSize:h,onPageChange:j=>{g(j)},type:"custom"})]})},zt=t=>t.accountingSlice?.pages,It=t=>t.accountingSlice?.activePage,qt=t=>t.accountingSlice?.accountingPages,Rt=t=>t.accountingSlice?.encashment,Bt=t=>t.employerSlice?.employerSalary,Ut=t=>t.employerSlice?.loading,Vt=t=>t.employerSlice?.deletedEmployerSalary,Jt=t=>t.studentSlice?.studentsData,De=t=>t.studentSlice?.loading,Qt=t=>t.studentSlice?.deletedStudentsPayment,Yt=t=>t.overHeadSlice?.overHeadList,Kt=t=>t.overHeadSlice?.overHeadDeletedLists,Wt=t=>t.overHeadSlice?.overHeadType,Ne=t=>t.overHeadSlice?.loading,Ae=t=>t.overHeadSlice?.monthDay,Gt=t=>t.teacher?.teacherSalary,Xt=t=>t.teacher?.deletedSalary,Zt=t=>t.teacher?.loading,es=t=>t.otchotAccountingSlice?.students,ts=t=>t.otchotAccountingSlice?.loading,ss=t=>t.otchotAccountingSlice?.teacherSalary,as=t=>t.otchotAccountingSlice?.employerSalary,Pe=t=>t.otchotAccountingSlice?.all,ns="_paymentTypes_1a521_1",rs="_paymentTypes__header_1a521_7",cs="_paymentTypes__container_1a521_12",ls="_paymentTypes__item_1a521_17",is="_list__container_1a521_32",ds="_otchot_1a521_36",os="_otchot__inner_1a521_44",hs="_header_1a521_49",us="_header__item_1a521_56",ps="_active_1a521_63",xs="_table_1a521_67",O={paymentTypes:ns,paymentTypes__header:rs,paymentTypes__container:cs,paymentTypes__item:ls,list__container:is,otchot:ds,otchot__inner:os,header:hs,header__item:us,active:ps,table:xs},ms=({teacherSalary:t,formatSalary:o})=>{const c=t?.salary?.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsxs("td",{children:[n?.name," ",n?.surname]}),e.jsx("td",{children:n?.phone}),e.jsx("td",{children:n?.subject}),e.jsx("td",{children:o(n?.total_salary)}),e.jsx("td",{children:o(n?.taken_salary)}),e.jsx("td",{children:o(n?.remaining_salary)}),e.jsx("td",{children:o(n.cash)}),e.jsx("td",{children:o(n.bank)}),e.jsx("td",{children:o(n.click)})]}));return e.jsx("div",{className:O.table,children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Umimiy oylik"}),e.jsx("th",{children:"Olingan oylik"}),e.jsx("th",{children:"Qolgan oylik"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),e.jsx("tbody",{children:c})]})})},js=({employerSalary:t,formatSalary:o})=>{const c=t?.salary?.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsxs("td",{children:[n?.name," ",n?.surname]}),e.jsx("td",{children:n?.phone}),e.jsx("td",{children:n?.subject}),e.jsx("td",{children:o(n?.total_salary)}),e.jsx("td",{children:o(n?.taken_salary)}),e.jsx("td",{children:o(n?.remaining_salary)}),e.jsx("td",{children:o(n.cash)}),e.jsx("td",{children:o(n.bank)}),e.jsx("td",{children:o(n.click)})]}));return e.jsx("div",{className:O.table,children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Telefon numer"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Umimiy oylik"}),e.jsx("th",{children:"Olingan oylik"}),e.jsx("th",{children:"Qolgan oylik"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),e.jsx("tbody",{children:c})]})})},ys=({classes:t,extraClass:o,extraClassTable:u,format:c})=>{const a=t?.class?.map((i,d)=>e.jsxs(e.Fragment,{children:[i.students.length>=1?e.jsxs("h2",{className:o,children:[i.class_number," ",i.class_color]}):null,i?.students.map((l,m)=>e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:m+1}),e.jsxs("td",{children:[l.name," ",l.surname]}),e.jsx("td",{children:l.phone}),e.jsx("td",{children:c(l.total_debt)}),e.jsxs("td",{children:["-",c(l.remaining_debt)]}),e.jsx("td",{children:c(l.total_dis)}),e.jsx("td",{children:c(l.total_discount)}),e.jsx("td",{children:c(l.cash)}),e.jsx("td",{children:c(l.bank)}),e.jsx("td",{children:c(l.click)})]})}))]}));return e.jsx("div",{className:u,children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Tel raqami"}),e.jsx("th",{children:"Oylik qarz"}),e.jsx("th",{children:"Qolgan qarz"}),e.jsx("th",{children:"Chegirma (1-yillik)"}),e.jsx("th",{children:"Chegirma (1-martalik)"}),e.jsx("th",{children:"Cash"}),e.jsx("th",{children:"Bank"}),e.jsx("th",{children:"Click"})]})}),a]})})},gs=({setActive:t,active:o,setActiveDel:u,activeDel:c,activePage:n})=>{const a=M(),i=y(H),[d,l]=s.useState(!1),[m,x]=s.useState(!1);s.useEffect(()=>{const g=Ie().accountingFilter;i&&g&&!m&&(l(g.isArchive),u(g.activeDel),g.activeDel&&h(),x(!0))},[m,n,i]);const h=()=>{a(n==="studentsPayments"?Qe(i):n==="teachersSalary"?Ye(i):n==="employeesSalary"?Ke(i):n==="overhead"?We(i):Ge(i))},r=g=>{u(g),g&&h(),ge("accountingFilter",{isArchive:d,activeDel:g})},p=g=>{l(g),ge("accountingFilter",{isArchive:g,activeDel:c})},_=()=>{l(!1),u(!1),qe("accountingFilter")};return e.jsx(Z,{setActive:t,active:o,children:e.jsxs("div",{className:se.filter,children:[e.jsx("h1",{children:"Filter"}),e.jsxs("div",{className:se.filter__container,children:[e.jsxs("div",{className:se.filter__switch,children:[e.jsx("p",{children:"O'chirilganlar"}),e.jsx(ye,{onChangeSwitch:r,activeSwitch:c})]}),e.jsxs("div",{className:se.filter__switch,children:[e.jsx("p",{children:"Arxiv"}),e.jsx(ye,{onChangeSwitch:p,activeSwitch:d})]}),e.jsx("div",{className:se.filter__switch,style:{justifyContent:"flex-end"},children:e.jsx(E,{onClick:_,type:"danger",children:"Tozalash"})})]})]})})},_s={isDelete:!1,isArchive:!1},Ss=Re({name:"accountingFilterSlice",initialState:_s,reducers:{fetchIsDelete:(t,o)=>{t.isDelete=o.payload},fetchIsArchive:(t,o)=>{t.isArchive=o.payload}}}),{fetchIsDelete:Ma,fetchIsArchive:Ha}=Ss.actions,vs={studentSlice:Ze},fs=({deleted:t,setDeleted:o})=>{const{request:u}=Q(),c=M(),n=y(Jt);y(De);const[a,i]=s.useState(!1),[d,l]=s.useState({}),m=y(Qt);let x=y(H);s.useEffect(()=>{x&&c(Xe(x))},[x]);const h=g=>Number(g).toLocaleString(),r=m?.reduce((g,b)=>g+parseFloat(b.payment_sum||0),0),p=n?.reduce((g,b)=>g+parseFloat(b.payment_sum||0),0),_=()=>{const{id:g}=d;u(`${I}Students/student_payment_delete/${g}/`,"DELETE",JSON.stringify({id:g}),q()).then(b=>{c(et({id:g})),i(!1),c(V({status:!0,type:"success",msg:b.msg}))}).catch(b=>{console.log(b)})};return e.jsxs(G,{reducers:vs,children:[e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",gap:"2rem"}}),e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end",marginBottom:"3rem"},children:["Total : ",h(t?r:p)]})]}),t?e.jsx(Lt,{formatSalary:h,deletedStudent:m}):e.jsx($t,{formatSalary:h,studentData:n,deleted:t,setActiveDelete:i,activeDelete:a,changingData:d,setChangingData:l}),e.jsx(re,{setActive:i,active:a,onClick:_,title:`Rostanham ${d.name} ni o'chirmoqchimisiz `,type:"danger"})]})},bs="_accountingMain_n7lrj_1",Cs="_accounting__wrapper_n7lrj_8",Ts="_wrapper__filter_n7lrj_13",Ds="_wrapper__middle_n7lrj_17",Ns="_middle__box_n7lrj_17",As="_typeExpenses_n7lrj_37",Ps="_changeType_n7lrj_54",ks="_form_n7lrj_62",Os="_overhead_n7lrj_72",ws="_table_n7lrj_77",Es="_subHeader_n7lrj_82",Fs="_subHeader__subBtn_n7lrj_85",Ls="_active_n7lrj_90",$s="_typeItem_n7lrj_96",P={accountingMain:bs,accounting__wrapper:Cs,wrapper__filter:Ts,wrapper__middle:Ds,middle__box:Ns,typeExpenses:As,changeType:Ps,form:ks,overhead:Os,table:ws,subHeader:Es,subHeader__subBtn:Fs,active:Ls,typeItem:$s},Ms=({onClick:t,setDeleted:o,deleted:u,sum:c,formatSalary:n,sum2:a})=>e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",gap:"2rem"},children:e.jsx(E,{type:u?"disabled":"",onClick:u?null:t,children:"Qo'shish"})}),e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",n(u?a:c)]})]}),Hs=({overheadDeletedList:t,extraClassName:o,paymentStyle:u})=>{const c=y(W);let n=s.useMemo(()=>50,[]);const[a,i]=s.useState([]),[d,l]=s.useState(1),m=s.useMemo(()=>{const r=t?.slice();return l(1),c?r.filter(p=>p.name?.toLowerCase().includes(c.toLowerCase())):r},[t,l,c]),h=a.map((r,p)=>e.jsxs("tr",{children:[e.jsx("td",{children:p+1}),e.jsx("td",{children:r.name}),e.jsx("td",{children:r.price}),e.jsx("td",{children:r.created}),e.jsx("td",{children:e.jsx("div",{className:u,children:r.payment.name})})]}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o,children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),e.jsx("tbody",{children:h})]})}),e.jsx(K,{setCurrentTableData:i,users:m,setCurrentPage:l,currentPage:d,pageSize:n,onPageChange:r=>{l(r)},type:"custom"})]})},zs={overHeadSlice:fe,capital:Ce},Is=({deleted:t,setDeleted:o})=>{const[u,c]=s.useState(!1),n=y(Wt),a=M(),[i,d]=s.useState({}),[l,m]=s.useState(!1),{request:x}=Q(),h=y(Ne),r=y(ae),[p,_]=s.useState({}),{register:g,handleSubmit:b,setValue:D}=ie(),N=y(Ae),[S,C]=s.useState(null),[j,v]=s.useState(null),w=y(Yt),[f,J]=s.useState(!1),[ee,de]=s.useState({}),te=y(Kt),[F,R]=s.useState(!1),[B,oe]=s.useState(null),ue=y(ae),[pe,Oe]=s.useState(null);let xe=y(H);s.useEffect(()=>{a(tt()),a(ve())},[]),s.useEffect(()=>{a(st({activeBtn:B,branchId:xe}))},[B]);const we=()=>{c(!0)},Ee=A=>{_(A)},Fe=A=>{d(A);const{id:L}=A;n.filter(z=>z.id===+L)[0]?.name==="Boshqa"?m(!0):m(!1)},Le=A=>{const L={type:i.id,branch:xe,payment:p.id,...A};x(`${I}Overhead/overheads/create/`,"POST",JSON.stringify(L),q()).then(z=>{c(!1),D("name",""),D("price","");const ze={created:z.created,id:z.id,name:z.name,payment:z.name,price:z.price};a(rt(ze)),a(V({type:"success",status:!0,msg:z.msg}))}).catch(z=>{console.log(z)})},me=()=>{const{id:A}=ee;x(`${I}Overhead/overheads/delete/${A}`,"DELETE",JSON.stringify({id:A}),q()).then(L=>{a(nt({id:A})),J(!1),a(V({type:"success",status:!0,msg:L.msg}))}).catch(L=>{console.log(L)})},$e=A=>{const{id:L}=pe;a(at({id:L,payment:ue.filter(z=>z.id===+A)[0],changePaymentType:pe}))},Me=w?.reduce((A,L)=>A+parseFloat(L.price||0),0),He=te?.reduce((A,L)=>A+parseFloat(L.price||0),0),je=A=>Number(A).toLocaleString();return e.jsx(G,{reducers:zs,children:e.jsxs("div",{className:P.overhead,children:[e.jsx(Ms,{formatSalary:je,setDeleted:o,deleted:t,onClick:we,sum2:He,sum:Me}),t?e.jsx(Hs,{overheadDeletedList:te,extraClassName:P.table,paymentStyle:P.typeItem}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:P.subHeader,children:n?.map(A=>e.jsx(E,{extraClass:he(P.subHeader__subBtn,{[P.active]:B===A.id}),onClick:()=>oe(A.id),children:A.name}))}),e.jsx(Et,{formatSalary:je,loading:h,onDelete:me,changingData:ee,setChangingData:de,setActiveDelete:J,activeDelete:f,extraclassName:P.table,additionalCosts:w,paymentStyle:P.typeItem,setChangePayment:R,changePayment:F,getCapitalType:ue,onChange:$e,setChangePaymentType:Oe})]}),e.jsx(qs,{showAdditionalFields:l,setActiveModal:c,activeModal:u,option:n,select:i,setSelected:d,onChange:Fe,paymentType:r,register:g,handleSubmit:b,onAdd:Le,radioSelect:p,setRadioSelect:_,onChangeRadio:Ee,monthDay:N,day:S,setDay:C,month:j,setMonth:v,optionDef:B}),e.jsx(re,{setActive:J,active:f,onClick:me,title:`Rostanham ${ee.name} ni o'chirmoqchimisiz `,type:"danger"})]})})},qs=t=>{const{activeModal:o,setActiveModal:u,option:c,showAdditionalFields:n,onChange:a,paymentType:i,handleSubmit:d,onAdd:l,register:m,radioSelect:x,onChangeRadio:h,optionDef:r}=t;return e.jsx(Z,{setActive:u,active:o,children:e.jsxs(_e,{extraClassname:P.form,onSubmit:d(l),children:[e.jsx(X,{register:m,name:"created",type:"date",title:"Kun"}),e.jsx(k,{options:c,defaultValue:r,onChangeOption:p=>{a({name:p,id:p})}}),n?e.jsx(X,{name:"name",register:m,placeholder:"Narsa turi"}):null,e.jsx(X,{register:m,name:"price",type:"number",placeholder:"Narxi"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"2rem"},children:i?.map(p=>e.jsx(Te,{onChange:()=>h({name:p.name,id:p.id}),children:p.name,checked:x?.name===p.name,value:x===p.name,name:"hello"}))})]})})},Rs=t=>t.capitalSlice?.capital,Bs=t=>t.capitalSlice?.capitalDeleted,Us="_modal_3hzh2_5",Vs={modal:Us},Js=({setActive:t,sum2:o,sum1:u,formatSalary:c,deleted:n})=>e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(E,{onClick:()=>t(!0),children:"Qo'shish"}),e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",c(n?o:u)]})]}),Qs=({setActive:t,activeModal:o,radio:u,monthDay:c,month:n,day:a,setDay:i,setMonth:d,register:l,handleSubmit:m,onAdd:x,setRadio:h,radioSelect:r})=>e.jsx(Z,{setActive:t,active:o,children:e.jsx("div",{className:Vs.modal,children:e.jsxs(_e,{onSubmit:m(x),children:[e.jsx(X,{register:l,name:"added_date",type:"date"}),e.jsx(X,{register:l,name:"name"}),e.jsx(X,{register:l,name:"price",type:"number"}),e.jsx("div",{style:{display:"flex",gap:"2rem",justifyContent:"center"},children:u?.map(p=>e.jsx(Te,{onChange:()=>h({name:p.name,id:p.id}),children:p.name,checked:r?.name===p.name,value:r===p.name}))}),e.jsx(k,{title:"Oy",options:c,onChangeOption:d}),e.jsx(k,{title:"sana",options:c?.filter(p=>p?.value===n)[0]?.days,onChangeOption:i})]})})}),Ys=({deleted:t})=>{const o=()=>t?.map((u,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:u?.name}),e.jsx("td",{children:u?.price}),e.jsx("td",{children:u?.added_date}),e.jsx("td",{children:u?.payment_type?.name})]}));return e.jsx("div",{style:{height:"calc(100vh - 47rem)",overflow:"auto"},children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),e.jsx("tbody",{children:o()})]})})},Ks={capitalSlice:lt,capital:Ce,overHeadSlice:fe},Ws=({deleted:t,setDeleted:o})=>{const u=y(Rs),c=y(Bs),n=M(),[a,i]=s.useState(!1),d=y(ae),[l,m]=s.useState(null),[x,h]=s.useState(null),[r,p]=s.useState({}),[_,g]=s.useState({}),[b,D]=s.useState(!1),{register:N,setValue:S,handleSubmit:C}=ie();let j=y(H);const v=y(Ae),{request:w}=Q();s.useEffect(()=>{j&&(n(ct(j)),n(ve()))},[j]);const f=F=>{const R={branch:j,payment_type:r.id,...F};w(`${I}Capital/old_capital_create/`,"POST",JSON.stringify(R),q()).then(B=>{i(!1),n(V({type:"success",status:!0,msg:B.msg}));const oe={...B,payment_type:B.payment.name};n(dt(oe)),S("name",""),S("price","")}).catch(B=>{console.log(B)})},J=F=>Number(F).toLocaleString(),ee=u?.reduce((F,R)=>F+parseFloat(R.price||0),0),de=c?.reduce((F,R)=>F+parseFloat(R.price||0),0),te=()=>{const{id:F}=_;w(`${I}Capital/old_capital_delete/${F}`,"DELETE",JSON.stringify(F),q()).then(R=>{n(it({id:F})),D(!1),n(V({type:"success",status:!0,msg:R.msg}))}).catch(R=>{console.log(R)})};return e.jsx(G,{reducers:Ks,children:e.jsxs("div",{className:P.overhead,children:[e.jsx(Js,{deleted:t,setDeleted:o,setActive:i,sum1:ee,sum2:de,formatSalary:J}),t?e.jsx(Ys,{deleted:c}):e.jsx(Ft,{changingData:_,activeDelete:b,setActiveDelete:D,setChangingData:g,onDelete:te,capitalData:u}),e.jsx(Qs,{radioSelect:r,setRadio:p,register:N,onAdd:f,handleSubmit:C,monthDay:v,setMonth:h,setDay:m,day:l,month:x,setActive:i,activeModal:a,radio:d}),e.jsx(re,{setActive:D,active:b,onClick:te,title:`Rostanham ${_.name} ni o'chirmoqchimisiz `,type:"danger"})]})})},Gs={accountingSlice:be},za=()=>{let{"*":t}=Be();const o=y(zt),u=y(H),c=ne(),n=M(),[a,i]=s.useState(!1),[d,l]=s.useState(!1),[m,x]=s.useState(!1),[h,r]=s.useState(!1),p=y(Rt),_=y(It),g=Ue(),[b,D]=s.useState(!1),[N,S]=s.useState();s.useEffect(()=>{(_||o?.length)&&S(_??o[0]?.value)},[_,o]),s.useEffect(()=>{C(t)},[t]),s.useEffect(()=>{n(At())},[]),s.useEffect(()=>{u&&n(ot({branchID:u}))},[u]),s.useEffect(()=>{N!==_?(c(`${_}`),S(_)):g.search&&c(g.search.slice(6,g.search.length))},[_,c,g.pathname,g.search]);const C=s.useCallback(v=>{n(ht({value:v}))},[c]),j=v=>Number(v).toLocaleString();return y(Nt),s.useMemo(()=>[{name:"Students Payments",type:"studentsPayments"},{name:"Teacher Salary",type:"teachersSalary"},{name:"Employer Salary",type:"employeesSalary"},{name:"overhead",type:"overhead"},{name:"capital",type:"capital"}],[]),e.jsxs(G,{reducers:Gs,children:[e.jsxs("div",{className:P.accountingMain,children:[e.jsx("div",{className:P.accounting,children:e.jsxs("div",{className:P.accounting__wrapper,children:[e.jsxs("div",{className:P.wrapper__filter,children:[e.jsx(E,{type:"filter",status:"filter",onClick:()=>i(!a),children:"Filter"}),e.jsx(k,{defaultValue:N,options:o,onChangeOption:C})]}),e.jsxs("div",{className:P.wrapper__middle,children:[b?null:e.jsx("div",{className:P.middle__box,children:p?.map(v=>e.jsxs("div",{children:[v?.payment_type,": ",j(v.overall)]}))}),e.jsxs("div",{className:P.typeExpenses,children:[e.jsx(ce,{to:"../inkasatsiya",children:e.jsx(E,{children:"Inkasatsiya"})}),e.jsx(ce,{to:"otchot",children:e.jsx(E,{onClick:()=>D(!b),type:"filter",children:"buxgalteriya"})})]})]})]})}),e.jsx(Ve,{})]}),e.jsxs(Se,{children:[e.jsx(U,{path:"studentsPayments",element:e.jsx(fs,{deleted:d,setDeleted:l})}),e.jsx(U,{path:"teachersSalary",element:e.jsx(aa,{deleted:d,setDeleted:l,path:"teachersSalary"})}),e.jsx(U,{path:"employeesSalary",element:e.jsx(ea,{deleted:d,setDeleted:l,path:"employeesSalary"})}),e.jsx(U,{path:"overhead",element:e.jsx(Is,{path:"overhead",deleted:d,setDeleted:l})}),e.jsx(U,{path:"capital",element:e.jsx(Ws,{deleted:d,setDeleted:l,path:"capital"})}),e.jsx(U,{path:"otchot",element:e.jsx(Ca,{path:"otchot"})})]}),e.jsx(gs,{setActive:i,active:a,setActiveDel:l,activeDel:d,activePage:_})]})},Xs=({filteredDeletedSalary:t,formatSalary:o,sum2:u,onChange:c})=>{const n=y(W);let a=s.useMemo(()=>50,[]);const[i,d]=s.useState([]),[l,m]=s.useState(1),x=s.useMemo(()=>{const r=t?.slice();return m(1),n?r.filter(p=>p.name?.toLowerCase().includes(n.toLowerCase())):r},[t,m,n]),h=()=>i?.map((r,p)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:p+1}),e.jsx("td",{children:r?.user?.name}),e.jsx("td",{children:r?.salary}),e.jsx("td",{children:r?.date}),e.jsx("td",{children:r?.user?.job?.length?r?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{onClick:()=>c(r.id),children:e.jsx("div",{className:Y.cash,children:r?.payment_types?.name})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Y.empSalary,children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"})]})}),h()]})}),e.jsx(K,{setCurrentTableData:d,users:x,setCurrentPage:m,currentPage:l,pageSize:a,onPageChange:r=>{m(r)},type:"custom"})]})},Zs={employerSlice:pt},ea=s.memo(({deleted:t,setDeleted:o})=>{const u=M(),[c,n]=s.useState(!1),[a,i]=s.useState(!1),d=y(Bt),l=y(Vt),{request:m}=Q(),[x,h]=s.useState(!1);let r=y(H);s.useEffect(()=>{r&&u(ut(r))},[r]);const[p,_]=s.useState({}),g=y(ae),b=l?.reduce((j,v)=>j+parseFloat(v.salary||0),0),D=d?.reduce((j,v)=>j+parseFloat(v.salary||0),0),N=j=>Number(j).toLocaleString(),S=j=>{const{id:v}=p;m(`${I}Users/salaries/delete/${v}/`,"DELETE",JSON.stringify(v),q()).then(w=>{h(!x),u(mt({id:v})),u(V({status:!0,msg:w.msg,type:"success"}))}).catch(w=>{console.log(w)})},C=j=>{const{id:v}=p;m(`${I}Users/salaries/update/${v}/`,"PATCH",JSON.stringify({payment_types:Number(j)}),q()).then(w=>{n(!1),u(xt({id:v,payment_types:g.filter(f=>f.id===+j)[0],changingData:p}))}).catch(w=>{console.log(w)})};return e.jsx(G,{reducers:Zs,children:e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",N(t?b:D)]})}),t?e.jsx(Xs,{filteredDeletedSalary:l,formatSalary:N}):e.jsx(Mt,{changingData:p,formatSalary:N,filteredSalary:d,setChangingData:_,changePayment:c,activeDelete:x,setActiveDelete:h,setChangePayment:n,getCapitalType:g,onChange:C}),e.jsx(re,{setActive:h,active:x,onClick:S,title:`Rostanham ${p.name} ni o'chirmoqchimisiz `,type:"danger"})]})})}),ta=({deletedTeacher:t,setChangePayment:o,setChangingData:u})=>{const c=y(W);let n=s.useMemo(()=>50,[]);const[a,i]=s.useState([]),[d,l]=s.useState(1),m=s.useMemo(()=>{const h=t?.slice();return l(1),c?h.filter(r=>r.name?.toLowerCase().includes(c.toLowerCase())):h},[Pt,l,c]),x=()=>a?.map((h,r)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsxs("td",{children:[h?.teacher?.user?.name," ",h?.teacher?.user?.surname]}),e.jsx("td",{children:h?.salary}),e.jsx("td",{children:h?.comment}),e.jsx("td",{children:h?.date}),e.jsx("td",{onClick:()=>{u({id:h?.id,payment_types:h?.payment_types})},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:h?.payment?.name})})]},r)})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("div",{style:{height:"calc(100vh - 43rem)",overflow:"auto"},children:e.jsxs($,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),x()]})})}),e.jsx(K,{setCurrentTableData:i,users:m,setCurrentPage:l,currentPage:d,pageSize:n,onPageChange:h=>{l(h)},type:"custom"})]})},sa={teacher:yt},aa=({deleted:t,setDeleted:o})=>{const u=M(),c=y(Gt),n=y(Xt),[a,i]=s.useState({}),[d,l]=s.useState(!1),m=y(ae),[x,h]=s.useState(!1);let r=y(H);const{request:p}=Q();s.useEffect(()=>{r&&u(jt(r))},[r]);const _=()=>{const{id:S}=a;p(`${I}Teachers/teachers/salary/delete/${S}/`,"DELETE",JSON.stringify({id:S}),q()).then(C=>{u(gt({id:S})),u(V({status:!0,msg:C.msg,type:"success"})),h(!1)}).catch(C=>{console.log(C)})},g=S=>Number(S).toLocaleString(),b=n?.reduce((S,C)=>S+parseFloat(C.salary||0),0),D=c?.reduce((S,C)=>S+parseFloat(C.salary||0),0),N=S=>{u(_t({id:a.id,payment_types:S})),l(!1)};return e.jsxs(G,{reducers:sa,children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",g(t?b:D)]})}),t?e.jsx(ta,{setChangingData:i,setChangePayment:l,deletedTeacher:n}):e.jsx(Ht,{setChangingData:i,changePayment:d,setChangePayment:l,deleted:t,teacherSalary:c,changingData:a,activeDelete:x,setActiveDelete:h}),e.jsx(re,{setActive:h,active:x,onClick:_,title:`Rostanham ${a.name} ni o'chirmoqchimisiz `,type:"danger"}),e.jsx(Z,{active:d,setActive:l,children:e.jsx("div",{className:P.changeType,children:e.jsx(k,{options:m,onChangeOption:N,title:"Select payment type"})})})]})},na="_accounting_1h39q_1",ra="_accounting__wrapper_1h39q_4",ca="_wrapper__filter_1h39q_9",la="_wrapper__middle_1h39q_13",ia="_typeExpenses_1h39q_33",da="_paymentType_1h39q_50",oa="_paymentType__select_1h39q_57",ha="_active_1h39q_57",ua="_select_1h39q_61",pa="_tableHeader_1h39q_65",xa="_table_1h39q_65",ma="_otchot__main_1h39q_79",ja="_otchot_1h39q_79",T={accounting:na,accounting__wrapper:ra,wrapper__filter:ca,wrapper__middle:la,typeExpenses:ia,paymentType:da,paymentType__select:oa,active:ha,select:ua,tableHeader:pa,table:xa,otchot__main:ma,otchot:ja},ya=({formatSalary:t})=>{const{request:o}=Q(),u=M(),c=y(H),n=y(as),[a,i]=s.useState(null),[d,l]=s.useState(null),[m,x]=s.useState([]);return s.useEffect(()=>{c&&u(St(c))},[c]),s.useEffect(()=>{d&&a&&c&&o(`${I}Encashment/employer_salary/?branch=${c}`,"POST",JSON.stringify({year:d,month:a}),q()).then(h=>{x(h)}).catch(h=>{u(V({status:"error",type:!0,msg:"Serverda hatolik"}))})},[c,d,a]),e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:T.paymentType,style:{justifyContent:"normal"},children:[e.jsx(k,{defaultValue:n&&n?.dates?.map(h=>h.year)[0],extraClass:T.select,options:n?.dates?.map(h=>h.year),onChangeOption:l}),d?e.jsx(k,{defaultValue:n&&n?.dates?.filter(h=>h.year===+d)[0].months[0],extraClass:T.select,options:n?.dates?.filter(h=>h.year===+d)[0].months,onChangeOption:i}):null]}),e.jsx(js,{formatSalary:t,employerSalary:m})]})})},ga=({formatSalary:t})=>{const{request:o}=Q(),u=M(),{register:c,handleSubmit:n}=ie(),a=y(es),i=y(ts),d=y(H),[l,m]=s.useState(null),[x,h]=s.useState(null),[r,p]=s.useState(null);return s.useEffect(()=>{d&&u(vt(d))},[d]),s.useEffect(()=>{d&&x&&l&&o(`${I}Encashment/student_payments/?branch=${d}`,"POST",JSON.stringify({year:x,month:l}),q()).then(_=>{p(_)}).catch(_=>{u(V({status:"error",type:!0,msg:"Serverda hatolik"}))})},[x,l,d]),e.jsxs("div",{children:[e.jsxs("div",{className:T.paymentType,children:[e.jsx("div",{className:he(T.paymentType__select,{[T.active]:i}),style:{display:"flex",gap:"2rem"},children:i?e.jsx(Je,{}):e.jsxs(e.Fragment,{children:[e.jsx(k,{defaultValue:a&&a?.dates?.map(_=>_?.year)[0],register:c,extraClass:T.select,name:"year",options:a?.dates?.map(_=>_?.year),onChangeOption:h}),x?e.jsx(k,{defaultValue:a&&a?.dates?.filter(_=>_.year===+x)[0]?.months[0],register:c,name:"month",extraClass:T.select,options:a?.dates?.filter(_=>_.year===+x)[0]?.months,onChangeOption:m}):null]})}),e.jsxs("div",{className:T.otchot__main,children:[e.jsxs("div",{className:T.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",t(r?r?.total_debt:a?.total_debt)]}),e.jsxs("div",{className:T.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",t(r?r?.reaming_debt:a?.reaming_debt)]}),e.jsxs("div",{className:T.otchot,children:["Chegirma 1-yillik ",e.jsx("br",{})," ",t(r?r?.total_dis:a?.total_dis)]}),e.jsxs("div",{className:T.otchot,children:["Chegirma 1-martalik ",e.jsx("br",{})," ",t(r?r?.total_discount:a?.total_discount)]}),e.jsxs("div",{className:T.otchot,children:["Umumiy to'lov ",e.jsx("br",{})," ",t(r?r?.total_sum:a?.total_sum)]})]})]}),e.jsx(ys,{format:t,extraClass:T.tableHeader,extraClassTable:T.table,classes:r||a})]})},_a=({formatSalary:t})=>{const{register:o,handleSubmit:u}=ie(),c=M(),{request:n}=Q(),a=y(H),i=y(ss),[d,l]=s.useState([]),[m,x]=s.useState(null),[h,r]=s.useState(null);return s.useEffect(()=>{a&&c(ft(a))},[a]),s.useEffect(()=>{m&&h&&a&&n(`${I}Encashment/teacher_salary/?branch=${a}`,"POST",JSON.stringify({year:h,month:m}),q()).then(p=>{l(p)}).catch(p=>{c(V({status:"error",type:!0,msg:"Serverda hatolik"}))})},[m,h,a]),e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:T.paymentType,style:{justifyContent:"normal"},children:[e.jsx(k,{defaultValue:i&&i?.dates?.map(p=>p?.year)[0],extraClass:T.select,options:i?.dates?.map(p=>p?.year),onChangeOption:r,register:o,name:"year"}),h?e.jsx(k,{defaultValue:i&&i.dates.filter(p=>p.year===+h)[0]?.months[0],extraClass:T.select,options:i.dates.filter(p=>p.year===+h)[0]?.months,onChangeOption:x,name:"month",register:o}):null]}),e.jsx(ms,{formatSalary:t,teacherSalary:d})]})})};function ke(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}const Sa=()=>{const{request:t}=Q(),o=M(),u=y(H),c=y(Pe),[n,a]=s.useState("students"),[i,d]=s.useState(null),[l,m]=s.useState(null),x=()=>{if(!(!n&&!c?.summary))return e.jsx(va,{resultData:c?.payment_results,data:c?.summary?.[n],activeType:n})};s.useEffect(()=>{if(u&&l&&i){const r={year:i,month:l};t(`${I}Encashment/encashment_school/`,"POST",JSON.stringify({branch:u,...r}),q()).then(p=>{o(bt(p)),console.log(p)})}},[u,i,l]);const h=r=>{d(r),m(null)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(k,{options:c?.dates?.map(r=>({name:r?.year,id:r?.year})),onChangeOption:h,defaultValue:c&&c?.dates?.map(r=>({name:r?.year,id:r?.year}))[0]?.id}),i&&e.jsx(k,{options:c?.dates?.filter(r=>r.year===+i)[0]?.months,onChangeOption:m,defaultValue:c&&c?.dates?.filter(r=>r.year===+i)[0]?.months[0]})]}),e.jsx("div",{className:O.header,children:c?.payment_results&&Object.keys(c?.payment_results[0]).map(r=>r==="payment_total"||r==="payment_type"?null:e.jsx("div",{className:he(O.header__item,{[O.active]:r===n}),onClick:()=>a(r),children:r==="user"?"Worker":ke(r)},r))}),x()]})},va=({data:t,resultData:o,activeType:u})=>{const[c,n]=s.useState(null);return s.useEffect(()=>{t&&(Array.isArray(t)?n("array"):n("object"))},[t]),s.useCallback(a=>{if(!(!a.length>0))return a.map((i,d)=>{const l=Object.keys(i);return e.jsxs("div",{className:O.paymentTypes__item,children:[e.jsx("h3",{children:i[l[0]]}),e.jsx("p",{children:i[l[1].toLowerCase()]})]},d)})},[]),s.useCallback(()=>{if(!(!t&&!c))return Object.entries(t).map((a,i)=>{if(Array.isArray(a[1]))return a[1].map((d,l)=>{const m=Object.keys(d);return e.jsxs("div",{className:O.paymentTypes__item,children:[e.jsx("h3",{children:d[m[0]]}),e.jsx("p",{children:d[m[1].toLowerCase()]})]},l)})})},[t,c]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:O.paymentTypes,children:[e.jsx("div",{className:O.paymentTypes__header,children:o?.map((a,i)=>e.jsxs("div",{className:O.paymentTypes__item,children:[e.jsx("h3",{children:a?.payment_type}),e.jsx("p",{children:a?.payment_total})]},i))}),o&&[...o].map((a,i)=>e.jsxs("div",{className:O.paymentTypes__container,children:[e.jsx("div",{className:O.paymentTypes__item,children:e.jsx("h3",{children:a?.payment_type})},i),e.jsx("div",{className:O.list__container,children:Object.keys(a?.[u])?.map(d=>(console.log(d),e.jsxs("div",{className:O.otchot,children:[ke(d.replaceAll("_"," ")),e.jsx("br",{}),e.jsx("span",{className:O.otchot__inner,children:a?.[u]?.[d]})]})))})]}))]})})},fa=()=>{const t=M(),o=y(H);y(Pe),s.useEffect(()=>{o&&t(Ct({branchId:o}))},[o]);const[u,c]=s.useState(null),[n,a]=s.useState(null);return e.jsx(e.Fragment,{children:e.jsx(Sa,{})})},ba={otchotAccountingSlice:Dt,accountingSlice:be},Ca=()=>{const t=l=>Number(l).toLocaleString(),o=y(qt),[u,c]=s.useState(!1),n=M(),a=y(H),i=ne(),d=s.useCallback(l=>{n(Tt({value:l})),i(`${l}`,{relative:"path"})},[i]);return e.jsx(G,{reducers:ba,children:e.jsxs("div",{className:T.accounting,children:[e.jsxs("div",{className:T.accounting__wrapper,children:[e.jsx("div",{className:T.wrapper__filter,children:e.jsx(k,{defaultValue:o&&o[0]?.value,options:o,onChangeOption:d})}),e.jsx("div",{className:T.wrapper__middle,children:e.jsxs("div",{className:T.typeExpenses,children:[e.jsx(ce,{to:`../inkasatsiya/${a}`,children:e.jsx(E,{children:"Inkasatsiya"})}),e.jsx(ce,{to:"../accounting",children:e.jsx(E,{type:"filter",children:"buxgalteriya"})})]})})]}),e.jsxs(Se,{children:[e.jsx(U,{path:"all",element:e.jsx(fa,{})}),e.jsx(U,{path:"payment",element:e.jsx(ga,{formatSalary:t})}),e.jsx(U,{path:"teacherSalary",element:e.jsx(_a,{formatSalary:t})}),e.jsx(U,{path:"employerSalary",element:e.jsx(ya,{formatSalary:t})})]})]})})};export{Ca as AccountingOtchotPage,za as AccountingPageMain,za as AccountingPageMainIndex,ea as EmployerSalaryPage,aa as TeacherSalaryPage};
