import{aa as B,h as m,A as x,i as S,ab as E,a as _,j as a,T as D,d as v,r as s,n as k,u as T,Q as A,D as L,z as N,F as $,I as w}from"./index-BsgSvAdU.js";import{L as I}from"./link-yggyzpxr.js";const i=B("employerSalarySlice/fetchEmployerSalaryThunk",async n=>{const{request:e}=m();return await e(`${x}Users/user-salary/${n}/`,"GET",null,S())}),F={salaryData:[],loading:!1,erroor:null},j=E({name:"teacherSalarySlice",initialState:F,reducers:{onEditSalary:(n,e)=>{n.salaryData=n.salaryData.map(t=>t.id===e.payload.id?e.payload.data:t)}},extraReducers:n=>{n.addCase(i.pending,e=>{e.loading=!0}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.salaryData=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message})}}),{onEditSalary:R}=j.actions,{reducer:U}=j,z=n=>n.employerSalarySlice?.salaryData,M=n=>n.employerSalarySlice?.loading,q="_theadBody_ztda7_1",H={theadBody:q},O=({currentTableData:n,setActiveEdit:e,setActive:t})=>{const c=_(M),d=()=>n?.map((r,o)=>a.jsx("tr",{children:c?a.jsx(v,{}):a.jsxs(a.Fragment,{children:[a.jsx("td",{children:o+1}),a.jsx(I,{to:`giveSalaryPage/${r.id}/${r.permission}`,children:a.jsx("td",{children:r.total_salary})}),a.jsx("td",{children:r.taken_salary}),a.jsx("td",{children:r.remaining_salary}),a.jsx("td",{children:r.date}),a.jsx("td",{children:a.jsx("i",{onClick:()=>{t(!0),e(r)},className:"fa fa-pen"})})]})},o+1));return a.jsxs(D,{children:[a.jsx("thead",{className:H.theadBody,children:a.jsxs("tr",{children:[a.jsx("th",{children:"â„–"}),a.jsx("th",{children:"Umumiy oylik"}),a.jsx("th",{children:"Olingan oylik"}),a.jsx("th",{children:"Qolgan oylik"}),a.jsx("th",{children:"Sana"}),a.jsx("th",{})]})}),a.jsx("tbody",{children:d()})]})},Q="_mainContainer_b5ajw_1",G="_mainContainer_buttonPanelBox_b5ajw_8",J="_mainContainer_buttonPanelBox_leftCreateButton_b5ajw_15",V="_mainContainer_tablePanelBox_b5ajw_50",K="_changeSalary_b5ajw_65",l={mainContainer:Q,mainContainer_buttonPanelBox:G,mainContainer_buttonPanelBox_leftCreateButton:J,mainContainer_tablePanelBox:V,changeSalary:K},W={employerSalarySlice:U},aa=()=>{const[n,e]=s.useState(!1),[t,c]=s.useState(!1),{setValue:d,register:r,handleSubmit:o}=k();let p=s.useMemo(()=>20,[]);const[g,X]=s.useState(1),y=T(),C=_(z),{id:u}=A(),{request:f}=m();s.useEffect(()=>{d("total_salary",t.total_salary)},[n,t]),s.useEffect(()=>{u&&y(i(u))},[y,u]);const b=P=>{f(`${x}Users/salaries/update1/${t.id}`,"PATCH",JSON.stringify(P),S()).then(h=>{e(!1),y(R({id:t.id,data:h}))}).catch(h=>{console.log(h)})};return a.jsx(L,{reducers:W,children:a.jsxs("div",{className:l.mainContainer,children:[a.jsx("div",{className:l.mainContainer_buttonPanelBox,children:a.jsx("div",{className:l.mainContainer_buttonPanelBox_leftCreateButton})}),a.jsx("div",{className:l.mainContainer_tablePanelBox,children:a.jsx(O,{setActive:e,setActiveEdit:c,currentTableData:C,currentPage:g,PageSize:p})}),a.jsxs(N,{setActive:e,active:n,children:[a.jsx("h2",{children:"Change Salary"}),a.jsx($,{extraClassname:l.changeSalary,onSubmit:o(b),children:a.jsx(w,{placeholder:"Summa",type:"number",register:r,name:"total_salary"})})]})]})})};export{aa as EmployerSalaryPage};
