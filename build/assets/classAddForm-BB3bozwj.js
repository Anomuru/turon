import{r as n,a2 as B,u as R,a as u,aI as U,j as e,B as m,h as S,w as O,M as y,aJ as E,S as $,I as g,C as z,aK as q,aL as H,aM as J,aN as K,aO as Q,aP as W,aQ as X,aR as Y,aS as Z,aT as ee,s as se,a4 as te,aU as de,i as ne,A as ae,k as le,o as G}from"./index-B1KXs2zi.js";const ce="_studentsList_tlmf1_1",re="_studentsList__icon_tlmf1_7",ie="_btns_tlmf1_10",oe="_btns__inner_tlmf1_16",_e="_studentsList__container_tlmf1_21",ue="_studentsList__input_tlmf1_50",he="_studentsList__delete_tlmf1_54",xe="_studentsList__status_tlmf1_65",me="_red_tlmf1_72",je="_yellow_tlmf1_76",fe="_deleteForm_tlmf1_81",be="_deleteForm__form_tlmf1_87",pe="_deleteForm__select_tlmf1_96",Se="_deleteForm__btn_tlmf1_100",ge="_addModal_tlmf1_104",Me="_addModal__container_tlmf1_113",Ce="_check_tlmf1_141",ve="_check__input_tlmf1_146",Le="_addModal__btn_tlmf1_171",d={studentsList:ce,studentsList__icon:re,btns:ie,btns__inner:oe,studentsList__container:_e,studentsList__input:ue,studentsList__delete:he,studentsList__status:xe,red:me,yellow:je,deleteForm:fe,deleteForm__form:be,deleteForm__select:pe,deleteForm__btn:Se,addModal:ge,addModal__container:Me,check:Ce,check__input:ve,addModal__btn:Le},Oe=n.memo(()=>{const{register:M,handleSubmit:C}=B(),A=R(),l=u(U),[j,r]=n.useState(!1),[v,h]=n.useState(""),[f,L]=n.useState(null),[N,_]=n.useState([]),[F,b]=n.useState([]),k=s=>{},I=()=>{A(J({id:f?.id}))},p=s=>{},D=()=>l?.students?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:s?.user?.profile_img?H+s?.user?.profile_img:q,alt:""})}),e.jsxs("td",{children:[s?.user?.name," ",s?.user?.surname]}),e.jsx("td",{children:s?.user?.phone}),e.jsx("td",{children:s?.parents_number}),e.jsx("td",{children:e.jsx("div",{className:S(d.studentsList__status,{[d.red]:Number(s.money)<0,[d.yellow]:Number(s.money)>0&&Number(s.money)<1e5}),children:s.money})}),j?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx(g,{extraClassName:d.studentsList__input,type:"checkbox",onChange:()=>b(c=>c.filter(i=>i===s.id)[0]?c.filter(i=>i!==s.id):[...c,s.id])})}),e.jsx("td",{children:e.jsx("i",{className:S("fas fa-trash",d.studentsList__delete),onClick:()=>L(s)})})]}):null]})),x=()=>l?.students?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:q,alt:""})}),e.jsx("td",{children:s?.user?.name}),e.jsx("td",{children:s?.user?.surname}),e.jsx("td",{children:s?.user?.phone}),e.jsx("td",{children:e.jsx("div",{className:d.check,children:e.jsx(g,{extraClassName:d.check__input,type:"checkbox",onChange:()=>_(c=>c.filter(i=>i===s.id)[0]?c.filter(i=>i!==s.id):[...c,s.id])})})})]})),P=D(),T=x();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.studentsList,children:[e.jsxs("div",{className:d.btns,children:[e.jsx("h1",{children:"O’quvchilar ro’yxati"}),e.jsxs("div",{className:d.btns__inner,children:[e.jsx(m,{disabled:F.length===0,type:F.length===0?"disabled":"",onClick:()=>h("change"),children:"Move"}),e.jsx(m,{onClick:()=>h("add"),children:"Add"}),e.jsx("i",{className:S("fas fa-edit",d.studentsList__icon),onClick:()=>r(!j)})]})]}),e.jsx("div",{className:d.studentsList__container,children:e.jsxs(O,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism Familya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Tel Ota-ona"}),e.jsx("th",{children:"Balans"}),j?e.jsxs(e.Fragment,{children:[e.jsx("th",{children:"check"}),e.jsx("th",{children:"del"})]}):null]})}),e.jsx("tbody",{children:P})]})})]}),e.jsxs(y,{extraClass:d.deleteForm,active:v==="change",setActive:h,children:[e.jsx("h1",{children:"Boshqa sinfga qo’shish"}),e.jsxs(E,{extraClassname:d.deleteForm__form,onSubmit:C(k),typeSubmit:"",children:[e.jsx($,{extraClass:d.deleteForm__select,title:"Color",register:M,name:"color"}),e.jsx($,{extraClass:d.deleteForm__select,title:"Class",register:M,name:"class"}),e.jsx(m,{extraClass:d.deleteForm__btn,children:"Add"})]})]}),e.jsxs(y,{active:v==="add",setActive:h,extraClass:d.addModal,children:[e.jsx(g,{placeholder:"Search"}),e.jsx("div",{className:d.addModal__container,children:e.jsxs(O,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:T})]})}),e.jsx(m,{extraClass:d.addModal__btn,onClick:p,children:"Add"})]}),e.jsx(z,{setActive:L,active:f,onClick:I,title:`Rostanham ${f.user} ni o'chirmoqchimisiz `,type:"danger"})]})}),Fe="_addModal_xl27x_1",ke="_addModal__container_xl27x_19",ye="_addModal__subject_xl27x_39",Ae="_check_xl27x_47",Ne="_check__input_xl27x_52",Ie="_status_xl27x_55",De="_active_xl27x_64",Pe="_status__inner_xl27x_67",Te="_addModal__btn_xl27x_77",a={addModal:Fe,addModal__container:ke,addModal__subject:ye,check:Ae,check__input:Ne,status:Ie,active:De,status__inner:Pe,addModal__btn:Te},$e=n.memo(M=>{const{setActive:C,active:A,branch:l}=M,{request:j}=ne(),r=R(),{register:v,handleSubmit:h}=B(),f=u(K),L=u(Q),N=u(W),_=u(U);u(X),u(Y);const[F,b]=n.useState(!1),[k,I]=n.useState(null),[p,D]=n.useState([]),[x,P]=n.useState(""),T=t=>{r(de({id:t?.class})),b(!0)},s=()=>{const t={students:p,update_method:"add_students",group_type:"school"};j(`${ae}Group/groups/profile/${_?.id}/`,"PATCH",JSON.stringify(t),le()).then(o=>{r(G({type:"success",status:!0,msg:"O'quvchilar sinfga qo'shildi"})),b(!1),C(!1)}).catch(o=>{r(G({type:"error",status:!0,msg:"xatolik yuz berdi (outside classAdd)"}))})};n.useEffect(()=>{l&&r(Z(l))},[l]),n.useEffect(()=>{_&&l&&(r(ee({userBranchId:l,group_id:_?.id,res:{ignore_students:_?.students.map(t=>t.id)}})),r(se({userBranchId:l})))},[_,l]);const c=n.useMemo(()=>N?.slice()?.filter(o=>o?.user?.name?.toLowerCase().includes(x?.toLowerCase())||o?.user?.surname?.toLowerCase().includes(x?.toLowerCase())),[N,x]),V=c?.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:q,alt:""})}),e.jsx("td",{children:t?.user?.name}),e.jsx("td",{children:t?.user?.surname}),e.jsx("td",{children:t?.subject.length?e.jsx("div",{className:a.addModal__subject,children:t?.subject[0]?.name}):null}),e.jsx("td",{children:e.jsxs("div",{className:a.check,children:[e.jsx(g,{extraClassName:a.check__input,type:"checkbox",onChange:()=>D(o=>o.filter(w=>w===t.id)[0]?o.filter(w=>w!==t.id):[...o,t.id])}),e.jsx("div",{className:S(a.status,{[a.active]:t?.extra_info?.status}),children:e.jsx("div",{className:S(a.status__inner,{[a.active]:t?.extra_info?.status})})})]})})]}));return e.jsxs(e.Fragment,{children:[e.jsx(y,{setActive:t=>C(t),active:A,children:e.jsxs(E,{typeSubmit:"",extraClassname:a.addModal,onSubmit:h(T),children:[e.jsx("h2",{children:"Add Class"}),e.jsx($,{onChangeOption:I,options:f,title:"Classes",register:v,name:"class"}),e.jsx(m,{disabled:!k,type:k?"":"disabled",children:"Tekshirmoq"})]})}),e.jsxs(y,{active:F,setActive:b,extraClass:a.addModal,children:[e.jsx(g,{placeholder:"Search",onChange:t=>P(t.target.value),defaultValue:x}),L?e.jsx(te,{}):e.jsx("div",{className:a.addModal__container,children:e.jsxs(O,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Fanlar"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:V})]})}),e.jsx(m,{extraClass:a.addModal__btn,onClick:s,type:p.length===0?"disabled":"",disabled:p.length===0?"disabled":"",children:"Add"})]})]})});export{$e as C,Oe as a};
