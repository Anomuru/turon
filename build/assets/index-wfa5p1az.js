import{r as c,a as p,u as C,j as e,w as v,D as w,C as N,bg as P,i as A,A as F,k as M,o as T,c1 as L,g as $,aY as R,b as U,c2 as Y,B as q,P as z,c3 as B}from"./index-B1KXs2zi.js";import{g as I}from"./searchSelector-CJfw-E7m.js";import{M as O}from"./MultiPage-OkwmnpSM.js";import{E as de}from"./employerCategoryPage-D-tZGHLW.js";const W="_employer_1iw62_1",H="_thead_1iw62_7",V="_checkbox__minus_1iw62_11",G="_checkbox__checked_1iw62_26",m={employer:W,thead:H,checkbox__minus:V,checkbox__checked:G,delete:"_delete_1iw62_38"},J=s=>s.employers.employersData,K=s=>s.employers.deletedEmployers,Q=s=>s.employers.loading,X=s=>s.employers.employerDataWithFilter,Z=({currentTableData:s,loading:y})=>{const[n,u]=c.useState([]),d=p(Q),l=p(X),[r,a]=c.useState(!1),[o,_]=c.useState(),i=()=>d?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",children:"Yuklanmoqda..."})}):(l&&l.length>0?l:s)?.map((t,D)=>{if(typeof t=="object"&&!Array.isArray(t))return e.jsxs("tr",{children:[e.jsx("td",{children:D+1}),e.jsx(P,{to:`employerProfile/${t?.id}`,children:e.jsxs("td",{children:[t?.name," ",t?.surname]})}),e.jsx("td",{children:t?.phone}),e.jsx("td",{children:t?.age}),e.jsx("td",{children:t?.job}),e.jsx("td",{children:t.status?e.jsx("div",{onClick:()=>u(f=>n.includes(t?.id)?[...f.filter(S=>S!==t?.id)]:[...f,t?.id]),className:n.includes(t?.id)?m.checkbox__checked:m.checkbox__minus,children:n.includes(t?.id)?e.jsx("i",{className:"fa fa-check"}):e.jsx("i",{className:"fa fa-minus"})}):null}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{_(t),a(!0)},className:m.delete,children:e.jsx("i",{className:"fa fa-trash"})})})]})}),{request:k}=A(),j=C(),g=()=>{k(`${F}Users/employers/delete/${o.id}`,"DELETE",null,M()).then(x=>{j(T({type:"success",status:!0,msg:x.msg})),j(L(o.id)),a(!1)})};console.log(o);const h=i();return e.jsx("div",{className:m.employer,children:e.jsxs("div",{className:m.table,children:[e.jsxs(v,{children:[e.jsx("thead",{className:m.thead,children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Yosh"}),e.jsx("th",{children:"Ish"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),d?e.jsx(w,{}):e.jsx("tbody",{children:h})]}),e.jsx(N,{type:"danger",title:"O'chirmoq",text:`${o?.name} o'chirishni hohlaysizmi`,active:r,setActive:a,onClick:g})]})})},b={},ee=()=>{const s=p(K),[y,n]=c.useState([]),[u,d]=c.useState([]),l=()=>s?.map((r,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsxs("td",{children:[r.name," ",r.surname]}),e.jsx("td",{children:r.phone}),e.jsx("td",{children:r.age}),e.jsx("td",{children:r.work}),e.jsx("td",{children:r.deleteData})]}));return e.jsx("div",{className:b.employer,children:e.jsx("div",{className:b.table,children:e.jsxs(v,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Yosh"}),e.jsx("th",{children:"Fan"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:l()})]})})})},se="_employer_nlpwb_1",te="_employer__header_nlpwb_7",E={employer:se,employer__header:te},ae=()=>{const s=p($),y=C(),n=p(J),[u,d]=c.useState(!1),l=c.useMemo(()=>30,[]),[r,a]=c.useState(1),[o,_]=c.useState(!1),i=p(I),{"*":k}=R();U(),c.useEffect(()=>{s?.id&&y(Y({branch:s?.id}))},[s?.id]);const j=c.useMemo(()=>{const h=n?.filter(x=>!x.deleted)||[];return a(1),i?h.filter(x=>x.user?.name?.toLowerCase().includes(i.toLowerCase())):h},[n,i]),g=[{name:"Ishchilar",type:"worker"}];return e.jsx(O,{types:g,page:"worker",children:e.jsxs("div",{className:E.employer,children:[e.jsx("div",{className:E.employer__header,children:e.jsx(q,{onClick:()=>d(!u),status:"filter",type:"filter",children:"Filter"})}),o?e.jsx(ee,{}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{currentTableData:j.slice((r-1)*l,r*l)}),e.jsx(z,{setCurrentTableData:()=>{},search:i,users:j,setCurrentPage:a,currentPage:r,pageSize:l,onPageChange:h=>{a(h)}})]}),e.jsx(B,{activeSwitch:o,setActiveSwitch:_,active:u,setActive:d})]})})};export{de as EmployerCategoryPage,ae as EmployerPage};
