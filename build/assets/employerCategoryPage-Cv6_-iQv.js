import{aa as V,h as $,A as v,aA as te,i as _,R as le,u as L,a as b,a3 as oe,b4 as re,g as R,r as d,b5 as ne,a7 as ce,aB as ie,j as a,z as w,a8 as p,S as B,I as S,a9 as de,B as E,aC as ue,aD as ge,ab as H,F as U,n as z,o as J,b6 as ye,b7 as me,b8 as he,b9 as pe}from"./index-9ggpSpOh.js";const I=V("employersSlice/fetchEmployersData",async({branch:s,job:e,age:t,language:n,deleted:c})=>{const{request:r}=$();return r(`${v}Users/employeers/?${te({branch:s,job:e,age:t,language:n,deleted:c})}`,"GET",null,_())}),Ne=le.memo(({active:s,setActive:e})=>{const t=L(),n=b(oe),c=b(re),r=b(R),[f,h]=d.useState(""),[j,i]=d.useState(""),[C,m]=d.useState(""),[o,u]=d.useState("all"),[x,g]=d.useState("all"),[D,M]=d.useState(!1),[O,P]=d.useState(!1),G=c?.map(l=>({id:l.group.id,name:l.group.name}))||[];function F(l,y,T,N){t(I({job:l,branch:r,language:y,age:T,deleted:N?"True":"False"}))}d.useEffect(()=>{t(ne()),t(ce())},[t]),d.useEffect(()=>{const l=ie().employeesFilter;if(r)if(!O&&l){const{selectedAge:y,selectedJob:T,selectedLanguage:N,switchOn:k}=l,[ae,se]=y?.split("-")||["",""];m(y||""),h(ae),i(se),u(T||"all"),g(N||"all"),M(k??!1),F(T,N,y,k),P(!0)}else O||(F(o,x,C,D),P(!0))},[O,r]);const Q=l=>{u(l)},W=l=>{g(l)},K=l=>{const y=l.target.value;h(y),m(`${y}-${j}`)},X=l=>{const y=l.target.value;i(y),m(`${f}-${y}`)},Z=()=>{F(o,x,C,D),ge("employeesFilter",{selectedAge:C,selectedJob:o,selectedLanguage:x,switchOn:D})},ee=()=>{u("all"),g("all"),m(""),h(""),i(""),M(!1),F("all","all","",!1),ue("employeesFilter")};return a.jsx(w,{active:s,setActive:e,children:a.jsxs("div",{className:p.filter,children:[a.jsx("h1",{children:"Filter"}),a.jsxs("div",{className:p.filter__container,children:[a.jsx(B,{title:"Ish",options:[{name:"Hamma",id:"all"},...G],extraClass:p.filter__select,onChangeOption:Q,defaultValue:o}),a.jsxs("div",{className:p.filter__age,children:[a.jsx(S,{type:"number",extraClassName:p.filter__input,placeholder:"Yosh (От)",onChange:l=>h(l.target.value),defaultValue:f,value:f,onBlur:K}),a.jsx(S,{type:"number",extraClassName:p.filter__input,placeholder:"Yosh (До)",onChange:l=>i(l.target.value),defaultValue:j,value:j,onBlur:X})]}),a.jsx(B,{title:"Til",options:[{name:"Hamma",id:"all"},...n],extraClass:p.filter__select,onChangeOption:W,defaultValue:x}),a.jsxs("div",{className:p.filter__switch,children:[a.jsx("p",{children:"O’chirilgan"}),a.jsx(de,{activeSwitch:D,onChangeSwitch:()=>M(l=>!l)})]}),a.jsxs("div",{className:p.filter__switch,children:[a.jsx(E,{onClick:ee,type:"danger",children:"Tozalash"}),a.jsx(E,{onClick:Z,children:"Filter"})]})]})]})})}),q=V("filterEmployees/fetchFilteredEmployees",async s=>{const{request:e}=$();return await e(`${v}`,"POST",JSON.stringify(s),_())}),fe={employees:null,ageTo:null,ageFrom:null,jobId:null,languageId:null,isDelete:!1,loading:!1,error:null},xe=H({name:"filterEmployees",initialState:fe,reducers:{fetchAgeTo:(s,e)=>{s.ageTo=e.payload},fetchAgeFrom:(s,e)=>{s.ageFrom=e.payload},fetchAgeJobId:(s,e)=>{s.jobId=e.payload},fetchLanguageId:(s,e)=>{s.languageId=e.payload},fetchIsDelete:(s,e)=>{s.isDelete=e.payload}},extraReducers:s=>s.addCase(q.pending,e=>{e.loading=!0,e.error=null}).addCase(q.fulfilled,(e,t)=>{e.employees=t.payload,e.loading=!1,e.error=null}).addCase(q.rejected,(e,t)=>{e.loading=!1,e.error=t.payload??null})}),{fetchAgeTo:Ie,fetchAgeFrom:$e,fetchAgeJobId:Me,fetchLanguageId:Oe,fetchIsDelete:qe}=xe.actions,je={employersData:[],DeletedEmployers:[],employerDataWithFilter:[],loading:!1,error:null},Y=H({name:"employersSlice",initialState:je,reducers:{onDeleteEmployer:(s,e)=>{s.employersData=s.employersData.filter(t=>t.id!==e.payload)}},extraReducers:s=>{s.addCase(I.pending,e=>{e.loading=!0}).addCase(I.fulfilled,(e,t)=>{e.loading=!1,e.employersData=t.payload}).addCase(I.rejected,e=>{e.loading=!1,e.error="error"})}}),{onDeleteEmployer:Le}=Y.actions,{reducer:we}=Y,Ce="_categoryPlus_1a6se_1",Se="_categoryModal_1a6se_17",be="_box_Main_1a6se_21",ve="_box_1a6se_21",A={categoryPlus:Ce,categoryModal:Se,box_Main:be,box:ve},_e=({activeCategory:s,setActiveCategory:e})=>a.jsx("div",{className:A.categoryPlus,onClick:()=>e(!s),children:a.jsx("i",{className:"fa fa-plus"})}),Ee=({register:s,handleSubmit:e,onClick:t,activeCategory:n,setActiveCategory:c})=>a.jsx("div",{children:a.jsx(w,{active:n,setActive:c,children:a.jsxs("div",{className:A.categoryModal,children:[a.jsx("h2",{children:"Ma’lumot qo’shish"}),a.jsxs(U,{typeSubmit:"",onSubmit:e(t),children:[a.jsx(S,{register:s,name:"name",required:!0}),a.jsx(S,{register:s,name:"salary",type:"number",required:!0}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(E,{type:"simple",children:"Qo'shish"})})]})]})})}),Ae=({register:s,handleSubmit:e,onClick:t,activeCategory:n,setActiveCategory:c,deleteBtn:r})=>a.jsx("div",{children:a.jsx(w,{active:n,setActive:c,children:a.jsxs("div",{className:A.categoryModal,children:[a.jsx("h2",{children:"Ma’lumot qo’shish"}),a.jsxs(U,{typeSubmit:"",children:[a.jsx(S,{register:s,name:"name",required:!0}),a.jsx(S,{register:s,name:"salary",type:"number",required:!0}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs(E,{onClick:e(r),type:"danger",children:["O'chirish ",a.jsx("i",{className:"fa fa-trash"})]}),a.jsx(E,{onClick:e(t),type:"simple",children:"Tastiqlash"})]})]})]})})}),De=({salaryTypes:s,setEdit:e,edit:t})=>{const[n,c]=d.useState(!1),r=L(),{request:f}=$(),{register:h,handleSubmit:j,setValue:i}=z(),C=o=>{const u=t.id,x={id:u,...o};f(`${v}Teachers/salary-types/${u}/`,"PATCH",JSON.stringify(x),_()).then(g=>{r(J({status:!0,type:"success",msg:g.msg})),r(ye(g)),c(!n),i("name",""),i("salary","")}).catch(g=>{console.log(g)})},m=()=>{const o=t.id;f(`${v}Teachers/salary-types/${o}/`,"DELETE",null,_()).then(u=>{r(me({id:o})),r(J({status:!0,type:"success",msg:u.msg})),c(!n),i("name",""),i("salary","")}).catch(u=>{console.log(u)})};return a.jsxs("div",{className:A.box_Main,children:[s?.map(o=>a.jsxs("div",{className:A.box,onClick:()=>{e({id:o.id,name:o.name}),c(!n),i("name",o.name),i("salary",o.salary)},children:[a.jsxs("p",{children:["Nomi : ",o.name]}),a.jsxs("span",{children:["Oyligi : ",o.salary]})]})),a.jsx(Ae,{deleteBtn:m,onClick:C,activeCategory:n,setActiveCategory:c,register:h,handleSubmit:j})]})},Fe=s=>s.employerCategorySlice?.employerCategoryData,Pe=({extraClass:s})=>{const[e,t]=d.useState(!1),{register:n,handleSubmit:c,setValue:r}=z(),f=b(Fe),h=L(),[j,i]=d.useState({}),{request:C}=$(),m=b(R);d.useEffect(()=>{h(he(m))},[]);const o=u=>{const x={...u,branch:m};C(`${v}Teachers/salary-types/?branch=${m}`,"POST",JSON.stringify(x),_()).then(g=>{t(!e),h(pe(g)),r("name",""),r("salary","")}).catch(g=>{console.log(g)})};return a.jsxs("div",{className:s,children:[a.jsx(_e,{activeCategory:e,setActiveCategory:t}),a.jsx(De,{setEdit:i,salaryTypes:f,edit:j}),a.jsx(Ee,{onClick:o,register:n,handleSubmit:c,activeCategory:e,setActiveCategory:t})]})};export{Pe as E,Ne as a,we as e,Le as o};
