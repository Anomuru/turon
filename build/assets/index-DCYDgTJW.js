import{R as H,u as V,a as i,a3 as W,a4 as J,r as t,Q,a5 as U,a6 as G,a7 as K,j as e,z as X,a8 as n,S as k,I as w,B as b,a9 as Z,aa as ee,h as $,A as B,i as Y,ab as te,P as ae,D as se,ac as ce,o as z}from"./index-9ggpSpOh.js";import{P as re}from"./pagination-TgzvL7nQ.js";import{g as le}from"./searchSelector-B3qtoac4.js";import{D as oe}from"./deletedTeachers-DSK9IG7m.js";import{g as R,a as ne,b as ie,c as he,d as ge,T as ue}from"./teachers-D4wmF5IE.js";import{E as de}from"./employerCategoryPage-Cv6_-iQv.js";import{C as me}from"./confirmModal-Dyb-8OvR.js";const fe=H.memo(({active:h,setActive:a,setIsFilter:g,setActiveSwitch:j,activeSwitch:l,currentPage:x,pageSize:I})=>{const T=localStorage.getItem("teacherAgeTo"),N=localStorage.getItem("teacherAgeFrom"),A=localStorage.getItem("teacherLanguage"),m=localStorage.getItem("teacherSubject"),f=V(),P=i(W),E=i(J),[o,S]=t.useState(N),[r,C]=t.useState(T),[d,v]=t.useState(m),[c,D]=t.useState(A),{"*":M}=Q(),_=localStorage.getItem("branchId");localStorage.setItem("teacherAgeTo",r),localStorage.setItem("teacherAgeFrom",o),localStorage.setItem("teacherLanguage",c),localStorage.setItem("teacherSubject",d),localStorage.setItem("teacherStatus",`${l}`),t.useEffect(()=>{f(U({subjId:d,langId:c,untilAge:r,fromAge:o,userBranchId:_,switchItem:l,currentPage:x,pageSize:I})),g(!0)},[d,o,r,c,l,x]);const O=s=>{s!==d&&v(s)},F=s=>{s!==c&&D(s)};return t.useEffect(()=>{f(G()),f(K())},[]),e.jsx(X,{active:h,setActive:a,children:e.jsxs("div",{className:n.filter,children:[e.jsx("h1",{children:"Filter"}),e.jsxs("div",{className:n.filter__container,children:[e.jsx(k,{title:"Fan",options:[{name:"All",id:"all"},...E],extraClass:n.filter__select,defaultValue:m,onChangeOption:s=>O(s)}),e.jsxs("div",{className:n.filter__age,children:[e.jsx(w,{type:"number",extraClassName:n.filter__input,placeholder:"Yosh (От)",onChange:s=>S(s.target.value),value:o,defaultValue:o}),e.jsx(w,{type:"number",extraClassName:n.filter__input,placeholder:"Yosh (До)",onChange:s=>C(s.target.value),value:r,defaultValue:r})]}),e.jsx(b,{onClick:()=>{C(""),S("")},type:"danger",children:"Clear (Yoshlarni tozalash (ot do ) )"}),e.jsx(k,{title:"Til",options:[{name:"Hammasi",id:"all"},...P],extraClass:n.filter__select,defaultValue:A,onChangeOption:s=>F(s)}),e.jsxs("div",{className:n.filter__switch,children:[e.jsx("p",{children:"O’chirilgan"}),e.jsx(Z,{onChangeSwitch:j,activeSwitch:l})]})]})]})})}),L=ee("filterTeacher/fetchTeachersFilter",async h=>{const{request:a}=$();return await a(`${B}`,"POST",JSON.stringify(h),Y())}),Se={filtered:null,loading:!1,error:null};te({name:"filterTeachers",initialState:Se,reducers:{},extraReducers:h=>h.addCase(L.pending,a=>{a.loading=!0,a.error=null}).addCase(L.fulfilled,(a,g)=>{a.filtered=g.payload,a.loading=!1,a.error=null}).addCase(L.rejected,(a,g)=>{a.loading=!1,a.error=g.payload??null})});const _e="_teacher_1sean_1",pe="_teacher__filter_1sean_14",je="_header_btn_1sean_17",xe="_table_1sean_20",Te="_category_1sean_32",Ce="_categoryItem_1sean_36",u={teacher:_e,teacher__filter:pe,header_btn:je,table:xe,category:Te,categoryItem:Ce},ye={},Ne=()=>{const{theme:h}=ae();i(R);const a=i(le);i(ne);const g=i(ie),j=i(he),l=V(),x=localStorage.getItem("teacherStatus");console.log(g);const I=i(ge);let T=t.useMemo(()=>50,[]);const[N,A]=t.useState([]),[m,f]=t.useState(1),[P,E]=t.useState(),[o,S]=t.useState(),[r,C]=t.useState(x==="true"),[d,v]=t.useState({}),[c,D]=t.useState(!1),[M,_]=t.useState(!1),[O,F]=t.useState(!1),{request:s}=$(),q=()=>{const y=d.id;s(`${B}Teachers/teachers/delete/${y}/`,"DELETE",null,Y()).then(p=>{p.status&&l(ce(y)),l(z({type:p.status?"success":"danger",status:!0,msg:p.msg})),_(!1)}).catch(p=>{l(z({type:"danger",status:!0,msg:p.msg}))})};return e.jsxs(se,{reducers:ye,children:[e.jsxs("div",{className:u.teacher,children:[e.jsxs("div",{className:u.teacher__filter,style:{justifyContent:c?"end":"space-between"},children:[c?null:e.jsx(b,{status:"filter",extraClass:u.extraCutClassFilter,onClick:()=>S(!o),type:"filter",children:"Filter"}),e.jsxs("div",{className:u.header_btn,children:[c?null:e.jsx(b,{type:"login",status:"timeTable",children:"time table"}),e.jsx(b,{extraClass:u.category,type:"simple",onClick:()=>D(!c),children:"Toifa"})]})]}),e.jsxs("div",{className:u.table,children:[e.jsx("h2",{children:c?"Toifa ":r===!0?"Deleted Teachers":"Teachers"}),c?e.jsx(de,{extraClass:u.categoryItem}):r===!0?e.jsx(oe,{data:j}):e.jsx(ue,{setActiveDelete:v,setActiveModal:_,theme:h==="app_school_theme",loading:R,data:j})]}),e.jsx(re,{totalCount:I,search:a,currentPage:m,pageSize:T,onPageChange:y=>{f(y)},type:"custom"}),e.jsx(fe,{setIsFilter:F,activeSwitch:r,setActiveSwitch:C,setActive:S,active:o,currentPage:m,pageSize:T})]}),e.jsx(me,{setActive:_,active:M,onClick:q,type:"danger"})]})};export{Ne as TeachersPage};
