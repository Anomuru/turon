import{r as t,u as y,a as m,aq as V,j as e,w as T,bA as G,B as p,R as $,M as R,I as q,S as I,bV as S,bW as K,x as N,bX as W,bY as F,D as J,P as O}from"./index-B1KXs2zi.js";import{V as Q}from"./vacancyPageEdit-CJX2I04g.js";import{g as U}from"./searchSelector-CJfw-E7m.js";const X="_deletedGroups_zgp8m_1",Y="_mainContainer_filterPanelBox_zgp8m_1",Z="_mainContainer_buttonPanelBox_zgp8m_35",ee="_mainContainer_buttonPanelBox_leftCreateButton_zgp8m_42",te="_mainContainer_tablePanelBox_zgp8m_78",ae="_buttonHelper_zgp8m_93",l={deletedGroups:X,mainContainer_filterPanelBox:Y,mainContainer_buttonPanelBox:Z,mainContainer_buttonPanelBox_leftCreateButton:ee,mainContainer_tablePanelBox:te,buttonHelper:ae},ne="_anotherDiv_1wz17_9",se="_theadBody_1wz17_22",oe="_buttonHelper_1wz17_28",ce="_otClick_1wz17_36",f={anotherDiv:ne,theadBody:se,buttonHelper:oe,otClick:ce},re=t.memo(({currentTableData:x,currentPage:C,PageSize:d,editMode:o,onEditClick:u})=>{y(),m(V);const c=()=>x?.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx(G,{to:`vacancyWorkPage/${a.group.id}`,children:e.jsx("td",{className:f.otClick,children:a.group.name})}),e.jsx("td",{children:e.jsx("div",{className:f.anotherDiv,children:a.system_id.name})}),!o&&e.jsx("td",{children:e.jsx(p,{extraClass:f.buttonHelper,children:e.jsx("i",{className:"fas fa-pencil"}),onClick:()=>u(a)})})]},a.id));return e.jsxs(T,{children:[e.jsx("thead",{className:f.theadBody,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Kasblar nomi"}),e.jsx("th",{children:"System turi"}),!o&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c()})]})}),le="_filter_189ur_1",ie="_filter__container_189ur_7",de="_filter__select_189ur_13",ue="_buttonChange_189ur_51",h={filter:le,filter__container:ie,filter__select:de,buttonChange:ue},_e=$.memo(({active:x,setActive:C,systems:d})=>{const[o,u]=t.useState(""),[c,a]=t.useState(""),r=y(),j=()=>{r(S({name:o,system_id:c})).then(_=>{S.fulfilled.match(_)?r(K(_.payload)):console.error("Failed to add vacancy:",_.error)}),r(N()),C(!1)};return e.jsx(R,{active:x,setActive:C,children:e.jsxs("div",{className:h.filter,children:[e.jsx("h1",{children:"Vakansiya qo'shish"}),e.jsxs("div",{className:h.filter__container,children:[e.jsx(q,{extraClassName:h.filter__select,placeholder:"Kasb nomi",value:o,onChange:s=>u(s.target.value)}),e.jsx(I,{extraClass:h.filter__select,value:c,onChangeOption:s=>a(s),options:d}),e.jsx(p,{extraClass:h.buttonChange,onClick:j,children:"Qo'shish"})]})]})})}),Ce=()=>{const[x,C]=t.useState(!1),[d,o]=t.useState(!1),[u,c]=t.useState(!1),a=m(U);let r=t.useMemo(()=>10,[]);const[j,s]=t.useState([]),[_,g]=t.useState(1),[k,b]=t.useState(!1),[z,w]=t.useState(null),D=y(),P=m(V),H=m(W),B=m(F),E=t.useMemo(()=>{const n=P.slice();return g(1),a?n.filter(i=>i?.group?.name?.toLowerCase().includes(a.toLowerCase())||i?.system_id?.name?.toLowerCase().includes(a.toLowerCase())):n},[P,a]);t.useEffect(()=>{D(N())},[]);const A=n=>{w(n),b(!0)},L=n=>{s(i=>i.map(v=>v.id===n.id?n:v)),b(!1)},M=n=>{s(i=>[...i,{id:Date.now(),...n}])};return H?e.jsx(J,{}):e.jsxs("div",{className:l.deletedGroups,children:[e.jsx("div",{className:l.mainContainer_filterPanelBox}),e.jsxs("div",{className:l.mainContainer_buttonPanelBox,children:[e.jsx("div",{}),e.jsxs("div",{className:l.mainContainer_buttonPanelBox_leftCreateButton,children:[e.jsx(p,{extraClass:l.buttonHelper,onClick:()=>c(!0),children:e.jsx("i",{className:"fas fa-plus"})}),e.jsx(p,{extraClass:l.buttonHelper,onClick:()=>o(!d),children:e.jsx("i",{className:"fas fa-pencil"})})]})]}),e.jsx("div",{className:l.mainContainer_tablePanelBox,children:e.jsx(re,{currentTableData:j,editMode:!d,onEditClick:A})}),e.jsx(O,{setCurrentTableData:s,users:E,setCurrentPage:g,currentPage:_,pageSize:r,onPageChange:n=>{g(n)},type:"custom"}),e.jsx(Q,{setModal:b,modal:k,vacancy:z,onSave:L,systems:B}),e.jsx(_e,{setActive:c,active:u,addVacancy:M,systems:B})]})};export{Ce as VacancyPage};
