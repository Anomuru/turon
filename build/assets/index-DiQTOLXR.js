import{R as W,u as $,a as h,a3 as J,a4 as Q,r as a,Q as G,a5 as K,a6 as X,a7 as Z,j as e,z as ee,a8 as d,S as O,I as k,B as I,a9 as te,aa as ae,h as z,A as B,i as H,ab as se,P as re,g as ce,D as le,ac as oe,o as R}from"./index-BsgSvAdU.js";import{P as ne}from"./pagination-BKwMBOPR.js";import{g as ie}from"./searchSelector-B3qtoac4.js";import{D as ue}from"./deletedTeachers-BUGqoVyP.js";import{g as V,a as de,b as he,c as ge,T as me}from"./teachers-DrGBaRUy.js";import{E as fe}from"./employerCategoryPage-vQNgVB8p.js";import{C as Se}from"./confirmModal-UuIEyXZr.js";const _e=W.memo(({active:g,setActive:t,setIsFilter:m,setActiveSwitch:b,activeSwitch:l})=>{const x=localStorage.getItem("teacherAgeTo"),A=localStorage.getItem("teacherAgeFrom"),n=localStorage.getItem("teacherLanguage"),D=localStorage.getItem("teacherSubject"),C=$(),f=h(J),i=h(Q),[p,L]=a.useState(A),[u,T]=a.useState(x),[o,v]=a.useState(D),[j,F]=a.useState(n),{"*":S}=G(),w=localStorage.getItem("branchId");localStorage.setItem("teacherAgeTo",u),localStorage.setItem("teacherAgeFrom",p),localStorage.setItem("teacherLanguage",j),localStorage.setItem("teacherSubject",o),localStorage.setItem("teacherStatus",`${l}`),a.useEffect(()=>{C(K({subjId:o,langId:j,untilAge:u,fromAge:p,userBranchId:w,switchItem:l})),m(!0)},[o,p,u,j,l]);const P=s=>{s!==o&&v(s)},y=s=>{s!==j&&F(s)};return a.useEffect(()=>{C(X()),C(Z())},[]),e.jsx(ee,{active:g,setActive:t,children:e.jsxs("div",{className:d.filter,children:[e.jsx("h1",{children:"Filter"}),e.jsxs("div",{className:d.filter__container,children:[e.jsx(O,{title:"Fan",options:[{name:"All",id:"all"},...i],extraClass:d.filter__select,defaultValue:D,onChangeOption:s=>P(s)}),e.jsxs("div",{className:d.filter__age,children:[e.jsx(k,{type:"number",extraClassName:d.filter__input,placeholder:"Yosh (От)",onChange:s=>L(s.target.value),value:p,defaultValue:p}),e.jsx(k,{type:"number",extraClassName:d.filter__input,placeholder:"Yosh (До)",onChange:s=>T(s.target.value),value:u,defaultValue:u})]}),e.jsx(I,{onClick:()=>{T(""),L("")},type:"danger",children:"Clear (Yoshlarni tozalash (ot do ) )"}),e.jsx(O,{title:"Til",options:[{name:"Hammasi",id:"all"},...f],extraClass:d.filter__select,defaultValue:n,onChangeOption:s=>y(s)}),e.jsxs("div",{className:d.filter__switch,children:[e.jsx("p",{children:"O’chirilgan"}),e.jsx(te,{onChangeSwitch:b,activeSwitch:l})]})]})]})})}),N=ae("filterTeacher/fetchTeachersFilter",async g=>{const{request:t}=z();return await t(`${B}`,"POST",JSON.stringify(g),H())}),pe={filtered:null,loading:!1,error:null};se({name:"filterTeachers",initialState:pe,reducers:{},extraReducers:g=>g.addCase(N.pending,t=>{t.loading=!0,t.error=null}).addCase(N.fulfilled,(t,m)=>{t.filtered=m.payload,t.loading=!1,t.error=null}).addCase(N.rejected,(t,m)=>{t.loading=!1,t.error=m.payload??null})});const je="_teacher_1sean_1",xe="_teacher__filter_1sean_14",Ce="_header_btn_1sean_17",Te="_table_1sean_20",ye="_category_1sean_32",be="_categoryItem_1sean_36",_={teacher:je,teacher__filter:xe,header_btn:Ce,table:Te,category:ye,categoryItem:be},Ie={},Ne=()=>{const{theme:g}=re();h(V);const t=h(ie),m=h(de),b=h(he),l=h(ge),x=$(),A=localStorage.getItem("teacherStatus");h(ce);let n=a.useMemo(()=>30,[]);const[D,C]=a.useState([]),[f,i]=a.useState(1),[p,L]=a.useState(),[u,T]=a.useState(),[o,v]=a.useState(A==="true"),[j,F]=a.useState({}),[S,w]=a.useState(!1),[P,y]=a.useState(!1),[s,U]=a.useState(!1),{request:Y}=z(),E=a.useMemo(()=>{const c=l?.slice();return i(1),t?c.filter(r=>r?.name?.toLowerCase().includes(t.toLowerCase())||r?.surname?.toLowerCase().includes(t.toLowerCase())):c},[m,l,i,t,s]),M=a.useMemo(()=>{const c=s?l?.slice():b?.slice();return i(1),t?c.filter(r=>r?.name?.toLowerCase().includes(t.toLowerCase())||r?.surname?.toLowerCase().includes(t.toLowerCase())):c},[b,l,i,t,s]),q=()=>{const c=j.id;Y(`${B}Teachers/teachers/delete/${c}/`,"DELETE",null,H()).then(r=>{r.status&&x(oe(c)),x(R({type:r.status?"success":"danger",status:!0,msg:r.msg})),y(!1)}).catch(r=>{x(R({type:"danger",status:!0,msg:r.msg}))})};return e.jsxs(le,{reducers:Ie,children:[e.jsxs("div",{className:_.teacher,children:[e.jsxs("div",{className:_.teacher__filter,style:{justifyContent:S?"end":"space-between"},children:[S?null:e.jsx(I,{status:"filter",extraClass:_.extraCutClassFilter,onClick:()=>T(!u),type:"filter",children:"Filter"}),e.jsxs("div",{className:_.header_btn,children:[S?null:e.jsx(I,{type:"login",status:"timeTable",children:"time table"}),e.jsx(I,{extraClass:_.category,type:"simple",onClick:()=>w(!S),children:"Toifa"})]})]}),e.jsxs("div",{className:_.table,children:[e.jsx("h2",{children:S?"Toifa ":o===!0?"Deleted Teachers":"Teachers"}),S?e.jsx(fe,{extraClass:_.categoryItem}):o===!0?e.jsx(ue,{data:M?.slice((f-1)*n,f*n)}):e.jsx(me,{setActiveDelete:F,setActiveModal:y,theme:g==="app_school_theme",loading:V,data:E?.slice((f-1)*n,f*n)})]}),e.jsx(ne,{setCurrentTableData:C,users:o?M:E,search:t,setCurrentPage:i,currentPage:f,pageSize:n,onPageChange:c=>{i(c)},type:"custom"}),e.jsx(_e,{setIsFilter:U,activeSwitch:o,setActiveSwitch:v,setActive:T,active:u})]}),e.jsx(Se,{setActive:y,active:P,onClick:q,type:"danger"})]})};export{Ne as TeachersPage};
