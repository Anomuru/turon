import{j as e,B as O,z as D,F as P,I as p,r as i,S as E,n as k,a as x,u as $,D as B,d as H,aa as q,h as _,A as f,i as y,Q as ae,b as te,o as se}from"./index-Dts_nlzx.js";import{g as w,a as ne,b as ie,c as re,d as F,C as ce,e as le,f as oe,h as de,i as me,j as ue,k as pe,l as ge,m as xe,n as he,o as je,p as _e,q as fe}from"./capitalSelector-BappSC1k.js";import{u as J}from"./index-B_VG4ZDK.js";import"./confirmModal-BY7I8EU1.js";const ye=({caunt:t,active:s,setActiveModal:a,isCanAdd:r})=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(O,{onClick:()=>a(!s),children:e.jsx("i",{className:"fa fa-plus"}),type:"editPlus"})}),e.jsxs("div",{style:{padding:"2rem 0",display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("h1",{style:{fontWeight:"bolder"},children:"Capital"}),e.jsxs("span",{style:{fontSize:"1.8rem",display:"flex",gap:"4rem"},children:["Jami (Down cost): ",t]})]})]}),Ce="_categoryHeader_zblkj_1",Ie={categoryHeader:Ce},ve=({setActiveModal:t,activeModal:s})=>e.jsxs("div",{className:Ie.categoryHeader,children:[e.jsx("h2",{children:"Qo'shimcha kategoriyalar"}),e.jsx(O,{onClick:()=>t(!s),type:"editPlus",children:e.jsx("i",{className:"fa fa-plus"})})]}),Se="_capitalMain_18vau_1",be="_items__item_18vau_9",Me="_form_18vau_25",Ne="_loader_18vau_47",Ae="_loader__circle_18vau_51",j={capitalMain:Se,items__item:be,form:Me,loader:Ne,loader__circle:Ae},U=({setActiveModal:t,activeModal:s,changeItem:a,setChangedImages:r,handleSubmit:n,onClick:l,register:c})=>e.jsx("div",{children:e.jsxs(D,{setActive:t,active:s,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(De,{status:s,image:a?.images,setChangedImages:r}),e.jsxs(P,{extraClassname:j.form,onSubmit:n(l),children:[e.jsx(p,{required:!0,register:c,name:"name",placeholder:"Name"}),e.jsx(p,{required:!0,register:c,name:"id_number",placeholder:"Id number"})]})]})]})}),De=({index:t,setChangedImages:s,image:a,status:r})=>{i.useEffect(()=>{r&&l({})},[r]);const[n,l]=i.useState({}),{getInputProps:c,getRootProps:m}=J({onDrop:o=>{l(o[0]),s(o[0])}}),d=i.useCallback(({img:o,image:u})=>o?.path?e.jsx("img",{src:URL.createObjectURL(o),alt:""}):r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{required:!0,type:"file",...c()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...c()})]}),[n,a]);return e.jsx("div",{className:j.items__item,...m(),children:e.jsx(d,{img:n,image:a})})},Pe="_capitalInside_lr226_1",ke="_items__item_lr226_8",qe="_form_lr226_24",v={capitalInside:Pe,items__item:ke,form:qe},Te=i.memo(({setActiveModal:t,activeModal:s,register:a,handleSubmit:r,onClick:n,changeItem:l,setChangedImages:c,options:m,setSelectPayment:d,branches:o,setSelectedBranches:u})=>e.jsxs(D,{setActive:t,active:s,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem",alignItems:"center"},children:[e.jsx(z,{status:s,image:l?.images,setChangedImages:c}),e.jsxs(P,{extraClassname:v.form,onSubmit:r(n),children:[e.jsx(p,{register:a,required:!0,name:"name",placeholder:"Nomi"}),e.jsx(E,{options:o,onChangeOption:u,title:"Branch ni tanlang"}),e.jsx(p,{register:a,required:!0,name:"id_number",type:"number",placeholder:"Raqami"}),e.jsx(p,{register:a,required:!0,name:"price",type:"number",placeholder:"Narxi"}),e.jsx(p,{register:a,required:!0,name:"total_down_cost",type:"number",placeholder:"Jami umumiy xarajat"}),e.jsx(p,{register:a,required:!0,name:"term",type:"number",placeholder:"Muddati (yil)"}),e.jsx(p,{register:a,required:!0,name:"curriculum_hours",placeholder:"Sanasi",type:"number"}),e.jsx(E,{options:m,onChangeOption:d,title:"To'lov turi"})]})]})]})),z=({index:t,setChangedImages:s,image:a,status:r})=>{i.useEffect(()=>{r&&l({})},[r]);const[n,l]=i.useState({}),{getInputProps:c,getRootProps:m}=J({onDrop:o=>{l(o[0]),s(o[0])}}),d=i.useCallback(({img:o,image:u})=>o?.path?e.jsx("img",{src:URL.createObjectURL(o),alt:""}):r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{name:"file",type:"file",...c()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...c()})]}),[n,a]);return e.jsx("div",{className:v.items__item,...m(),children:e.jsx(d,{img:n,image:a})})},Le=i.memo(({register:t,handleSubmit:s,onClick:a,editModal:r,setEditModal:n,changeItem:l,setChangedImages:c})=>e.jsxs(D,{setActive:n,active:r,children:[e.jsx("h1",{children:"Change"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(z,{status:r,image:l?.images,setChangedImages:c}),e.jsxs(P,{extraClassname:v.form,onSubmit:s(a),children:[e.jsx(p,{register:t,name:"name"}),e.jsx(p,{register:t,name:"id_number"})]})]})]})),Ee={capital:F},Ue=i.memo(()=>{const{register:t,setValue:s,handleSubmit:a}=k(),r=x(w),n=$(),[l,c]=i.useState(!1),[m,d]=i.useState({}),[o,u]=i.useState([]),h=x(ne);i.useEffect(()=>{n(ie())},[]);const S=x(re),b=M=>{c(!l),s("name",""),s("id_number",""),n(le({data:M,changedImages:o}))},C=()=>r===!0?e.jsx("div",{className:j.loader,children:e.jsx("div",{className:j.loader__circle,children:e.jsx("div",{})})}):e.jsx("div",{children:S?.length});return e.jsx(B,{reducers:Ee,children:e.jsxs("div",{className:j.capitalMain,children:[h&&e.jsxs(e.Fragment,{children:[e.jsx(ye,{caunt:C(),setActiveModal:c,active:l,isCanAdd:h[0]?.add_capitalcategory}),r?e.jsx(H,{}):e.jsx(ce,{isCanView:h[0]?.view_capitalcategory,capitalData:S})]}),e.jsx(U,{changeItem:m,setChangedImages:u,onClick:b,register:t,handleSubmit:a,setActiveModal:c,activeModal:l})]})})});q("postCreateBranch/createBranchThunk",async t=>{const{request:s}=_();return await s(`${f}Branch/branch_create/`,"POST",JSON.stringify(t),y())});q("getLocationSlice/getLocationThunk",async()=>{const{request:t}=_();return await t(`${f}Location/location_list/`,"GET",null,y())});q("postCreateBranch/changeLocation",async({data:t,id:s})=>{const{request:a}=_();return await a(`${f}Location/location_update/${s}/`,"PATCH",JSON.stringify(t),y())});const Re=()=>{const[t,s]=i.useState(!1),{register:a,setValue:r,handleSubmit:n}=k(),{request:l}=_(),c=m=>{l(`${f}Capital/capital_category/`,"POST",JSON.stringify(m),y()).then(d=>{console.log(d)}).catch(d=>{console.log(d)})};return e.jsxs("div",{children:[e.jsx(ve,{activeModal:t,setActiveModal:s}),e.jsx(U,{activeModal:t,setActiveModal:s,register:a,handleSubmit:n,onClick:c})]})},R=[{name:"category",label:"Category"},{name:"subCategory",label:"Sub Category"}],Oe={capital:F},ze=i.memo(()=>{const t=$(),{register:s,setValue:a,handleSubmit:r}=k(),{id:n}=ae(),{request:l}=_(),c=te(),m=x(oe),d=x(de);i.useEffect(()=>{n&&(t(me(n)),t(ue()),t(pe(n)))},[n]);const o=x(ge),u=x(w),[h,S]=i.useState({}),[b,C]=i.useState([]),[M,V]=i.useState(),[$e,Be]=i.useState([]),[T,Q]=i.useState(R[0].name),[L,N]=i.useState(!1),[I,A]=i.useState(!1),[G,W]=i.useState([]),K=()=>{l(`${f}Capital/capital_category/${n}/`,"DELETE",null,y()).then(g=>{t(se({type:"success",status:!0,msg:g.msg})),c(-2)}).catch(g=>{console.log(g)})},X=g=>{N(!1),t(_e({data:g,changedImages:b,selectPayment:M,selectedBranches:G,id:n})),a("name",""),a("id_number",""),a("price",""),a("total_down_cost",""),a("term",""),a("curriculum_hours","")},Y=()=>u?e.jsx(H,{}):e.jsxs(e.Fragment,{children:[e.jsx(he,{onDelete:K,editModal:I,setEditModal:()=>A(!I),capitalData:o}),e.jsx(je,{addModal:L,setAddModal:N,capitalData:m})]}),Z=g=>{A(!I),t(fe({data:g,id:n})),a("name",""),a("id_number","")},ee=Y();return e.jsx(B,{reducers:Oe,children:e.jsxs("div",{className:v.capitalInside,children:[e.jsx(xe,{activeMenu:T,setActiveMenu:Q,categoryMenu:R}),T==="category"?ee:e.jsx(Re,{}),e.jsx(Te,{setSelectPayment:V,register:s,handleSubmit:r,onClick:X,activeModal:L,setActiveModal:N,setChangedImages:C,changeItem:h,options:d,setSelectedBranches:W}),e.jsx(Le,{register:s,handleSubmit:r,onClick:Z,editModal:I,setEditModal:A,setChangedImages:C,changeItem:h})]})})});export{ze as CapitalInside,Ue as CapitalPage};
