import{aa as P,h as g,A as m,i as h,ab as v,R as W,n as B,r as u,u as O,a as k,j as r,z as V,F as z,ba as D,I as F,S as G,B as T,ax as w,o as E}from"./index-Dts_nlzx.js";import{E as $}from"./editableCard-_YQDga6-.js";const C=P("vacancyWorkerSlice/vacancyWorkerListThunk",async(a,{rejectWithValue:e})=>{const{request:s}=g();try{return await s(`${m}Users/users-job/`,"POST",JSON.stringify(a),h())}catch(o){return e(o.response.data)}}),I={workerData:[],loading:!1,error:null};v({name:"vacancyWorkerSlice",initialState:I,reducers:{},extraReducers:a=>{a.addCase(C.pending,e=>{e.loading=!0}).addCase(C.fulfilled,(e,s)=>{e.loading=!1,e.error=null,e.workerData=s.payload}).addCase(C.rejected,(e,s)=>{e.loading=!1,e.error=s.error.message})}});const J="_filter_1syjy_1",U="_cardSelect_1syjy_71",b={filter:J,cardSelect:U},ae=W.memo(({active:a,setActive:e,user_id:s})=>{const{register:o,handleSubmit:i,setValue:y}=B(),[l,c]=u.useState([]),[S,_]=u.useState([]),n=O();k(K);const j=k(t=>t.userSetPermissionSlice.locations),x=k(t=>t.userSetPermissionSlice.branches);u.useEffect(()=>{n(f())},[n]);const L=async()=>{const t={user:s,locations:l.map(d=>d.value),branchs:S.map(d=>d.value)};try{await n(p(t))}catch(d){console.error("An error occurred:",d)}e(!a)},R=t=>{c(t)},q=(Array.isArray(j)?j:[j])?.map(t=>({value:t.id,label:t.name})),N=(Array.isArray(x)?x:[x])?.map(t=>({value:t?.id,label:t?.name}));return r.jsx(V,{active:a,setActive:e,children:r.jsxs(z,{onSubmit:i(L),extraClassname:b.filter,children:[r.jsx($,{extraClass:b.cardSelect,children:r.jsx(D,{options:q,value:l,onChange:R})}),r.jsx($,{extraClass:b.cardSelect,children:r.jsx(D,{options:N,value:S,onChange:_})})]})})}),f=P("vacancyWorkerSoucre/vacancyWorkerGetThunk",async()=>{const{request:a}=g();return await a(`${m}Permissions/add_permissions_managers_and_directors/`,"GET",null,h())}),M={workerData:[],loading:!1,error:null};v({name:"vacancyWorkerSoucre",initialState:M,reducers:{},extraReducers:a=>{a.addCase(f.pending,e=>{e.loading=!0}).addCase(f.fulfilled,(e,s)=>{e.loading=!1,e.error=null,e.workerData=s.payload}).addCase(f.rejected,(e,s)=>{e.loading=!1,e.error=s.error.message})}});const p=P("userSetPermissionSlice/userSetPermissionThunk",async(a,{rejectWithValue:e})=>{const{request:s}=g();try{return await s(`${m}Permissions/add_permissions_managers_and_directors/`,"POST",JSON.stringify(a),h())}catch(o){return e(o.message)}}),H={newPermission:[],locations:[],branches:[],loading:!1,error:null};v({name:"userSetPermissionSlice",initialState:H,reducers:{},extraReducers:a=>{a.addCase(p.pending,e=>{e.loading=!0}).addCase(p.fulfilled,(e,s)=>{e.loading=!1,e.error=null,e.newPermission=s.payload}).addCase(p.rejected,(e,s)=>{e.loading=!1,e.error=s.payload})}});const K=a=>a.vacancyWorkerSoucre?.workerData,Q="_filter_dmj1h_1",X="_filter__container_dmj1h_6",A={filter:Q,filter__container:X},re=W.memo(({modal:a,setModal:e,vacancy:s,onSave:o})=>{const[i,y]=u.useState(s?.group?.name||"");u.useEffect(()=>{s&&y(s.group.name)},[s]);const{request:l}=g(),c=O(),S=()=>{const n={...s,name:i};o(n),l(`${m}Permissions/jobss/${s.group.id}/`,"PUT",JSON.stringify(n),h()).then(()=>{c(w()),c(E({status:!0,msg:`${i} muvaffaqiyatli o'zgartirildi`,type:"success"})),e(!1)})},_=()=>{l(`${m}Permissions/jobs_delete/${s.id}/`,"DELETE",null,h()).then(n=>{c(w()),c(E({status:!0,msg:n.msg,type:"success"}))})};return r.jsx(V,{active:a,setActive:e,children:r.jsxs("div",{className:A.filter,children:[r.jsx("h1",{children:"Ma'lumotlarni o'zgartirish"}),r.jsxs("div",{className:A.filter__container,children:[r.jsx(F,{placeholder:"Kasb nomi",value:i,onChange:n=>y(n.target.value)}),r.jsx(G,{onChangeOption:setSelectedType,defaultValue:selectedType}),r.jsxs("div",{style:{display:"flex"},children:[r.jsx(T,{onClick:S,children:"Change"}),s?.status&&r.jsx(T,{type:"danger",onClick:_,children:"Delete"})]})]})]})})});export{re as V,ae as a,C as v};
