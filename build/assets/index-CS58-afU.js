import{j as e,I as p,r as t,p as q,n as g,l as R,D as k,u as T,A as L,h as O,o as Y,k as Z}from"./index-Cux8sda1.js";import{g as F,a as ee,b as ae,c as te,C as se,d as ne,e as ie,f as re,h as oe,i as ce,j as le,k as me,l as de,m as ue,n as pe,o as ge,p as xe}from"./capitalSelector-D7mI4_e4.js";import{CapitalOutsideHeader as he,CategoryHeader as je}from"./index-JMx3xO2P.js";import{u as b}from"./index.esm-DQmSsb0O.js";import{M}from"./modal-BR27MEf1.js";import{F as A}from"./form-C3mZZqBW.js";import{u as $}from"./index-CItxKBPH.js";import{g as _e}from"./educationSlice-Dccsl4fS.js";import{g as fe}from"./branchSelector-u3o7YCHK.js";import{o as Ce}from"./alertSlice-XeBTN8B3.js";import"./confirmModal-DiNALKc8.js";import"./cross-BXlnQeE0.js";const ye="_capitalMain_18vau_1",Ie="_items__item_18vau_9",ve="_form_18vau_25",Se="_loader_18vau_47",be="_loader__circle_18vau_51",j={capitalMain:ye,items__item:Ie,form:ve,loader:Se,loader__circle:be},B=({setActiveModal:n,activeModal:r,changeItem:a,setChangedImages:i,handleSubmit:s,onClick:c,register:o})=>e.jsx("div",{children:e.jsxs(M,{setActive:n,active:r,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(Me,{status:r,image:a?.images,setChangedImages:i}),e.jsxs(A,{extraClassname:j.form,onSubmit:s(c),children:[e.jsx(p,{required:!0,register:o,name:"name",placeholder:"Name"}),e.jsx(p,{required:!0,register:o,name:"id_number",placeholder:"Id number"})]})]})]})}),Me=({index:n,setChangedImages:r,image:a,status:i})=>{t.useEffect(()=>{i&&c({})},[i]);const[s,c]=t.useState({}),{getInputProps:o,getRootProps:d}=$({onDrop:l=>{c(l[0]),r(l[0])}}),m=t.useCallback(({img:l,image:u})=>l?.path?e.jsx("img",{src:URL.createObjectURL(l),alt:""}):i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{required:!0,type:"file",...o()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...o()})]}),[s,a]);return e.jsx("div",{className:j.items__item,...d(),children:e.jsx(m,{img:s,image:a})})},Ae="_capitalInside_lr226_1",De="_items__item_lr226_8",Ne="_form_lr226_24",y={capitalInside:Ae,items__item:De,form:Ne},Pe=t.memo(({setActiveModal:n,activeModal:r,register:a,handleSubmit:i,onClick:s,changeItem:c,setChangedImages:o,options:d,setSelectPayment:m,branches:l,setSelectedBranches:u})=>e.jsxs(M,{setActive:n,active:r,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem",alignItems:"center"},children:[e.jsx(U,{status:r,image:c?.images,setChangedImages:o}),e.jsxs(A,{extraClassname:y.form,onSubmit:i(s),children:[e.jsx(p,{register:a,required:!0,name:"name",placeholder:"Nomi"}),e.jsx(q,{options:l,onChangeOption:u,title:"Branch ni tanlang"}),e.jsx(p,{register:a,required:!0,name:"id_number",type:"number",placeholder:"Raqami"}),e.jsx(p,{register:a,required:!0,name:"price",type:"number",placeholder:"Narxi"}),e.jsx(p,{register:a,required:!0,name:"total_down_cost",type:"number",placeholder:"Jami umumiy xarajat"}),e.jsx(p,{register:a,required:!0,name:"term",type:"number",placeholder:"Muddati (yil)"}),e.jsx(p,{register:a,required:!0,name:"curriculum_hours",placeholder:"Sanasi",type:"number"}),e.jsx(q,{options:d,onChangeOption:m,title:"To'lov turi"})]})]})]})),U=({index:n,setChangedImages:r,image:a,status:i})=>{t.useEffect(()=>{i&&c({})},[i]);const[s,c]=t.useState({}),{getInputProps:o,getRootProps:d}=$({onDrop:l=>{c(l[0]),r(l[0])}}),m=t.useCallback(({img:l,image:u})=>l?.path?e.jsx("img",{src:URL.createObjectURL(l),alt:""}):i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{name:"file",type:"file",...o()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...o()})]}),[s,a]);return e.jsx("div",{className:y.items__item,...d(),children:e.jsx(m,{img:s,image:a})})},qe=t.memo(({register:n,handleSubmit:r,onClick:a,editModal:i,setEditModal:s,changeItem:c,setChangedImages:o})=>e.jsxs(M,{setActive:s,active:i,children:[e.jsx("h1",{children:"Change"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(U,{status:i,image:c?.images,setChangedImages:o}),e.jsxs(A,{extraClassname:y.form,onSubmit:r(a),children:[e.jsx(p,{register:n,name:"name"}),e.jsx(p,{register:n,name:"id_number"})]})]})]})),Ge=t.memo(()=>{const{register:n,setValue:r,handleSubmit:a}=b(),i=g(F),s=R(),[c,o]=t.useState(!1),[d,m]=t.useState({}),[l,u]=t.useState([]),_=g(ee);t.useEffect(()=>{s(ae())},[]);const h=g(te),D=f=>{o(!c),r("name",""),r("id_number",""),s(ne({data:f,changedImages:l}))},I=()=>i===!0?e.jsx("div",{className:j.loader,children:e.jsx("div",{className:j.loader__circle,children:e.jsx("div",{})})}):e.jsx("div",{children:h?.length});return e.jsxs("div",{className:j.capitalMain,children:[e.jsx(he,{caunt:I(),setActiveModal:o,active:c,isCanAdd:_[0]?.add_capitalcategory}),i?e.jsx(k,{}):e.jsx(se,{isCanView:_[0]?.view_capitalcategory,capitalData:h}),e.jsx(B,{changeItem:d,setChangedImages:u,onClick:D,register:n,handleSubmit:a,setActiveModal:o,activeModal:c})]})}),Ee=()=>{const[n,r]=t.useState(!1),{register:a,setValue:i,handleSubmit:s}=b(),{request:c}=T(),o=d=>{c(`${L}Capital/capital_category/`,"POST",JSON.stringify(d),O()).then(m=>{console.log(m)}).catch(m=>{console.log(m)})};return e.jsxs("div",{children:[e.jsx(je,{activeModal:n,setActiveModal:r}),e.jsx(B,{activeModal:n,setActiveModal:r,register:a,handleSubmit:s,onClick:o})]})},E=[{name:"category",label:"Category"},{name:"subCategory",label:"Sub Category"}],Ke=t.memo(()=>{const n=R(),{register:r,setValue:a,handleSubmit:i}=b(),{id:s}=g(Y),{request:c}=T(),o=Z(),d=g(ie),m=g(re);t.useEffect(()=>{n(oe(s)),n(ce()),n(le(s)),n(_e())},[]);const l=g(me),u=g(F),_=g(fe),[h,D]=t.useState({}),[I,f]=t.useState([]),[w,H]=t.useState(),[Re,ke]=t.useState([]),[N,V]=t.useState(E[0].name),[P,v]=t.useState(!1),[C,S]=t.useState(!1),[J,z]=t.useState([]),G=()=>{c(`${L}Capital/capital_category/${s}/`,"DELETE",null,O()).then(x=>{n(Ce({type:"success",status:!0,msg:x.msg})),o(-2)}).catch(x=>{console.log(x)})},K=x=>{v(!1),n(ge({data:x,changedImages:I,selectPayment:w,selectedBranches:J,id:s})),a("name",""),a("id_number",""),a("price",""),a("total_down_cost",""),a("term",""),a("curriculum_hours","")},Q=()=>u?e.jsx(k,{}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{onDelete:G,editModal:C,setEditModal:()=>S(!C),capitalData:l}),e.jsx(pe,{addModal:P,setAddModal:v,capitalData:d})]}),W=x=>{S(!C),n(xe({data:x,id:s})),a("name",""),a("id_number","")},X=Q();return e.jsxs("div",{className:y.capitalInside,children:[e.jsx(de,{activeMenu:N,setActiveMenu:V,categoryMenu:E}),N==="category"?X:e.jsx(Ee,{}),e.jsx(Pe,{setSelectPayment:H,register:r,handleSubmit:i,onClick:K,activeModal:P,setActiveModal:v,setChangedImages:f,changeItem:h,options:m,branches:_,setSelectedBranches:z}),e.jsx(qe,{register:r,handleSubmit:i,onClick:W,editModal:C,setEditModal:S,setChangedImages:f,changeItem:h})]})});export{Ke as CapitalInside,Ge as CapitalPage};
