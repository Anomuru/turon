import{j as s,M as R,aJ as O,I,dH as z,B as k,C as M,r as _,a2 as q,u as N,i as B,A as E,k as $,aC as P,fS as D,a as T,w as H,h as A,fT as L,o as w,g as V,fU as J,fV as U,fW as G}from"./index-B1KXs2zi.js";const W="_modalBtn_1d7c7_10",Z="_extraClassForm_1d7c7_15",K="_modalHeader_1d7c7_57",Q="_items_1d7c7_65",X="_checkbox__minus_1d7c7_70",Y="_active_1d7c7_79",ss="_changeColorItem_1d7c7_89",es="_color_1d7c7_100",as="_subject__main_1d7c7_107",cs="_subject_1d7c7_107",C={modalBtn:W,extraClassForm:Z,modalHeader:K,items:Q,checkbox__minus:X,active:Y,changeColorItem:ss,color:es,subject__main:as,subject:cs},ts=({handleSubmit:a,register:n,setActive:o,active:x,changeName:d,setChangeName:i,changeColor:r,setColorChange:l,colorChange:c,deleteColor:u,edit:h})=>(console.log(h),s.jsxs(R,{active:d,setActive:i,children:[s.jsx("h2",{children:"Rangni oz'gartirish yoki O'chirish"}),s.jsx("div",{children:s.jsxs(O,{extraClassname:C.extraClassForm,typeSubmit:"",children:[s.jsx(I,{name:"name",register:n}),s.jsxs("div",{className:C.changeColorItem,children:[s.jsxs("div",{className:C.color,children:[s.jsx("h2",{children:"Tanlangan rang :"}),s.jsx("div",{style:{fontSize:"2rem"},children:c||h?.value})]}),s.jsx(z,{style:{width:"30rem",height:"15rem"},color:h?.value,onChange:l})]}),s.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[s.jsx(k,{onClick:a(r),children:"Rangni o'zgartirish"}),h?.status?s.jsx(k,{onClick:a(()=>o(!x)),type:"danger",children:"Rangni O'chirish"}):null]}),s.jsx(M,{setActive:o,active:x,onClick:a(u),type:"danger"})]})})]})),ns="_select_1d7c7_1",ls="_extraClassForm_1d7c7_15",rs="_container_1d7c7_21",os="_input_1d7c7_26",is="_selectBox_1d7c7_34",S={select:ns,extraClassForm:ls,container:rs,input:os,selectBox:is},ds=({selectOptions:a,editClass:n,setEditClass:o,edit:x,changedItem:d})=>{const[i,r]=_.useState([]),{register:l,handleSubmit:c,setValue:u}=q(),{request:h}=B(),g=N(),b=e=>{const t={subjects:i,...e},j=n;u("price",i.price),g(D({idClass:j,res:t})),o(!n)},[f,v]=_.useState([]);_.useEffect(()=>{d?.id&&(r(d.subjects.map(e=>({value:e.id,label:e.name}))),u("curriculum_hours",d.curriculum_hours),u("price",d.price))},[d?.id]),_.useEffect(()=>{a?.length&&v(a?.map(e=>({value:e.id,label:e.name})))},[a]),_.useEffect(()=>{n&&h(`${E}Class/class_subjects?id=${n}`,"GET",null,$()).then(e=>{r(e.hours.map(t=>({value:t.id,label:t.name,hours:t.hours})))})},[n]);const p=(e,t)=>{r(j=>j.map(m=>m.value===e&&t!==m?.hours?{...m,hours:t}:m))};return s.jsx(s.Fragment,{children:s.jsxs(R,{active:n,setActive:o,children:[s.jsx("h2",{children:"Ma’lumotlarni o’zgartirish "}),s.jsxs(O,{extraClassname:S.extraClassForm,typeSubmit:"",onSubmit:c(b),children:[s.jsxs("div",{className:S.container,children:[s.jsxs("div",{children:[s.jsx(I,{name:"price",register:l,value:i.price,type:"number",placeholder:"narxi"}),s.jsx("div",{className:S.selectBox,children:s.jsx(P,{extraClass:S.select,value:i,options:f,onChange:r})})]}),s.jsx("div",{className:S.input,children:i.map(e=>s.jsx(I,{value:e.hours,type:"number",title:e.label,onChange:t=>p(e.value,t.target.value)}))})]}),s.jsx(k,{children:"Tastiqlash"})]})]})})},vs=a=>a.classSlice.loading,Ss=a=>a.classSlice?.classData,Ns=a=>a.classSlice?.color,us=a=>a.classSlice?.subjects,hs=a=>a.classSlice?.classNewItems,_s=({edit:a})=>{const[n,o]=_.useState(!1),[x,d]=_.useState({}),i=T(us),r=T(hs),{request:l}=B(),c=N(),[u,h]=_.useState([]),[g,b]=_.useState(null);_.useEffect(()=>{if(n){const e=r.find(t=>t.id===n);b(e)}},[n,r]);const f=({id:e,type:t})=>{const j={status:!t,class_type_id:a.id,class_number_id:e};l(`${E}Class/class_number_update_status/`,"POST",JSON.stringify(j),$()).then(m=>{c(L({id:e})),c(w({type:"success",status:!0,msg:m.msg}))}).catch(m=>{console.log(m)})},p=r.map((e,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:t+1}),s.jsx("td",{children:e?.number}),s.jsx("td",{children:s.jsx("div",{className:C.subject__main,children:e?.subjects.map(j=>s.jsxs("span",{className:C.subject,children:[" ",j.name,"-",j.hours]}))})}),s.jsx("td",{children:e.price}),s.jsx("td",{style:{width:"3rem"},children:s.jsxs("div",{className:C.items,children:[s.jsx("div",{onClick:()=>f({id:e.id,type:e.status}),className:A(C.checkbox__minus,{[C.active]:e.status}),children:e.status?s.jsx("i",{className:"fa fa-check "}):s.jsx("i",{className:"fa fa-minus"})}),s.jsx("i",{onClick:()=>{o(e.id),d(e)},className:"fa fa-pen"})]})})]}));return s.jsxs("div",{children:[s.jsxs(H,{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"No"}),s.jsx("th",{children:"Sinf Raqami"}),s.jsx("th",{children:"Fanlari"}),s.jsx("th",{children:"Narxi"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:p})]}),s.jsx(ds,{setEditClass:o,selectOptions:i,editClass:n,changedItem:x,edit:a})]})},xs="_classFilter_12547_1",js="_active_12547_28",y={classFilter:xs,active:js},ms=({classesType:a,active:n,setActive:o,setEdit:x})=>{const d=N(),i=T(V),r=_.useCallback(c=>{d(J({branchId:i.id,id:c}))},[i]);function l(c,u){return c.id-u.id}return s.jsx("div",{className:y.classFilter,children:s.jsx("div",{className:y.classFilter__wrapper,children:s.jsx("ul",{children:[...a].sort(l)?.map((c,u)=>s.jsxs("li",{className:A(y.classFilter_li,{[y.active]:n===c?.id}),onClick:()=>{r(c.id),o(c.id),x({id:c.id,name:c.name})},children:[c?.name,s.jsx("div",{children:c.class_numbers?.map(h=>s.jsx("span",{children:h?.number}))})]},u))})})})},ps="_filter__wrapper_5nrwu_1",F={filter__wrapper:ps},bs=({color:a,setEdit:n,setChangeName:o,changeName:x,setValue:d})=>{const r=a.map((l,c)=>{function u(f){var v=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;f=f.replace(v,function(e,t,j,m){return t+t+j+j+m+m});var p=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);return p?{r:parseInt(p[1],16),g:parseInt(p[2],16),b:parseInt(p[3],16)}:null}const h=u(l?.value?l?.value:"#ffffff"),g=Math.round((parseInt(h?.r)*299+parseInt(h?.g)*587+parseInt(h?.b)*114)/1e3),b={backgroundColor:l?.value?l?.value:"white",color:g>125?"black":"white"};return s.jsxs("li",{style:b,className:A(F.classFilter_li),onClick:()=>{n(l),d("name",l.name),o(!x)},children:[l.name,s.jsx("span",{children:l.class})]},c)});return s.jsx("div",{className:F.filter,children:s.jsx("div",{className:F.filter__wrapper,children:s.jsx("ul",{children:r})})})},fs=({setEdit:a,edit:n,setActiveEdit:o,activeMenu:x,setActiveMenu:d,classes:i,branch:r})=>{const[l,c]=_.useState([]);N();const u=n.id;return s.jsxs(s.Fragment,{children:[s.jsx(ms,{classesType:i,setActiveEdit:o,edit:n,setEdit:a,active:x,setActive:d,branch:r}),s.jsx(_s,{id:u,active:x,selectBox:l,setSelectBox:c,edit:n})]})},Cs=({color:a,setEdit:n,edit:o})=>{const{register:x,handleSubmit:d,setValue:i}=q(),[r,l]=_.useState(!1),c=N(),[u,h]=_.useState(!1),{request:g}=B(),[b,f]=_.useState(""),v=e=>{const t=o.id,j={value:b||o.value,...e};c(G({id:t,res:j})),i("name",""),l(!r),c(w({msg:"rang muvaffaqiyatli o'zgartirildi",status:!0,type:"success"}))},p=()=>{const e=o.id;g(`${E}Class/class_colors-delete/${e}/`,"DELETE",null,$()).then(t=>{c(U({id:e})),l(!r),h(!1),c(w({msg:t.msg,status:!0,type:"success"}))}).catch(t=>{console.log(t)})};return s.jsxs(s.Fragment,{children:[s.jsx(bs,{color:a,edit:o,setEdit:n,changeName:r,setChangeName:l,setValue:i}),s.jsx(ts,{setActive:h,active:u,edit:o,changeName:r,setChangeName:l,changeColor:v,handleSubmit:d,register:x,colorChange:b,setColorChange:f,deleteColor:p})]})},ys=Object.freeze(Object.defineProperty({__proto__:null,ClassAddColorPage:Cs,ClassPage:fs},Symbol.toStringTag,{value:"Module"}));export{fs as C,Ss as a,Ns as b,C as c,vs as d,Cs as e,ys as i};
