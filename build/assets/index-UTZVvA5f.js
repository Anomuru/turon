import{a as S,u as j,A as v,h as b,b as te,l as z,n as x,r as n,j as a,I as p,p as X,B as ne,O as le,R as ie,c as I,o as oe,i as ce}from"./index-Cux8sda1.js";import{E as V}from"./editableCard-BNSd-vHU.js";import{L as de}from"./link-B95gzaLk.js";import{d as me}from"./user_image-CruVt77w.js";import"./workerSelect-N9ju4zO7.js";import"./teacherParseSlice-z7KSx3F7.js";import"./teacherThunk-qU_2Y3xX.js";import{M as Y}from"./modal-BR27MEf1.js";import{o as G}from"./alertSlice-XeBTN8B3.js";import"./index-CO9axSa1.js";import"./oftenUsedSelector-B4R2CTqR.js";import"./userProfileSlice-BflEK4KO.js";import{d as _e}from"./index-B-IQsIPc.js";import{f as ue}from"./vacancyPageParseSlice-DZBjzMqT.js";import{g as pe}from"./index-B3t1prr3.js";import{u as fe}from"./index.esm-DQmSsb0O.js";import{R as ye}from"./radio-c1ywR2KC.js";import{F as J}from"./form-C3mZZqBW.js";import{n as K,o as he}from"./ratingSlice-DLA5aEZY.js";import"./index-BSI75IP7.js";import"./pagination-Cj0p_t2O.js";import"./teacherSalarySlice-q9AW59e2.js";const ge="_info_7ugvy_25",xe="_info__avatar_7ugvy_30",Se="_info__image_7ugvy_37",je="_info__role_7ugvy_43",ve="_info__text_7ugvy_50",be="_info__addInfo_7ugvy_63",Ce="_info__balance_7ugvy_77",Ee="_info__money_7ugvy_88",Te="_boxEs_7ugvy_97",ke="_username_7ugvy_102",u={info:ge,info__avatar:xe,info__image:Se,info__role:je,info__text:ve,info__addInfo:be,info__balance:Ce,info__money:Ee,boxEs:Te,username:ke},T=S("employerParseSlice/fetchTeacherId",async s=>{const{request:e}=j();return await e(`${v}Users/employers/${s}/`,"GET",null,b())}),k=S("employerEditSlice/editTeacherThunk",async({id:s,updateEmployer:e})=>{const{request:r}=j();return await r(`${v}Users/users/update/${s}/`,"PATCH",JSON.stringify(e),b())}),Ne=S("employerParseSlice/changeTeacherProfileImage",async({id:s,data:e})=>{const r=new FormData;r.append("profile_img",e);const{request:c}=j();return c(`${v}Users/users/update/${s}/`,"PATCH",r,te())}),H=s=>s.employerParseSlice?.employerId,Q=s=>s.employerParseSlice.loading,Ie="_filter_19odb_13",$e="_filter__container_19odb_19",De="_filter__age_19odb_28",Pe="_filter__input_19odb_33",Ae="_filter__switch_19odb_58",qe="_inputAge_19odb_64",we="_submitBtn_19odb_68",m={filter:Ie,filter__container:$e,filter__age:De,filter__input:Pe,filter__switch:Ae,inputAge:qe,submitBtn:we},Oe=({isOpen:s,onClose:e,onUpdate:r,teacherId:c})=>{const _=z(),t=x(H),f=x(pe),d=x(_e),[$,D]=n.useState(),[P,F]=n.useState(),[A,q]=n.useState(""),[w,O]=n.useState(""),[C,R]=n.useState(""),[y,E]=n.useState(""),[B,i]=n.useState(""),[h,g]=n.useState(null),[ae,se]=n.useState([]);n.useEffect(()=>{_(ue())},[]),n.useEffect(()=>{f&&h&&se(()=>d==="director"?f.map(l=>({id:l?.group?.id,name:l?.group?.name})):f.filter(l=>l?.name!=="director"&&l?.name!=="admin").map(l=>({id:l?.group?.id,name:l?.group?.name})))},[f]),n.useEffect(()=>{t&&(q(t?.user?.name),O(t?.user?.surname),R(t?.user?.phone),E(t?.user?.birth_date),i(t?.salary),g(t?.group?.id))},[t]);const re=()=>{if(!t)return;const l={name:A,surname:w,phone:C,birth_date:y,money:B,profession:+h};_(k({id:t.user?.id,updateEmployer:l})).then(()=>{_(G({type:"success",status:!0,msg:"Ma'lumot muvofaqqiyatli o'zgartirildi"})),_(T(t.id)),e()})};return s?a.jsx(Y,{active:s,setActive:e,children:a.jsxs("div",{className:m.filter,children:[a.jsx("h1",{children:"Ma'lumotlarni o'zgartirish"}),a.jsxs("div",{className:m.filter__container,children:[a.jsx(p,{type:"text",extraClassName:m.inputAge,placeholder:"Ism",onChange:l=>q(l.target.value),value:A}),a.jsxs("div",{className:m.filter__age,children:[a.jsx(p,{type:"text",extraClassName:m.filter__input,placeholder:"Familiya",onChange:l=>O(l.target.value),value:w}),a.jsx(p,{type:"number",extraClassName:m.filter__input,placeholder:"Tel raqami",onChange:l=>R(l.target.value),value:C}),a.jsx(p,{type:"date",extraClassName:m.inputAge,placeholder:"Tug'ilgan yili",onChange:l=>E(l.target.value),value:y}),a.jsx(p,{type:"number",extraClassName:m.inputAge,placeholder:"Oylik",onChange:l=>i(l.target.value),value:B}),a.jsx(X,{extraClass:m.inputAge,options:ae,onChangeOption:g,defaultValue:h})]}),a.jsxs("div",{className:m.filter__switch,children:[a.jsx("div",{}),a.jsx(ne,{extraClass:m.submitBtn,type:"submit",children:"Button",onClick:re})]})]})]})}):null},Re=n.memo(({active:s,setActive:e,setActiveModal:r,newImage:c})=>{const _=x(Q);z();const t=x(H),[f,d]=n.useState({});n.useEffect(()=>{t&&d(t)},[t]);const $=D=>{d(P=>({...P,...D}))};return a.jsxs(V,{onClick:()=>e(!0),extraClass:u.info,title:a.jsx("i",{className:"fas fa-edit"}),children:[_?a.jsx(le,{}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:u.info__avatar,children:[a.jsx("img",{onClick:()=>r("changeImage"),className:u.info__image,src:t?.profile_img??me,alt:""}),a.jsx("div",{className:u.boxEs,children:a.jsx("h1",{className:u.username,title:t.user?.username,children:t.user?.username})}),a.jsx("h2",{className:u.info__role,children:"Employer"})]}),a.jsxs("div",{className:u.info__text,children:[a.jsxs("p",{children:["Ism: ",a.jsx("span",{children:t.user?.name})]}),a.jsxs("p",{children:["Familiya: ",a.jsx("span",{children:t.user?.surname})]}),a.jsxs("p",{children:["Otasinig ismi: ",a.jsx("span",{children:t.user?.father_name})]}),a.jsxs("p",{children:["Telefon raqami: ",a.jsx("span",{children:t.user?.phone})]}),a.jsxs("p",{children:["Yoshi: ",a.jsx("span",{children:t.user?.age})]}),a.jsxs("p",{children:["Tug'ilgan sana: ",a.jsx("span",{children:t.user?.birth_date})]}),a.jsx("div",{className:u.info__addInfo,children:a.jsx("i",{className:"fas fa-plus"})})]})]}),a.jsx(de,{to:`employerSalaryPage/${t.user?.id}`,children:a.jsxs(V,{extraClass:u.info__balance,children:[a.jsx("h2",{children:"Balans"}),a.jsx("p",{children:"Summa"}),a.jsxs("div",{className:u.info__money,children:[a.jsx("h2",{children:"$ 570.000"}),a.jsx("p",{children:"$ 390.000"})]})]})}),a.jsx(Oe,{isOpen:s,onClose:()=>e(!1),onUpdate:$,teacherId:f.id})]})}),Ue="_filter_10b8w_1",Fe="_filter__container_10b8w_9",W={filter:Ue,filter__container:Fe},Pa=ie.memo(({active:s,setActive:e,activePage:r,salary_id:c,permission_id:_,user_id:t})=>a.jsx(Y,{active:s,setActive:e,children:a.jsxs("div",{className:W.filter,children:[a.jsx("h1",{children:"Oylik berish"}),a.jsx("div",{className:W.filter__container,children:a.jsx(ee,{active:s,setActive:e,salary_id:c,permission_id:_,user_id:t})})]})})),N=S("giveEmployerSalarySlices/giveEmployerSalaryThunk",async(s,{rejectWithValue:e})=>{const{request:r}=j();try{(await r(`${v}Users/salaries/create/`,"POST",JSON.stringify(s),b())).ok}catch{console.log("ERrror")}}),Be={salaries:[],loading:!1,error:null},Z=I({name:"giveEmployerSalarySlice",initialState:Be,reducers:{addSalary:(s,e)=>{s.salaries.push(e.payload)}},extraReducers:s=>{s.addCase(N.pending,e=>{e.loading=!0}).addCase(N.fulfilled,(e,r)=>{e.loading=!1,e.salaries.push(r.payload)}).addCase(N.rejected,(e,r)=>{e.loading=!1,e.error="error"})}}),{addSalary:Je}=Z.actions,Aa=Z.reducer,Le="_amount_1tk2b_1",Me="_active_1tk2b_18",Ve="_items_1tk2b_25",Ge="_items__inner_1tk2b_29",ze="_amount__content_1tk2b_34",He="_items__radio_1tk2b_50",Ke="_form_1tk2b_53",We="_items__active_1tk2b_73",Xe="_form__container_1tk2b_81",Ye="_form__select_1tk2b_86",Qe="_form__inner_1tk2b_90",o={amount:Le,active:Me,items:Ve,items__inner:Ge,amount__content:ze,items__radio:He,form:Ke,items__active:We,form__container:Xe,form__select:Ye,form__inner:Qe},L=S("teacherSalaryDeleteSlice/teacherSalaryDeleteThunk",async s=>{const{request:e}=j();return await e(`${v}Teachers/teachers/salary/delete/${s}/`,"DELETE",null,b()),s}),Ze={salaries:[],loading:!1,error:null},ea=I({name:"teacherSalaryDeleteSlice",initialState:Ze,reducers:{},extraReducers:s=>{s.addCase(L.pending,e=>{e.status="loading"}).addCase(L.fulfilled,(e,r)=>{e.status="succeeded",e.salaries=e.salaries.filter(c=>c.id!==r.payload)}).addCase(L.rejected,(e,r)=>{e.status="failed",e.error=r.payload})}}),qa=ea.reducer,M=S("employerSalaryDeleteSlice/employerSalaryDeleteThunk",async s=>{const{request:e}=j();return await e(`${v}Users/salaries/delete/${s}/`,"DELETE",null,b()),s}),aa={salaries:[],loading:!1,error:null},sa=I({name:"employerSalaryDeleteSlice",initialState:aa,reducers:{},extraReducers:s=>{s.addCase(M.pending,e=>{e.status="loading"}).addCase(M.fulfilled,(e,r)=>{e.status="succeeded",e.salaries=e.salaries.filter(c=>c.id!==r.payload)}).addCase(M.rejected,(e,r)=>{e.status="failed",e.error=r.payload})}}),wa=sa.reducer,U=S("giveEmployerSalarySlice/fetchEmployerSalaryThunk",async s=>{const{request:e}=j();return await e(`${v}Users/salaries/${s}/?status=False`,"GET",null,b())}),ra=s=>s.giveEmployerSalarySlice?.salaryInsideData,ta={salaryInsideData:[],loading:!1,error:null},na=I({name:"giveEmployerSalarySlice",initialState:ta,reducers:{},extraReducers:s=>{s.addCase(U.pending,e=>{e.loading=!0}).addCase(U.fulfilled,(e,r)=>{e.loading=!1,e.salaryInsideData=r.payload}).addCase(U.rejected,(e,r)=>{e.error=r.error.message,e.loading=!1})}}),Oa=na.reducer,la=[-1,34.8,70.4],ee=n.memo(({active:s,setActive:e,salary_id:r,user_id:c,permission_id:_})=>{const{register:t,handleSubmit:f}=fe(),[d,$]=n.useState(K[0]),[D,P]=n.useState(0),[F,A]=n.useState(null),q=x(oe),[w,O]=n.useState(1),[C,R]=n.useState(""),y=z();x(ra);const E=async i=>{const h={salary:Number(F),comment:C,deleted:!1,user_salary:r,permission:_,payment_types:w,user:c,branch:q.id,...i};try{const g=await y(N(h));N.fulfilled.match(g)?(y(Je(g.payload)),y(G({type:"success",status:!0,msg:"Oylik muvofaqqiyatli to'landi"}))):(console.error("Thunk failed with error: ",g.payload),y(G({type:"error",status:!0,msg:"Internet yoki serverda xatolik qayta urinib ko'ring"})))}catch(g){console.error("An error occurred:",g)}y(U(r)),e(!s)};return n.useCallback(()=>K.map(i=>a.jsxs("div",{className:o.items__inner,children:[a.jsx(ye,{extraClasses:o.items__radio,onChange:()=>$(i),value:i,checked:i===d}),a.jsx("p",{children:i})]})),[d])(),a.jsx(V,{extraClass:ce(o.amount,{[o.active]:s==="balanceIn"}),titleType:"",onClick:()=>e("balance"),children:a.jsx("div",{className:o.amount__content,children:a.jsxs("div",{className:o.form,children:[a.jsx("h1",{children:d}),d==="To'lov"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:o.items,children:[he.map((i,h)=>a.jsxs("div",{className:o.items__inner,onClick:()=>{P(h),O(h+1)},children:[a.jsx("p",{children:i.name}),a.jsx("img",{src:i.image,alt:""})]})),a.jsx("div",{className:o.items__active,style:{left:`${la[D]}%`}})]}),a.jsx(J,{onSubmit:f(E),children:a.jsxs("div",{className:o.form__inner,children:[a.jsx(p,{title:"To'lov miqdori",...t("amount"),placeholder:"Summa",type:"number",defaultValue:F,onChange:i=>A(i.target.value),required:!0}),a.jsx(p,{title:"Sababi",...t("comment"),placeholder:"Sababi",type:"text",name:"comment",register:t,defaultValue:C,onChange:i=>R(i.target.value)}),a.jsx(p,{title:"Kuni",register:t,name:"date",placeholder:"Kuni",type:"date"})]})})]}):d==="Xayriya"?a.jsx(J,{onSubmit:f(E),children:a.jsxs("div",{className:o.form__container,children:[a.jsx(X,{extraClass:o.form__select}),a.jsxs("div",{className:o.form__inner,children:[a.jsxs("p",{children:[d," miqdori"]}),a.jsx(p,{...t("amount"),placeholder:"Summa",type:"number"})]})]})}):a.jsx(J,{children:a.jsxs("div",{className:o.form__inner,children:[a.jsxs("p",{children:[d," miqdori"]}),a.jsx(p,{...t("amount"),placeholder:"Summa",type:"number"})]})})]})})})}),ia={employerId:[],loading:!1,error:null},oa=I({name:"teacherParseSlice",initialState:ia,reducers:{},extraReducers:s=>{s.addCase(T.pending,e=>{e.loading=!0,e.error=null}).addCase(T.fulfilled,(e,r)=>{e.loading=!1,e.error=null,e.employerId=r.payload}).addCase(T.rejected,e=>{e.loading=!1,e.error="error"}).addCase(k.pending,e=>{e.loading=!0,e.error=null}).addCase(k.fulfilled,(e,r)=>{e.loading=!1,e.error=null,e.employerId={...e.employerId,...r.payload}}).addCase(k.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message})}}),ca=oa.reducer,Ra=Object.freeze(Object.defineProperty({__proto__:null,EmployerProfileInfo:Re,EmployerProfileTotalAmount:ee,changeEmployerProfileImage:Ne,editEmployerThunk:k,employerParseSlice:ca,fetchEmployerId:T,getEmployerId:H,getEmployerLoading:Q},Symbol.toStringTag,{value:"Module"}));export{Re as E,Pa as G,Oa as a,H as b,Q as c,T as d,Ne as e,U as f,ra as g,Aa as h,N as i,M as j,qa as k,wa as l,Ra as m,L as t};
