import{l as E,n as u,r as s,j as e,I as f,p as se,B as ae,u as _e,A as de,h as me,o as U,O as ue,c as he,i as xe,k as pe,D as fe,T as ge,R as je}from"./index-Cux8sda1.js";import{M as re}from"./modal-BR27MEf1.js";import{E as N}from"./editableCard-BNSd-vHU.js";import{o as O}from"./alertSlice-XeBTN8B3.js";import{L as ye}from"./link-B95gzaLk.js";import{d as ve}from"./user_image-CruVt77w.js";import{e as Ce,h as Se}from"./teacherParseSlice-z7KSx3F7.js";import"./teacherThunk-qU_2Y3xX.js";import{g as P,a as be,b as Ne,c as Te}from"./teacherIdSelector-B5d_Me-C.js";import{A as Ie}from"./workerSelect-N9ju4zO7.js";import"./index-CO9axSa1.js";import{u as Le,n as ke,m as ze,o as qe,p as we,l as Be,v as De}from"./oftenUsedSelector-B4R2CTqR.js";import{Z as Ae}from"./index-f2PSOyoQ.js";import{u as $e}from"./index.esm-DQmSsb0O.js";import{F as Me}from"./form-C3mZZqBW.js";import{n as Oe,D as Ee,E as Ue,F as Pe,o as Fe}from"./ratingSlice-DLA5aEZY.js";import{g as k,a as Ge}from"./teacherSalarySlice-q9AW59e2.js";import{g as Re}from"./selectors-DEcL0ux_.js";const Ve="_app_school_theme_1dzqd_1",He="_filter_1dzqd_13",Ze="_filter__container_1dzqd_19",Ke="_filter__select_1dzqd_28",Qe="_filter__age_1dzqd_31",Je="_filter__input_1dzqd_36",Ye="_filter__status_1dzqd_40",We="_filter__inner_1dzqd_45",Xe="_filter__radio_1dzqd_51",es="_yellow_1dzqd_55",ss="_red_1dzqd_58",as="_filter__switch_1dzqd_61",ts="_inputAge_1dzqd_67",rs="_submitBtn_1dzqd_71",ns="_extraClasses_1dzqd_80",is="_successMess_1dzqd_84",i={app_school_theme:Ve,filter:He,filter__container:Ze,filter__select:Ke,filter__age:Qe,filter__input:Je,filter__status:Ye,filter__inner:We,filter__radio:Xe,yellow:es,red:ss,filter__switch:as,inputAge:ts,submitBtn:rs,extraClasses:ns,successMess:is},ls=({isOpen:l,onClose:r,onUpdate:_,teacherId:S})=>{const h=E(),t=u(P),x=u(Le),o=u(ke),g=u(ze),[n,p]=s.useState(""),[j,T]=s.useState(""),[I,L]=s.useState(""),[z,B]=s.useState(""),[y,D]=s.useState(""),[d,b]=s.useState(""),[v,F]=s.useState(""),[G,R]=s.useState(null),[V,H]=s.useState(""),[Z,K]=s.useState([]),[q,ie]=s.useState("black"),[Q,J]=s.useState(),[Y,W]=s.useState(),[X,A]=s.useState(""),[ea,$]=s.useState(!0),le=g?.map(a=>({value:a?.id,label:a?.name})),{request:ce}=_e();s.useEffect(()=>{n&&n!==t?.user?.username?(async()=>{try{const ee=await await ce(`${de}Users/username-check/`,"POST",JSON.stringify({username:n}),me());ee.exists===!0?(A(e.jsxs("p",{className:i.errorMess,children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation",style:{color:"#f15c5c"}}),"Username band"]})),$(!1)):ee.exists===!1&&(A(e.jsxs("p",{className:i.successMess,children:[e.jsx("i",{className:"fa-solid fa-circle-check"}),"Username bo'sh"]})),$(!0))}catch(M){console.error("Error checking username:",M),A("Error checking username"),$(!1)}})():(A(e.jsx("p",{children:"Username kiriting"})),$(!1))},[n,t]),s.useEffect(()=>{h(qe())},[]),s.useEffect(()=>{t&&(R(t?.salary_percentage),J(t?.working_hours),T(t.user?.name),L(t.user?.surname),b(t.user?.phone),F(t.user?.birth_date),D(t?.teacher_salary_type),H(t?.class_type),W(t?.class_salary),p(t?.user?.username),B(t?.user?.father_name),K(t?.subject?.map(a=>({value:a?.id,label:a?.name}))))},[t]);const oe=()=>{if(!t)return;const a={user:{name:j,surname:I,phone:d,age:v,username:n,father_name:z},teacher_salary_type:y,class_type:V,subject:Z.map(M=>M?.value),color:q,working_hours:+Q,salary_percentage:+G,class_salary:Y};h(Ce({id:t.id,updateTeacher:a})).then(()=>{_(a),h(O({type:"success",status:!0,msg:"Ma'lumot muvofaqqiyatli o'zgartirildi"})),r()})};return l?e.jsx(re,{active:l,setActive:r,children:e.jsxs("div",{className:i.filter,children:[e.jsx("h1",{children:"Ma'lumotlarni o'zgartirish"}),e.jsxs("div",{className:i.filter__container,children:[e.jsxs("div",{className:i.filter__age,children:[e.jsx(f,{type:"text",title:X&&e.jsx("p",{className:i.mess,children:X}),extraClassName:i.filter__input,placeholder:"Username",onChange:a=>p(a.target.value),value:n}),e.jsx(f,{type:"text",title:"Ism",extraClassName:i.filter__input,placeholder:"Ism",onChange:a=>T(a.target.value),value:j}),e.jsx(f,{type:"text",title:"Familiya",extraClassName:i.filter__input,placeholder:"Familiya",onChange:a=>L(a.target.value),value:I}),e.jsx(f,{type:"text",title:"Otasing ismi",extraClassName:i.filter__input,placeholder:"Otasing ismi",onChange:a=>B(a.target.value),value:z}),e.jsx(f,{type:"number",title:"Tel raqami",extraClassName:i.filter__input,placeholder:"Tel raqami",onChange:a=>b(a.target.value),value:d}),e.jsx(f,{type:"date",extraClassName:i.inputAge,placeholder:"Tug'ilgan yili",title:"Tug'ilgan yili",onChange:a=>F(a.target.value),value:v}),e.jsx(f,{type:"number",extraClassName:i.inputAge,placeholder:"Ustama foiz",title:"Ustama foiz",onChange:a=>R(a.target.value),value:G}),e.jsx(Ie,{options:le,onChange:K,extraClass:i.multiSelect,value:Z,fontSize:15}),e.jsx(se,{extraClass:i.extraClasses,name:"category",options:x,defaultValue:y?.id??y,onChangeOption:D,title:"Toifa"}),e.jsx(se,{extraClass:i.extraClasses,name:"class_type",options:o,onChangeOption:H,title:"Sinf",defaultValue:V}),e.jsx(f,{type:"number",title:"Darslik soat",extraClassName:i.filter__input,placeholder:"Darslik soat",onChange:a=>J(a.target.value),value:Q}),e.jsx(f,{type:"number",title:"Sinfdan oylik",extraClassName:i.filter__input,placeholder:"Darslik soat",onChange:a=>W(a.target.value),value:Y}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",marginBottom:"10px"},children:[e.jsx("h3",{children:"Rang qushish :"})," ",e.jsx("div",{style:{backgroundColor:q||"black",width:"30px",height:"30px",borderRadius:"5px",boxShadow:q==="#ffffff"?"0 0 5px 0":null}})]}),e.jsx(Ae,{style:{width:"30rem",height:"15rem"},color:q,onChange:ie})]})]}),e.jsx("div",{style:{display:"flex",gap:"5px"},children:e.jsx(ae,{children:"Resume O'zgartirish"})}),e.jsxs("div",{className:i.filter__switch,children:[e.jsx("div",{}),e.jsx(ae,{extraClass:i.submitBtn,type:"submit",children:"Button",onClick:oe})]})]})]})}):null},cs="_group_1lesa_1",os="_groupText_1lesa_8",_s="_groupText_text_1lesa_12",ds="_cardBg_1lesa_20",ms="_groupList_1lesa_27",us="_leftGroup_1lesa_35",hs="_lists_1lesa_42",xs="_list_title_1lesa_46",ps="_list_number_1lesa_50",fs="_groupImgBox_1lesa_54",gs="_circleImg_1lesa_62",js="_groupImage_1lesa_71",ys="_groupsContainer_1lesa_75",c={group:cs,groupText:os,groupText_text:_s,cardBg:ds,groupList:ms,leftGroup:us,lists:hs,list_title:xs,list_number:ps,groupImgBox:fs,circleImg:gs,groupImage:js,groupsContainer:ys},vs="data:image/svg+xml,%3csvg%20width='137'%20height='201'%20viewBox='0%200%20137%20201'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M26.9326%2043.537L25.0748%2044.3008C18.8223%2035.375%2013.4924%2025.8373%209.16713%2015.8345L8.35835%2013.9641L1.04492%20-2.94922H73.1345L58.9841%2017.0984C55.717%2021.727%2054.77%2027.6048%2056.4181%2033.0252L61.1195%2040.0053H47.0151H44.8101C38.6777%2040.0053%2032.6044%2041.2051%2026.9326%2043.537Z'%20fill='%23BAE6FD'/%3e%3cpath%20d='M56.547%2017.2346L71.0056%20-4H153.582V206H71.0056L54.8169%20184.263C53.1426%20182.014%2052.2383%20179.286%2052.2383%20176.483C52.2383%20174.172%2052.9821%20171.924%2054.3598%20170.069L61.5902%20160.335C63.8029%20157.356%2067.2948%20155.6%2071.0056%20155.6L86.5556%20149.3L95.6711%20137.75L106.395%20123.575L109.613%20109.925V96.8V85.25L104.25%2072.65L95.6711%2058.475L84.4108%2049.55L71.0056%2043.25L57.6004%2040.1L54.1034%2031.5405C52.9033%2028.6027%2052.8408%2025.3232%2053.9283%2022.3419C54.5864%2020.5376%2055.4661%2018.822%2056.547%2017.2346Z'%20fill='%2300C2FF'/%3e%3cpath%20d='M22.3525%20165.728L29.2537%20156.125L64.2537%20159.275C56.7106%20170.015%2056.6111%20184.304%2064.004%20195.148L71.0448%20205.475H0L10.4327%20185.204C13.9206%20178.427%2017.9047%20171.918%2022.3525%20165.728Z'%20fill='%23BAE6FD'/%3e%3c/svg%3e",Cs="/assets/group-img-B8FIKDnQ.svg";s.memo(()=>e.jsx("div",{className:c.groupsContainer,children:Js.map(l=>e.jsxs(N,{extraClass:c.group,children:[e.jsx("img",{className:c.cardBg,src:vs,alt:""}),e.jsx("div",{className:c.groupText,children:e.jsxs("span",{className:c.groupText_text,children:[l,"-guruh"]})}),e.jsxs("div",{className:c.groupList,children:[e.jsxs("div",{className:c.leftGroup,children:[e.jsxs("div",{className:c.lists,children:[e.jsx("h2",{className:c.list_title,children:"Student number:"}),e.jsx("h2",{className:c.list_number,children:"12"})]}),e.jsxs("div",{className:c.lists,children:[e.jsx("h2",{className:c.list_title,children:"Student number:"}),e.jsx("h2",{className:c.list_number,children:"12"})]}),e.jsxs("div",{className:c.lists,children:[e.jsx("h2",{className:c.list_title,children:"Student number:"}),e.jsx("h2",{className:c.list_number,children:"12"})]})]}),e.jsx("div",{className:c.groupImgBox,children:e.jsx("div",{className:c.circleImg,children:e.jsx("img",{className:c.groupImage,src:Cs,alt:""})})})]})]},l))}));const Ss="_info_9v4is_25",bs="_info__avatar_9v4is_30",Ns="_info__image_9v4is_36",Ts="_info__role_9v4is_42",Is="_info__text_9v4is_49",Ls="_info__addInfo_9v4is_62",ks="_info__balance_9v4is_76",zs="_info__money_9v4is_87",C={info:Ss,info__avatar:bs,info__image:Ns,info__role:Ts,info__text:Is,info__addInfo:Ls,info__balance:ks,info__money:zs},ja=s.memo(({active:l,setActive:r,setActiveModal:_,newImage:S,system:h})=>{const t=u(be),x=E(),o=u(P),[g,n]=s.useState({}),p=u(U);console.log(p);const j=p.id;s.useEffect(()=>{x(we({branch:j})),x(Be({branch:j})),x(De(j)),o&&n(o)},[o]),s.useEffect(()=>{g?.msg&&x(O({type:"error",status:!0,msg:g?.msg}))},[g?.msg]);const T=I=>{n(L=>({...L,...I}))};return e.jsxs(N,{onClick:()=>r(!0),extraClass:C.info,title:e.jsx("i",{className:"fas fa-edit"}),children:[t?e.jsx(ue,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:C.info__avatar,children:[e.jsx("img",{onClick:()=>_("changeImage"),className:C.info__image,src:o.user?.profile_img??ve,alt:""}),e.jsx("h1",{children:o.user?.username}),e.jsx("h2",{className:C.info__role,children:"Teacher"})]}),e.jsxs("div",{className:C.info__text,children:[e.jsx("h3",{style:{color:"red"},children:g?.msg}),e.jsxs("p",{children:["Ism: ",e.jsx("span",{children:o.user?.name})]}),e.jsxs("p",{children:["Familiya: ",e.jsx("span",{children:o.user?.surname})]}),e.jsxs("p",{children:["Otasinig ismi: ",e.jsx("span",{children:o.user?.father_name})]}),e.jsxs("p",{children:["Telefon raqami: ",e.jsx("span",{children:o.user?.phone})]}),e.jsxs("p",{children:["Yoshi: ",e.jsx("span",{children:o.user?.age})]}),e.jsxs("p",{children:["Tug'ilgan sana: ",e.jsx("span",{children:o.user?.birth_date})]}),e.jsxs("p",{children:["Darslik soat: ",e.jsx("span",{children:o?.working_hours})]}),e.jsx("div",{className:C.info__addInfo,children:e.jsx("i",{className:"fas fa-plus"})})]})]}),e.jsx(ye,{to:`teacherSalaryPage/${o?.id}`,children:e.jsxs(N,{extraClass:C.info__balance,children:[e.jsx("h2",{children:"Balans"}),e.jsx("p",{children:"Summa"}),e.jsxs("div",{className:C.info__money,children:[h.name==="center"?e.jsx("h2",{children:"$ 570.000"}):null,e.jsx("p",{children:"$ 390.000"})]})]})}),e.jsx(ls,{isOpen:l,onClose:()=>r(!1),onUpdate:T,teacherId:g.id})]})}),qs={salaries:[],loading:!1,error:null},ne=he({name:"giveTeacherSalarySlices",initialState:qs,reducers:{addSalary:(l,r)=>{l.salaries.push(r.payload)}},extraReducers:l=>{l.addCase(k.pending,r=>{r.loading=!0}).addCase(k.fulfilled,(r,_)=>{r.loading=!1,r.salaries.push(_.payload)}).addCase(k.rejected,(r,_)=>{r.loading=!1,r.error=_.payload})}}),{addSalary:ws}=ne.actions,Bs=ne.reducer,Ds="_amount_iziln_1",As="_active_iziln_18",$s="_amount__header_iziln_21",Ms="_items_iziln_26",Os="_items__inner_iziln_30",Es="_amount__content_iziln_35",Us="_form_iziln_54",Ps="_items__active_iziln_74",Fs="_form__inner_iziln_91",m={amount:Ds,active:As,amount__header:$s,items:Ms,items__inner:Os,amount__content:Es,form:Us,items__active:Ps,form__inner:Fs},Gs=[-1,34.8,70.4],Rs=s.memo(({active:l,setActive:r,salary_id:_,user_id:S})=>{const{register:h,handleSubmit:t}=$e(),[x,o]=s.useState(Oe[0]),[g,n]=s.useState(0),[p,j]=s.useState(0),T=u(U),[I,L]=s.useState(1),[z,B]=s.useState(""),y=E();u(Re);const D=async d=>{const b={salary:Number(p),comment:z,salary_id:_,payment:I,teacher:S,date:d.date,branch:T.id};try{const v=await y(k(b));k.fulfilled.match(v)?(y(ws(v.payload)),y(O({type:"success",status:!0,msg:"Oylik muvofaqqiyatli to'landi"}))):k.rejected.match(v)&&y(O({type:"error",status:!0,msg:"Internet yoki serverda xatolik, qayta urinib ko'ring"}))}catch(v){console.error("An error occurred:",v)}y(Ge(_)),r(!l)};return e.jsxs(N,{extraClass:xe(m.amount,{[m.active]:l==="balanceIn"}),titleType:"",onClick:()=>r("balance"),children:[e.jsx("div",{className:m.amount__header,children:e.jsxs("div",{className:m.items,children:[e.jsxs("div",{className:m.items__inner,children:[e.jsx("img",{src:Ee,alt:""}),e.jsx("p",{children:"12 000 000"})]}),e.jsxs("div",{className:m.items__inner,children:[e.jsx("img",{src:Ue,alt:""}),e.jsx("p",{children:"11 000 000"})]}),e.jsxs("div",{className:m.items__inner,children:[e.jsx("img",{src:Pe,alt:""}),e.jsx("p",{children:"11 000 000"})]})]})}),e.jsx("div",{className:m.amount__content,children:e.jsxs("div",{className:m.form,children:[e.jsx("h1",{children:x}),e.jsxs("div",{className:m.items,children:[Fe.map((d,b)=>e.jsxs("div",{className:m.items__inner,onClick:()=>{n(b),L(b+1)},children:[e.jsx("p",{children:d.name}),e.jsx("img",{src:d.image,alt:""})]})),e.jsx("div",{className:m.items__active,style:{left:`${Gs[g]}%`}})]}),e.jsx(Me,{onSubmit:t(D),children:e.jsxs("div",{className:m.form__inner,children:[e.jsx(f,{title:"Kuni",register:h,name:"date",type:"date",defaultValue:p,onChange:d=>j(d.target.value)}),e.jsx(f,{title:"To'lov miqdori",...h("amount"),placeholder:"Summa",type:"number",defaultValue:p,onChange:d=>j(d.target.value)}),e.jsx(f,{title:"Sababi",...h("comment"),placeholder:"Sababi",type:"text",defaultValue:z,onChange:d=>B(d.target.value)})]})})]})})]})}),Vs="_groupsContainer_f9wxj_75",Hs="_classColor_f9wxj_90",Zs="_classProfile_f9wxj_97",Ks="_theadBody_f9wxj_104",Qs="_classList_f9wxj_111",w={groupsContainer:Vs,classColor:Hs,classProfile:Zs,theadBody:Ks,classList:Qs},ya=s.memo(()=>{const{id:l}=u(U),r=E(),_=pe(),S=u(P),h=u(Ne),t=u(Te),x=S?.group;s.useEffect(()=>{r(Se({id:l}))},[]);const o=()=>h.map((n,p)=>e.jsxs("tr",{children:[e.jsx("td",{children:p+1}),e.jsx("td",{onClick:()=>_(`../students/profile/${n?.id}`),children:`${n?.name} ${n?.surname}`}),e.jsx("td",{children:n?.number}),e.jsx("td",{children:n?.parent_number}),e.jsx("td",{children:n?.debt})]}));console.log(x);const g=o();return e.jsxs("div",{className:w.groupsContainer,children:[x?.length===0?e.jsx(N,{children:e.jsx("h1",{children:"O'qituvchida guruhi yo'q"})}):x?.map((n,p)=>e.jsxs(N,{extraClass:w.classProfile,titleType:"",children:[e.jsx("h1",{children:"Sinfi"}),e.jsx("div",{onClick:()=>_(`../groups/groupInfo/${n?.id}`),className:w.classColor}),e.jsxs("h1",{children:[n?.class_number?.number,"-",n?.color?.name]})]})),e.jsxs(N,{extraClass:w.classList,children:[e.jsx("h1",{children:"O'quvchilar ro'yxati"}),h?.length?t?e.jsx(fe,{}):e.jsxs(ge,{children:[e.jsx("thead",{className:w.theadBody,children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Ism familiya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Tel (ota-ona)"}),e.jsx("th",{children:"Qarz"})]})}),e.jsx("tbody",{children:g})]}):e.jsx("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("h1",{style:{fontSize:"3rem"},children:"O'quvchilar yo'q"})})]})]})}),Js=[1,2],Ys="_filter_10b8w_1",Ws="_filter__container_10b8w_9",te={filter:Ys,filter__container:Ws},Xs=je.memo(({active:l,setActive:r,salary_id:_,user_id:S})=>e.jsx(re,{active:l,setActive:r,children:e.jsxs("div",{className:te.filter,children:[e.jsx("h1",{children:"Oylik berish "}),e.jsx("div",{className:te.filter__container,children:e.jsx(Rs,{active:l,setActive:r,salary_id:_,user_id:S})})]})})),va=Object.freeze(Object.defineProperty({__proto__:null,GiveSalaryModal:Xs,giveTeacherSalarySlices:Bs},Symbol.toStringTag,{value:"Module"}));export{Xs as G,ya as S,ja as T,va as i};
