import{u as T,j as e,I as S,e as P,aa as R,h as q,A as w,i as A,ab as M,T as y,a as v,r as x,b as O,Q as E,g as $,D,bB as F,bC as u}from"./index-9ggpSpOh.js";import{R as L}from"./radio-Cmxiq3vt.js";import"./pagination-TgzvL7nQ.js";import{o as U}from"./otchotAccountingSlice-DL3yQoYC.js";import{h as B,j as H,d as J}from"./capitalSelector-C22xHudq.js";import"./confirmModal-Dyb-8OvR.js";const Q="_accounting_1y3qh_1",z="_accounting__payment_1y3qh_12",G="_accounting__header_1y3qh_12",g={accounting:Q,accounting__payment:z,accounting__header:G},K=({paymentType:t,setSelectedRadio:s,ot:n,to:h,setOt:r,setTo:a,radio:c,onChange:k})=>(T(),e.jsxs("div",{className:g.accounting,children:[e.jsxs("div",{className:g.accounting__header,children:[e.jsx(S,{type:"date",name:"ot",onChange:i=>r(i.target.value),value:n?.ot}),e.jsx(S,{type:"date",name:"do",onChange:i=>a(i.target.value),value:h?.to})]}),e.jsx("div",{className:g.accounting__payment,children:t?.map(i=>e.jsx(L,{children:i.name,checked:c===i.id,onChange:()=>s(i.id)}))})]})),V="_ul_3qyer_1",W="_other__item_3qyer_10",X="_active_3qyer_17",b={ul:V,other__item:W,active:X},Y=({filter:t,activeMenu:s,setPage:n,setActive:h})=>e.jsx("ul",{className:b.ul,children:t.map((r,a)=>e.jsx("li",{className:P(b.other__item,{[b.active]:s===r.name}),onClick:()=>{n(r.name),h(r.name)},children:r.label},a))}),_=R("inkasatsiyaSlice/inkasatsiyaThunk",async({res:t,branchId:s})=>{const{request:n}=q();return await n(`${w}Encashment/encashment/?branch=${s}/`,"POST",JSON.stringify(t),A())}),Z={loading:!1,error:!1,inkasatsiya:[]},ee=M({name:"inkasatsiyaSlice",initialState:Z,reducers:{},extraReducers:t=>t.addCase(_.pending,s=>{s.loading=!0,s.error=!1}).addCase(_.fulfilled,(s,n)=>{s.error=!1,s.loading=!1,s.inkasatsiya=n.payload}).addCase(_.rejected,s=>{s.error=!0,s.loading=!1})}),{reducer:ae}=ee,se=({students:t,extraClass:s,formatSalary:n})=>{const r=t?.students?.student_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[a.name,"  ",a.surname]}),e.jsx("td",{children:a.payment_type_name}),e.jsx("td",{children:n(a.payment_sum)}),e.jsx("td",{children:a.date})]}));return e.jsx("div",{className:s,children:e.jsxs(y,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"To'lov"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:r})]})})},te=t=>t.inkasatsiyaSlice?.inkasatsiya,ne=({overhead:t,extraClass:s,formatSalary:n})=>{const r=t?.overheads?.overhead_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.payment.name}),e.jsx("td",{children:n(a.price)}),e.jsx("td",{children:a.created})]}));return e.jsx("div",{className:s,children:e.jsxs(y,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:r})]})})},re=({capital:t,extraClass:s,formatSalary:n})=>{const r=t?.capitals?.capital_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.payment_type.name}),e.jsx("td",{children:n(a.price)}),e.jsx("td",{children:a.added_date})]}));return e.jsx("div",{className:s,children:e.jsxs(y,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:r})]})})},le=({teacher:t,extraClass:s,formatSalary:n})=>{const r=t?.teachers?.teacher_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[a.name," ",a.surname]}),e.jsx("td",{children:a.payment_type_name}),e.jsx("td",{children:n(a.salary)}),e.jsx("td",{children:a.date})]}));return e.jsx("div",{className:s,children:e.jsxs(y,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:r})]})})},ce=({workers:t,extraClass:s,formatSalary:n})=>{const r=t?.workers?.worker_data?.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsxs("td",{children:[a.name," ",a.surname]}),e.jsx("td",{children:a.payment_type_name}),e.jsx("td",{children:n(a.salary)}),e.jsx("td",{children:a.date})]}));return e.jsx("div",{className:s,children:e.jsxs(y,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov turi"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:r})]})})},ie="_overalMain_1211f_1",de="_overal_1211f_1",he="_inkasatsiya_1211f_17",oe="_table_1211f_28",o={overalMain:ie,overal:de,inkasatsiya:he,table:oe},xe=[{name:"studentsPayments",label:"student payment"},{name:"teachersSalary",label:"teacher salary"},{name:"employeesSalary",label:"employer salary"},{name:"overhead",label:"overhead"},{name:"capital",label:"capital"}],je={inkasatsiyaSlice:ae,capital:J},ge=()=>{const t=T(),s=v(B),[n,h]=x.useState("studentsPayments"),r=O();let{locationId:a}=E();const[c,k]=x.useState([]),[i,N]=x.useState([]),l=v(te),[m,f]=x.useState([]),p=v($);x.useEffect(()=>{c.length&&i.length&&m>0&&t(_({res:{do:c,ot:i,payment_type:m,branch:p},branchId:p})),t(H())},[c,i,m,p]);const d=j=>Number(j).toLocaleString(),C=()=>{switch(n){case"studentsPayments":return e.jsxs("h2",{children:["o'quvchilarning umimiy to'lovi : ",l?.students?.student_total_payment?d(l?.students?.student_total_payment):0," "]});case"teachersSalary":return e.jsxs("h2",{children:["O'qituvchilarning umumiy to'lovi : ",l?.teachers?.teacher_total_salary?d(l?.teachers?.teacher_total_salary):0," "]});case"employeesSalary":return e.jsxs("h2",{children:["Ishchilarning umumiy to'lovi : ",l?.workers?.worker_total_salary?d(l?.workers?.worker_total_salary):0," "]});case"overhead":return e.jsxs("h2",{children:["overheadning umumiy to'lovi : ",l?.overheads?.total_overhead_payment?d(l?.overheads?.total_overhead_payment):0," "]});case"capital":return e.jsxs("h2",{children:["capitalning umumiy to'lovi : ",l?.capitals?.total_capital?d(l?.capitals?.total_capital):0]})}},I=x.useCallback(j=>{t(U({value:j})),r(`./${j}`)},[r]);return e.jsx(D,{reducers:je,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",padding:"2rem"},children:[l?.overall?e.jsxs("div",{className:o.overalMain,children:["Umumiy : ",d(l?.overall)]}):null,e.jsxs("div",{className:o.overal,children:[C(),e.jsx("div",{className:o.inkasatsiya,children:e.jsx(K,{activeMenu:n,paymentType:s,to:c,setTo:k,ot:i,setOt:N,setSelectedRadio:f,radio:m})})]}),e.jsx(Y,{activeMenu:n,setActive:h,setPage:I,filter:xe}),e.jsxs(F,{children:[e.jsx(u,{path:"teachersSalary",element:e.jsx(le,{formatSalary:d,extraClass:o.table,teacher:l,path:"teachersSalary",locationId:a})}),e.jsx(u,{path:"employeesSalary",element:e.jsx(ce,{formatSalary:d,extraClass:o.table,path:"employeesSalary",workers:l,locationId:a})}),e.jsx(u,{path:"overhead",element:e.jsx(ne,{formatSalary:d,extraClass:o.table,overhead:l,path:"overhead",locationId:a})}),e.jsx(u,{path:"studentsPayments",element:e.jsx(se,{formatSalary:d,extraClass:o.table,students:l,locationId:a})}),e.jsx(u,{path:"capital",element:e.jsx(re,{formatSalary:d,extraClass:o.table,capital:l,path:"capital",locationId:a})})]})]})})};export{ge as Inkasatsiya};
