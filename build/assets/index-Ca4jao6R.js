import{r as s,u as q,af as z,ag as H,a as n,ah as M,j as a,ai as $,aj as w,P as F,ak as N,al as R,C as U,am as V,o as d,an as O,i as B,A as G,k as J,ao as K}from"./index-B1KXs2zi.js";import{ap as ne}from"./index-B1KXs2zi.js";import{g as Q}from"./searchSelector-CJfw-E7m.js";const W=e=>e.timeTableListSlice.data,X=e=>e.timeTableListSlice.loading,Y="_timeTable_nfy34_1",Z="_timeTable__table_nfy34_7",p={timeTable:Y,timeTable__table:Z},ae=()=>{s.useEffect(()=>{e(z()),e(H())},[]);const e=q(),o=n(W),g=n(M),c=n(X),[f,r]=s.useState(!1),[i,u]=s.useState(null),[ee,C]=s.useState(!1),[S,l]=s.useState(!1),[_,h]=s.useState(!1),m=n(Q);let x=s.useMemo(()=>10,[]);const[D,j]=s.useState([]),[L,T]=s.useState(1),v=s.useMemo(()=>{const t=o?.slice();return T(1),m?t.filter(b=>b.name?.toLowerCase().includes(m.toLowerCase())):t},[o,T,m]),I=t=>{e(V(t)),e(d({type:"success",status:!0,msg:"Vaqt qo'shildi"})),r(!1),l(!0)},P=t=>{const b=o?.filter(k=>k.id===i?.id)[0];e(O({id:i?.id,obj:t})),e(d({type:"success",status:!0,msg:`${b?.name}ni malumotlari o'zgardi`})),l(!0)},{request:A}=B(),y=()=>{A(`${G}SchoolTimeTable/hours-list-update/${i.id}`,"DELETE",null,J()).then(t=>{e(K(i.id)),e(d({status:!0,type:"success",msg:t.msg})),u(!1)}).catch(t=>{console.log(t)})},E=()=>{h(!0)};return a.jsxs("div",{className:p.timeTable,children:[a.jsx($,{isCreate:f,setIsCreate:r,setIsFilter:C,setStatus:l}),a.jsxs("div",{className:p.timeTable__table,children:[a.jsx(w,{data:D,setIsChange:u,loading:c,setStatus:l}),a.jsx(F,{setCurrentTableData:j,users:v,currentPage:L,pageSize:x,onPageChange:t=>{T(t)}})]}),a.jsx(N,{classInput:g,active:S?!1:f,setActive:r,onSubmit:I,loading:c}),a.jsx(R,{classInput:g,active:S?!1:i,setActive:u,onSubmit:P,loading:c,onDelete:E}),a.jsx(U,{type:"danger",active:_,setActive:h,onClick:y})]})};export{ae as TimeTableListPage,ne as timeTableListSlice};
