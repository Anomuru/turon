import{j as e,B as q,M as b,aJ as M,I as p,r as n,dv as R,S as k,a2 as D,a as g,u as T,dw as Z,D as L,dx as ee,dy as ae,i as O,A as B,k as H,g as te,b as se,dz as ne,dA as ie,dB as re,d0 as ce,dC as le,dD as oe,dE as de,dF as me,dG as ue,o as pe}from"./index-B1KXs2zi.js";import{g as $,a as ge,b as xe,c as he,d as je,e as _e}from"./capitalSelector-C2TPQAkZ.js";import{g as fe}from"./branchSelector-u3o7YCHK.js";const ye=({caunt:t,active:s,setActiveModal:a,isCanAdd:i})=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx(q,{onClick:()=>a(!s),children:e.jsx("i",{className:"fa fa-plus"}),type:"editPlus"})}),e.jsxs("div",{style:{padding:"2rem 0",display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("h1",{style:{fontWeight:"bolder"},children:"Capital"}),e.jsxs("span",{style:{fontSize:"1.8rem",display:"flex",gap:"4rem"},children:["Jami (Down cost): ",t]})]})]}),Ce="_categoryHeader_zblkj_1",ve={categoryHeader:Ce},Ie=({setActiveModal:t,activeModal:s})=>e.jsxs("div",{className:ve.categoryHeader,children:[e.jsx("h2",{children:"Qo'shimcha kategoriyalar"}),e.jsx(q,{onClick:()=>t(!s),type:"editPlus",children:e.jsx("i",{className:"fa fa-plus"})})]}),Se="_capitalMain_18vau_1",be="_items__item_18vau_9",Me="_form_18vau_25",De="_loader_18vau_47",Ae="_loader__circle_18vau_51",j={capitalMain:Se,items__item:be,form:Me,loader:De,loader__circle:Ae},w=({setActiveModal:t,activeModal:s,changeItem:a,setChangedImages:i,handleSubmit:r,onClick:l,register:c})=>e.jsx("div",{children:e.jsxs(b,{setActive:t,active:s,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(Ne,{status:s,image:a?.images,setChangedImages:i}),e.jsxs(M,{extraClassname:j.form,onSubmit:r(l),children:[e.jsx(p,{required:!0,register:c,name:"name",placeholder:"Name"}),e.jsx(p,{required:!0,register:c,name:"id_number",placeholder:"Id number"})]})]})]})}),Ne=({index:t,setChangedImages:s,image:a,status:i})=>{n.useEffect(()=>{i&&l({})},[i]);const[r,l]=n.useState({}),{getInputProps:c,getRootProps:m}=R({onDrop:o=>{l(o[0]),s(o[0])}}),d=n.useCallback(({img:o,image:u})=>o?.path?e.jsx("img",{src:URL.createObjectURL(o),alt:""}):i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{required:!0,type:"file",...c()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...c()})]}),[r,a]);return e.jsx("div",{className:j.items__item,...m(),children:e.jsx(d,{img:r,image:a})})},Pe="_capitalInside_lr226_1",ke="_items__item_lr226_8",Ee="_form_lr226_24",C={capitalInside:Pe,items__item:ke,form:Ee},qe=n.memo(({setActiveModal:t,activeModal:s,register:a,handleSubmit:i,onClick:r,changeItem:l,setChangedImages:c,options:m,setSelectPayment:d,branches:o,setSelectedBranches:u})=>e.jsxs(b,{setActive:t,active:s,children:[e.jsx("h1",{children:"Add"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem",alignItems:"center"},children:[e.jsx(F,{status:s,image:l?.images,setChangedImages:c}),e.jsxs(M,{extraClassname:C.form,onSubmit:i(r),children:[e.jsx(p,{register:a,required:!0,name:"name",placeholder:"Nomi"}),e.jsx(k,{options:o,onChangeOption:u,title:"Branch ni tanlang"}),e.jsx(p,{register:a,required:!0,name:"id_number",type:"number",placeholder:"Raqami"}),e.jsx(p,{register:a,required:!0,name:"price",type:"number",placeholder:"Narxi"}),e.jsx(p,{register:a,required:!0,name:"total_down_cost",type:"number",placeholder:"Jami umumiy xarajat"}),e.jsx(p,{register:a,required:!0,name:"term",type:"number",placeholder:"Muddati (yil)"}),e.jsx(p,{register:a,required:!0,name:"curriculum_hours",placeholder:"Sanasi",type:"number"}),e.jsx(k,{options:m,onChangeOption:d,title:"To'lov turi"})]})]})]})),F=({index:t,setChangedImages:s,image:a,status:i})=>{n.useEffect(()=>{i&&l({})},[i]);const[r,l]=n.useState({}),{getInputProps:c,getRootProps:m}=R({onDrop:o=>{l(o[0]),s(o[0])}}),d=n.useCallback(({img:o,image:u})=>o?.path?e.jsx("img",{src:URL.createObjectURL(o),alt:""}):i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{name:"file",type:"file",...c()})]}):u?.url?e.jsx("img",{src:u.url,alt:""}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"far fa-image"}),e.jsx("input",{type:"file",...c()})]}),[r,a]);return e.jsx("div",{className:C.items__item,...m(),children:e.jsx(d,{img:r,image:a})})},Re=n.memo(({register:t,handleSubmit:s,onClick:a,editModal:i,setEditModal:r,changeItem:l,setChangedImages:c})=>e.jsxs(b,{setActive:r,active:i,children:[e.jsx("h1",{children:"Change"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",padding:"2rem"},children:[e.jsx(F,{status:i,image:l?.images,setChangedImages:c}),e.jsxs(M,{extraClassname:C.form,onSubmit:s(a),children:[e.jsx(p,{register:t,name:"name"}),e.jsx(p,{register:t,name:"id_number"})]})]})]})),we=n.memo(()=>{const{register:t,setValue:s,handleSubmit:a}=D(),i=g($),r=T(),[l,c]=n.useState(!1),[m,d]=n.useState({}),[o,u]=n.useState([]),_=g(ge);n.useEffect(()=>{r(Z())},[]);const h=g(xe),A=f=>{c(!l),s("name",""),s("id_number",""),r(ae({data:f,changedImages:o}))},v=()=>i===!0?e.jsx("div",{className:j.loader,children:e.jsx("div",{className:j.loader__circle,children:e.jsx("div",{})})}):e.jsx("div",{children:h?.length});return e.jsxs("div",{className:j.capitalMain,children:[e.jsx(ye,{caunt:v(),setActiveModal:c,active:l,isCanAdd:_[0]?.add_capitalcategory}),i?e.jsx(L,{}):e.jsx(ee,{isCanView:_[0]?.view_capitalcategory,capitalData:h}),e.jsx(w,{changeItem:m,setChangedImages:u,onClick:A,register:t,handleSubmit:a,setActiveModal:c,activeModal:l})]})}),Te=()=>{const[t,s]=n.useState(!1),{register:a,setValue:i,handleSubmit:r}=D(),{request:l}=O(),c=m=>{l(`${B}Capital/capital_category/`,"POST",JSON.stringify(m),H()).then(d=>{console.log(d)}).catch(d=>{console.log(d)})};return e.jsxs("div",{children:[e.jsx(Ie,{activeModal:t,setActiveModal:s}),e.jsx(w,{activeModal:t,setActiveModal:s,register:a,handleSubmit:r,onClick:c})]})},E=[{name:"category",label:"Category"},{name:"subCategory",label:"Sub Category"}],Fe=n.memo(()=>{const t=T(),{register:s,setValue:a,handleSubmit:i}=D(),{id:r}=g(te),{request:l}=O(),c=se(),m=g(he),d=g(je);n.useEffect(()=>{t(ne(r)),t(ie()),t(re(r)),t(ce())},[]);const o=g(_e),u=g($),_=g(fe),[h,A]=n.useState({}),[v,f]=n.useState([]),[U,z]=n.useState(),[Le,Oe]=n.useState([]),[N,J]=n.useState(E[0].name),[P,I]=n.useState(!1),[y,S]=n.useState(!1),[V,G]=n.useState([]),Q=()=>{l(`${B}Capital/capital_category/${r}/`,"DELETE",null,H()).then(x=>{t(pe({type:"success",status:!0,msg:x.msg})),c(-2)}).catch(x=>{console.log(x)})},W=x=>{I(!1),t(me({data:x,changedImages:v,selectPayment:U,selectedBranches:V,id:r})),a("name",""),a("id_number",""),a("price",""),a("total_down_cost",""),a("term",""),a("curriculum_hours","")},K=()=>u?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{onDelete:Q,editModal:y,setEditModal:()=>S(!y),capitalData:o}),e.jsx(de,{addModal:P,setAddModal:I,capitalData:m})]}),X=x=>{S(!y),t(ue({data:x,id:r})),a("name",""),a("id_number","")},Y=K();return e.jsxs("div",{className:C.capitalInside,children:[e.jsx(le,{activeMenu:N,setActiveMenu:J,categoryMenu:E}),N==="category"?Y:e.jsx(Te,{}),e.jsx(qe,{setSelectPayment:z,register:s,handleSubmit:i,onClick:W,activeModal:P,setActiveModal:I,setChangedImages:f,changeItem:h,options:d,branches:_,setSelectedBranches:G}),e.jsx(Re,{register:s,handleSubmit:i,onClick:X,editModal:y,setEditModal:S,setChangedImages:f,changeItem:h})]})});export{Fe as CapitalInside,we as CapitalPage};
