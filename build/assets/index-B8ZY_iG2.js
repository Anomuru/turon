import{n as m,r as s,j as e,T as W,l as $,o as N,D as pe,u as Y,A as q,h as R,B as U,i as ue,I as Q,p as E,m as Ee,k as ye,U as ke,P as Oe,a0 as we,a3 as xe,a4 as z}from"./index-Cux8sda1.js";import{M as re}from"./modal-BR27MEf1.js";import{P as ee}from"./pagination-Cj0p_t2O.js";import{m as ce,e as Le,f as Me,h as $e,S as Ie,i as Fe,j as He,n as ge,o as ze,p as qe,A as Re,a as Be,g as Ue,q as Je,r as Ve,b as Ye,d as Qe,c as Ke,E as Ge,T as We,l as Xe,P as Ze,k as et,s as tt}from"./paymentTable-UVUSGsB2.js";import{k as st,l as at,m as nt,n as je,p as ct,q as rt,r as lt,u as ot,v as it,w as dt,x as ht,y as mt,j as pt,z as ut,A as yt,B as xt,C as gt,D as jt,E as _t,F as vt,G as me,H as ft,I as St,J as bt,K as Ct}from"./otchotAccountingSlice-C41gM6yT.js";import{f as G,i as Dt}from"./capitalSelector-D7mI4_e4.js";import{c as Tt}from"./index-sxu4Z6A5.js";import{getSearchValue as te}from"./index-Dvh1lTlU.js";import{o as V}from"./alertSlice-XeBTN8B3.js";import{C as X}from"./confirmModal-DiNALKc8.js";import{L as Z}from"./link-B95gzaLk.js";import{F as _e}from"./form-C3mZZqBW.js";import{R as ve}from"./radio-c1ywR2KC.js";import{u as le}from"./index.esm-DQmSsb0O.js";import{AccountingFilter as At}from"./index-BpJUW_0R.js";import{M as Pt}from"./MultiPage-CgDPt1S_.js";import{D as Nt}from"./deletedTeachers-DtncJndw.js";import"./teacherParseSlice-z7KSx3F7.js";import"./teacherThunk-qU_2Y3xX.js";import"./seq-BPRV6kik.js";import"./cross-BXlnQeE0.js";import"./multiPageSlice-CecU3CKU.js";import"./switch-sjHY-EbU.js";import"./filters.module-C8GjSCwu.js";const Et="_accountingMain_1ek25_1",kt="_accounting__wrapper_1ek25_8",Ot="_wrapper__filter_1ek25_13",wt="_wrapper__middle_1ek25_17",Lt="_middle__box_1ek25_17",Mt="_typeExpenses_1ek25_37",$t="_changeType_1ek25_54",It="_form_1ek25_62",Ft="_overhead_1ek25_72",Ht="_table_1ek25_77",zt="_subHeader_1ek25_82",qt="_subHeader__subBtn_1ek25_85",Rt="_active_1ek25_90",Bt="_typeItem_1ek25_96",C={accountingMain:Et,accounting__wrapper:kt,wrapper__filter:Ot,wrapper__middle:wt,middle__box:Lt,typeExpenses:Mt,changeType:$t,form:It,overhead:Ft,table:Ht,subHeader:zt,subHeader__subBtn:qt,active:Rt,typeItem:Bt},Ut=({deletedStudent:t,formatSalary:p})=>{const n=m(te);let r=s.useMemo(()=>50,[]);const[c,u]=s.useState([]),[l,d]=s.useState(1),i=s.useMemo(()=>{const x=t?.slice();return d(1),n?x.filter(y=>y.name?.toLowerCase().includes(n.toLowerCase())):x},[t,d,n]),o=()=>c.map((x,y)=>e.jsxs("tr",{children:[e.jsx("td",{children:y+1}),e.jsxs("td",{children:[x?.student?.user?.name," ",x?.student?.user?.surname]}),e.jsx("td",{children:p(x.payment_sum)}),e.jsx("td",{children:x.added_data}),e.jsx("td",{children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:x?.payment_type?.name})})]}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ce.empSalary,children:e.jsxs(W,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"To'lov"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),e.jsx("tbody",{children:o()})]})}),e.jsx(ee,{setCurrentTableData:u,users:i,setCurrentPage:d,currentPage:l,pageSize:r,onPageChange:x=>{d(x)},type:"custom"})]})},Jt=({deleted:t,setDeleted:p})=>{const{request:n}=Y(),r=$(),c=m(Le),u=m(Me),[l,d]=s.useState(!1),[i,o]=s.useState({}),x=m($e);let y=m(N);s.useEffect(()=>{r(st(y))},[]);const a=S=>Number(S).toLocaleString(),h=x.reduce((S,g)=>S+parseFloat(g.payment_sum||0),0),f=c.reduce((S,g)=>S+parseFloat(g.payment_sum||0),0),D=()=>{const{id:S}=i;n(`${q}Students/student_payment_delete/${S}/`,"DELETE",JSON.stringify({id:S}),R()).then(g=>{r(at({id:S})),d(!1),r(V({status:!0,type:"success",msg:g.msg}))}).catch(g=>{console.log(g)})};return u?e.jsx(pe,{}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",gap:"2rem"}}),e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end",marginBottom:"3rem"},children:["Total : ",a(t?h:f)]})]}),t?e.jsx(Ut,{formatSalary:a,deletedStudent:x}):e.jsx(Ie,{formatSalary:a,studentData:c,deleted:t,setActiveDelete:d,activeDelete:l,changingData:i,setChangingData:o}),e.jsx(X,{setActive:d,active:l,onClick:D,title:`Rostanham ${i.name} ni o'chirmoqchimisiz `,type:"danger"})]})},Vt=({onClick:t,setDeleted:p,deleted:n,sum:r,formatSalary:c,sum2:u})=>e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",gap:"2rem"},children:e.jsx(U,{type:n?"disabled":"",onClick:n?null:t,children:"Qo'shish"})}),e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",c(n?u:r)]})]}),Yt=({overheadDeletedList:t,extraClassName:p,paymentStyle:n})=>{const r=m(te);let c=s.useMemo(()=>50,[]);const[u,l]=s.useState([]),[d,i]=s.useState(1),o=s.useMemo(()=>{const a=t?.slice();return i(1),r?a.filter(h=>h.name?.toLowerCase().includes(r.toLowerCase())):a},[t,i,r]),y=u.map((a,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:a.name}),e.jsx("td",{children:a.price}),e.jsx("td",{children:a.created}),e.jsx("td",{children:e.jsx("div",{className:n,children:a.payment.name})})]}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:p,children:e.jsxs(W,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),e.jsx("tbody",{children:y})]})}),e.jsx(ee,{setCurrentTableData:l,users:o,setCurrentPage:i,currentPage:d,pageSize:c,onPageChange:a=>{i(a)},type:"custom"})]})},Qt=({deleted:t,setDeleted:p})=>{const[n,r]=s.useState(!1),c=m(Fe),u=$(),[l,d]=s.useState({}),[i,o]=s.useState(!1),{request:x}=Y(),y=m(He),a=m(G),[h,f]=s.useState({}),{register:D,handleSubmit:S,setValue:g}=le(),H=m(ge),[j,T]=s.useState(null),[J,A]=s.useState(null),b=m(ze),[k,B]=s.useState(!1),[L,se]=s.useState({}),K=m(qe),[O,I]=s.useState(!1),[F,ae]=s.useState(null),oe=m(G),[ie,fe]=s.useState(null);let ne=m(N);s.useEffect(()=>{u(nt()),u(je())},[]),s.useEffect(()=>{ne.id,u(ct({activeBtn:F,branchId:ne}))},[F]),console.log(F);const Se=()=>{r(!0)},be=_=>{f(_)},Ce=_=>{d(_);const{id:w}=_;c.filter(M=>M.id===+w)[0]?.name==="Boshqa"?o(!0):o(!1)},De=_=>{const w={type:l.id,branch:ne.id,payment:h.id,..._};x(`${q}Overhead/overheads/create/`,"POST",JSON.stringify(w),R()).then(M=>{r(!1),g("name",""),g("price","");const Ne={created:M.created,id:M.id,name:M.name,payment:M.name,price:M.price};u(ot(Ne)),u(V({type:"success",status:!0,msg:M.msg}))}).catch(M=>{console.log(M)})},de=()=>{const{id:_}=L;x(`${q}Overhead/overheads/delete/${_}`,"DELETE",JSON.stringify({id:_}),R()).then(w=>{u(lt({id:_})),B(!1),u(V({type:"success",status:!0,msg:w.msg}))}).catch(w=>{console.log(w)})},Te=_=>{const{id:w}=ie;u(rt({id:w,payment:oe.filter(M=>M.id===+_)[0],changePaymentType:ie}))},Ae=b?.reduce((_,w)=>_+parseFloat(w.price||0),0),Pe=K.reduce((_,w)=>_+parseFloat(w.price||0),0),he=_=>Number(_).toLocaleString();return e.jsxs("div",{className:C.overhead,children:[e.jsx(Vt,{formatSalary:he,sum:Ae,deleted:t,sum2:Pe,onClick:Se,setDeleted:p}),t?e.jsx(Yt,{overheadDeletedList:K,extraClassName:C.table,paymentStyle:C.typeItem}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:C.subHeader,children:c.map(_=>e.jsx(U,{extraClass:ue(C.subHeader__subBtn,{[C.active]:F===_.id}),onClick:()=>ae(_.id),children:_.name}))}),e.jsx(Re,{formatSalary:he,loading:y,onDelete:de,changingData:L,setChangingData:se,setActiveDelete:B,activeDelete:k,extraclassName:C.table,additionalCosts:b,paymentStyle:C.typeItem,setChangePayment:I,changePayment:O,getCapitalType:oe,onChange:Te,setChangePaymentType:fe})]}),e.jsx(Kt,{showAdditionalFields:i,setActiveModal:r,activeModal:n,option:c,select:l,setSelected:d,onChange:Ce,paymentType:a,register:D,handleSubmit:S,onAdd:De,radioSelect:h,setRadioSelect:f,onChangeRadio:be,monthDay:H,day:j,setDay:T,month:J,setMonth:A,optionDef:F}),e.jsx(X,{setActive:B,active:k,onClick:de,title:`Rostanham ${L.name} ni o'chirmoqchimisiz `,type:"danger"})]})},Kt=t=>{const{activeModal:p,setActiveModal:n,option:r,showAdditionalFields:c,onChange:u,paymentType:l,handleSubmit:d,onAdd:i,register:o,radioSelect:x,onChangeRadio:y,optionDef:a}=t;return e.jsx(re,{setActive:n,active:p,children:e.jsxs(_e,{extraClassname:C.form,onSubmit:d(i),children:[e.jsx(Q,{register:o,name:"created",type:"date",title:"Kun"}),e.jsx(E,{options:r,defaultValue:a,onChangeOption:h=>{u({name:h,id:h})}}),c?e.jsx(Q,{name:"name",register:o,placeholder:"Narsa turi"}):null,e.jsx(Q,{register:o,name:"price",type:"number",placeholder:"Narxi"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"2rem"},children:l.map(h=>e.jsx(ve,{onChange:()=>y({name:h.name,id:h.id}),children:h.name,checked:x?.name===h.name,value:x===h.name,name:"hello"}))})]})})},Gt=t=>t.capitalSlice?.capital,Wt=t=>t.capitalSlice?.capitalDeleted,Xt="_modal_3hzh2_5",Zt={modal:Xt},es=({setActive:t,sum2:p,sum1:n,formatSalary:r,deleted:c})=>e.jsxs("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(U,{onClick:()=>t(!0),children:"Qo'shish"}),e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",r(c?p:n)]})]}),ts=({setActive:t,activeModal:p,radio:n,monthDay:r,month:c,day:u,setDay:l,setMonth:d,register:i,handleSubmit:o,onAdd:x,setRadio:y,radioSelect:a})=>e.jsx(re,{setActive:t,active:p,children:e.jsx("div",{className:Zt.modal,children:e.jsxs(_e,{onSubmit:o(x),children:[e.jsx(Q,{register:i,name:"added_date",type:"date"}),e.jsx(Q,{register:i,name:"name"}),e.jsx(Q,{register:i,name:"price",type:"number"}),e.jsx("div",{style:{display:"flex",gap:"2rem",justifyContent:"center"},children:n.map(h=>e.jsx(ve,{onChange:()=>y({name:h.name,id:h.id}),children:h.name,checked:a?.name===h.name,value:a===h.name}))}),e.jsx(E,{title:"Oy",options:r,onChangeOption:d}),e.jsx(E,{title:"sana",options:r.filter(h=>h?.value===c)[0]?.days,onChangeOption:l})]})})}),ss=({deleted:t})=>{const p=()=>t.map((n,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:n?.name}),e.jsx("td",{children:n.price}),e.jsx("td",{children:n?.added_date}),e.jsx("td",{children:n.payment_type?.name})]}));return e.jsx("div",{style:{height:"calc(100vh - 47rem)",overflow:"auto"},children:e.jsxs(W,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Nomi"}),e.jsx("th",{children:"Narxi"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),e.jsx("tbody",{children:p()})]})})},as=({deleted:t,setDeleted:p})=>{const n=m(Gt),r=m(Wt),c=$(),[u,l]=s.useState(!1),d=m(G),[i,o]=s.useState(null),[x,y]=s.useState(null),[a,h]=s.useState({}),[f,D]=s.useState({}),[S,g]=s.useState(!1),{register:H,setValue:j,handleSubmit:T}=le();let J=m(N);const A=m(ge),{request:b}=Y();s.useEffect(()=>{c(it(J)),c(je())},[]);const k=O=>{const I={branch:J.id,payment_type:a.id,...O};b(`${q}Capital/old_capital_create/`,"POST",JSON.stringify(I),R()).then(F=>{l(!1),c(V({type:"success",status:!0,msg:F.msg}));const ae={...F,payment_type:F.payment.name};c(ht(ae)),j("name",""),j("price","")}).catch(F=>{console.log(F)})},B=O=>Number(O).toLocaleString(),L=n.reduce((O,I)=>O+parseFloat(I.price||0),0),se=r.reduce((O,I)=>O+parseFloat(I.price||0),0),K=()=>{const{id:O}=f;b(`${q}Capital/old_capital_delete/${O}`,"DELETE",JSON.stringify(O),R()).then(I=>{c(dt({id:O})),g(!1),c(V({type:"success",status:!0,msg:I.msg}))}).catch(I=>{console.log(I)})};return e.jsxs("div",{className:C.overhead,children:[e.jsx(es,{deleted:t,setDeleted:p,setActive:l,sum1:L,sum2:se,formatSalary:B}),t?e.jsx(ss,{deleted:r}):e.jsx(Be,{changingData:f,activeDelete:S,setActiveDelete:g,setChangingData:D,onDelete:K,capitalData:n}),e.jsx(ts,{radioSelect:a,setRadio:h,register:H,onAdd:k,handleSubmit:T,monthDay:A,setMonth:y,setDay:o,day:i,month:x,setActive:l,activeModal:u,radio:d}),e.jsx(X,{setActive:g,active:S,onClick:K,title:`Rostanham ${f.name} ni o'chirmoqchimisiz `,type:"danger"})]})},ha=()=>{let{"*":t}=Ee();const p=m(Ue),n=ye(),r=$(),[c,u]=s.useState(!1),[l,d]=s.useState(!1),[i,o]=s.useState(!1),[x,y]=s.useState(!1),a=m(Je),h=m(Ve),f=m(Tt),D=m(ke),{id:S}=m(N),g=Oe(),[H,j]=s.useState(!1),[T,J]=s.useState(h??p[0].value),A=m(N);s.useEffect(()=>{b(t)},[t]),s.useEffect(()=>{r(mt({branchID:A.id})),r(Dt())},[]),s.useEffect(()=>{T!==h?(n(`${h}`),J(h)):g.search?n(g.search.slice(6,g.search.length)):D.length<2&&n(`${h}`)},[h,n,g.pathname,g.search,D.length]);const b=s.useCallback(L=>{r(pt({value:L}))},[n]),k=L=>Number(L).toLocaleString();s.useEffect(()=>{f&&f!==D.length&&D.length>=2&&n("./",{relative:"path"})},[f,D.length]),m(N);const B=s.useMemo(()=>[{name:"Students Payments",type:"studentsPayments"},{name:"Teacher Salary",type:"teachersSalary"},{name:"Employer Salary",type:"employeesSalary"},{name:"overhead",type:"overhead"},{name:"capital",type:"capital"}],[]);return e.jsxs(Pt,{types:B,page:"accounting",isMultiPage:!0,children:[e.jsxs("div",{className:C.accountingMain,children:[e.jsx("div",{className:C.accounting,children:e.jsxs("div",{className:C.accounting__wrapper,children:[e.jsxs("div",{className:C.wrapper__filter,children:[e.jsx(U,{type:"filter",status:"filter",onClick:()=>u(!c),children:"Filter"}),e.jsx(E,{defaultValue:h??p[0].value,options:p,onChangeOption:b})]}),e.jsxs("div",{className:C.wrapper__middle,children:[H?null:e.jsx("div",{className:C.middle__box,children:a?.payments?.map(L=>e.jsxs("div",{children:[L?.payment_type,": ",k(L.overall)]}))}),e.jsxs("div",{className:C.typeExpenses,children:[e.jsx(Z,{to:"../inkasatsiya",children:e.jsx(U,{children:"Inkasatsiya"})}),e.jsx(Z,{to:"otchot",children:e.jsx(U,{onClick:()=>j(!H),type:"filter",children:"buxgalteriya"})})]})]})]})}),e.jsx(we,{})]}),e.jsxs(xe,{children:[e.jsx(z,{path:"studentsPayments",element:e.jsx(Jt,{deleted:l,setDeleted:d})}),e.jsx(z,{path:"teachersSalary",element:e.jsx(is,{deleted:l,setDeleted:d,path:"teachersSalary"})}),e.jsx(z,{path:"employeesSalary",element:e.jsx(cs,{deleted:l,setDeleted:d,path:"employeesSalary"})}),e.jsx(z,{path:"overhead",element:e.jsx(Qt,{path:"overhead",deleted:l,setDeleted:d})}),e.jsx(z,{path:"capital",element:e.jsx(as,{deleted:l,setDeleted:d,path:"capital"})}),e.jsx(z,{path:"otchot",element:e.jsx(zs,{path:"otchot"})})]}),e.jsx(At,{setActive:u,active:c,setActiveDel:d,activeDel:l,activePage:h})]})},ns=({filteredDeletedSalary:t,formatSalary:p,sum2:n,onChange:r})=>{const c=m(te);let u=s.useMemo(()=>50,[]);const[l,d]=s.useState([]),[i,o]=s.useState(1),x=s.useMemo(()=>{const a=t?.slice();return o(1),c?a.filter(h=>h.name?.toLowerCase().includes(c.toLowerCase())):a},[t,o,c]),y=()=>l?.map((a,h)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:a?.user?.name}),e.jsx("td",{children:a?.salary}),e.jsx("td",{children:a?.date}),e.jsx("td",{children:a?.user?.job?.length?a?.user?.job:"ish turi mavjud emas"}),e.jsx("td",{onClick:()=>r(a.id),children:e.jsx("div",{className:ce.cash,children:a?.payment_types?.name})})]})})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ce.empSalary,children:e.jsxs(W,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"Kasb"}),e.jsx("th",{children:"To'lov turi"})]})}),y()]})}),e.jsx(ee,{setCurrentTableData:d,users:x,setCurrentPage:o,currentPage:i,pageSize:u,onPageChange:a=>{o(a)},type:"custom"})]})},cs=s.memo(({deleted:t,setDeleted:p})=>{const n=$(),[r,c]=s.useState(!1),[u,l]=s.useState(!1),d=m(Ye),i=m(Qe),o=m(Ke),{request:x}=Y(),[y,a]=s.useState(!1);let h=m(N);s.useEffect(()=>{n(ut(h))},[]);const[f,D]=s.useState({}),S=m(G),g=i.reduce((A,b)=>A+parseFloat(b.salary||0),0),H=d.reduce((A,b)=>A+parseFloat(b.salary||0),0),j=A=>Number(A).toLocaleString(),T=A=>{const{id:b}=f;x(`${q}Users/salaries/delete/${b}/`,"DELETE",JSON.stringify(b),R()).then(k=>{a(!y),n(xt({id:b})),n(V({status:!0,msg:k.msg,type:"success"}))}).catch(k=>{console.log(k)})},J=A=>{const{id:b}=f;x(`${q}Users/salaries/update/${b}/`,"PATCH",JSON.stringify({payment_types:Number(A)}),R()).then(k=>{c(!1),n(yt({id:b,payment_types:S.filter(B=>B.id===+A)[0],changingData:f}))}).catch(k=>{console.log(k)})};return o?e.jsx(pe,{}):e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",j(t?g:H)]})}),t?e.jsx(ns,{filteredDeletedSalary:i,formatSalary:j}):e.jsx(Ge,{changingData:f,formatSalary:j,filteredSalary:d,setChangingData:D,changePayment:r,activeDelete:y,setActiveDelete:a,setChangePayment:c,getCapitalType:S,onChange:J}),e.jsx(X,{setActive:a,active:y,onClick:T,title:`Rostanham ${f.name} ni o'chirmoqchimisiz `,type:"danger"})]})}),rs=t=>t.teacher?.teacherSalary,ls=t=>t.teacher?.deletedSalary,os=({deletedTeacher:t,setChangePayment:p,setChangingData:n})=>{const r=m(te);let c=s.useMemo(()=>50,[]);const[u,l]=s.useState([]),[d,i]=s.useState(1),o=s.useMemo(()=>{const y=t?.slice();return i(1),r?y.filter(a=>a.name?.toLowerCase().includes(r.toLowerCase())):y},[Nt,i,r]),x=()=>u.map((y,a)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsxs("td",{children:[y?.teacher?.user?.name," ",y?.teacher?.user?.surname]}),e.jsx("td",{children:y?.salary}),e.jsx("td",{children:y?.comment}),e.jsx("td",{children:y?.date}),e.jsx("td",{onClick:()=>{n({id:y?.id,payment_types:y?.payment_types})},children:e.jsx("div",{style:{border:"1px solid",width:"fit-content",padding:"5px 10px",borderRadius:"15px",textTransform:"capitalize",cursor:"pointer"},children:y?.payment?.name})})]},a)})}));return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("div",{style:{height:"calc(100vh - 43rem)",overflow:"auto"},children:e.jsxs(W,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Sabab"}),e.jsx("th",{children:"Sana"}),e.jsx("th",{children:"To'lov turi"})]})}),x()]})})}),e.jsx(ee,{setCurrentTableData:l,users:o,setCurrentPage:i,currentPage:d,pageSize:c,onPageChange:y=>{i(y)},type:"custom"})]})},is=({deleted:t,setDeleted:p})=>{const n=$(),r=m(rs),c=m(ls),[u,l]=s.useState({}),[d,i]=s.useState(!1),o=m(G),[x,y]=s.useState(!1);let a=m(N);const{request:h}=Y();s.useEffect(()=>{n(gt(a))},[]);const f=()=>{const{id:j}=u;h(`${q}Teachers/teachers/salary/delete/${j}/`,"DELETE",JSON.stringify({id:j}),R()).then(T=>{n(jt({id:j})),n(V({status:!0,msg:T.msg,type:"success"})),y(!1)}).catch(T=>{console.log(T)})},D=j=>Number(j).toLocaleString(),S=c.reduce((j,T)=>j+parseFloat(T.salary||0),0),g=r.reduce((j,T)=>j+parseFloat(T.salary||0),0),H=j=>{n(_t({id:u.id,payment_types:j})),i(!1)};return e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"flex-end",marginBottom:"3rem"},children:e.jsxs("div",{style:{color:"rgb(34, 197, 94)",fontSize:"2.2rem",textAlign:"end"},children:["Total : ",D(t?S:g)]})}),t?e.jsx(os,{setChangingData:l,setChangePayment:i,deletedTeacher:c}):e.jsx(We,{setChangingData:l,changePayment:d,setChangePayment:i,deleted:t,teacherSalary:r,changingData:u,activeDelete:x,setActiveDelete:y}),e.jsx(X,{setActive:y,active:x,onClick:f,title:`Rostanham ${u.name} ni o'chirmoqchimisiz `,type:"danger"}),e.jsx(re,{active:d,setActive:i,children:e.jsx("div",{className:C.changeType,children:e.jsx(E,{options:o,onChangeOption:H,title:"Select payment type"})})})]})},ds="_accounting_1omdx_1",hs="_accounting__wrapper_1omdx_4",ms="_wrapper__filter_1omdx_9",ps="_wrapper__middle_1omdx_13",us="_typeExpenses_1omdx_33",ys="_paymentType_1omdx_50",xs="_select_1omdx_57",gs="_tableHeader_1omdx_61",js="_table_1omdx_61",_s="_otchot__main_1omdx_75",vs="_otchot_1omdx_75",v={accounting:ds,accounting__wrapper:hs,wrapper__filter:ms,wrapper__middle:ps,typeExpenses:us,paymentType:ys,select:xs,tableHeader:gs,table:js,otchot__main:_s,otchot:vs},fs=t=>t.otchotAccountingSlice?.students,Ss=t=>t.otchotAccountingSlice?.teacherSalary,bs=t=>t.otchotAccountingSlice?.employerSalary,Cs=t=>t.otchotAccountingSlice.all,Ds=({formatSalary:t})=>{const p=$(),n=m(N),r=m(bs),c=n.id;s.useEffect(()=>{p(vt(c))},[]);const[u,l]=s.useState(null),[d,i]=s.useState(null);return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:v.paymentType,children:[e.jsx(E,{extraClass:v.select,options:r.dates?.map(o=>o.year),onChangeOption:i}),d?e.jsx(E,{extraClass:v.select,options:r.dates.filter(o=>o.year===+d)[0].months,onChangeOption:l}):null]}),e.jsx(Xe,{formatSalary:t,employerSalary:r})]})})},Ts=({formatSalary:t})=>{const p=m(fs),[n,r]=s.useState(null),[c,u]=s.useState(null),l=$(),{register:d,handleSubmit:i}=le(),[o,x]=s.useState(null),{request:y}=Y(),a=m(N);return s.useEffect(()=>{l(me(a.id)),c&&n&&y(`${q}Encashment/student_payments/?branch=${a.id}`,"POST",JSON.stringify({year:c,month:n}),R()).then(h=>{l(me(a.id)),x(h)}).catch(h=>{l(V({status:"error",type:!0,msg:"Serverda hatolik"}))})},[c,n]),e.jsxs("div",{children:[e.jsxs("div",{className:v.paymentType,children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(E,{register:d,extraClass:v.select,name:"year",options:p?.dates?.map(h=>h?.year),onChangeOption:u}),c?e.jsx(E,{register:d,name:"month",extraClass:v.select,options:p?.dates?.filter(h=>h.year===+c)[0]?.months,onChangeOption:r}):null]}),e.jsxs("div",{className:v.otchot__main,children:[e.jsxs("div",{className:v.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",t(o?o?.total_debt:p?.total_debt)]}),e.jsxs("div",{className:v.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",t(o?o?.reaming_debt:p?.reaming_debt)]}),e.jsxs("div",{className:v.otchot,children:["Chegirma 1-yillik ",e.jsx("br",{})," ",t(o?o?.total_dis:p?.total_dis)]}),e.jsxs("div",{className:v.otchot,children:["Chegirma 1-martalik  ",e.jsx("br",{})," ",t(o?o?.total_discount:p?.total_discount)]}),e.jsxs("div",{className:v.otchot,children:["Umumiy to'lov ",e.jsx("br",{})," ",t(o?o?.total_sum:p?.total_sum)]})]})]}),e.jsx(Ze,{format:t,extraClass:v.tableHeader,extraClassTable:v.table,classes:o||p})]})},As=({formatSalary:t})=>{const p=$(),r=m(N).id,c=m(Ss);s.useEffect(()=>{p(ft(r))},[]);const[u,l]=s.useState(null),[d,i]=s.useState(null);return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:v.paymentType,children:[e.jsx(E,{extraClass:v.select,options:c?.dates?.map(o=>o?.year),onChangeOption:i}),d?e.jsx(E,{extraClass:v.select,options:c.dates.filter(o=>o.year===+d)[0]?.months,onChangeOption:l}):null]}),e.jsx(et,{formatSalary:t,teacherSalary:c})]})})},Ps="_paymentTypes_bhdlr_1",Ns="_paymentTypes__item_bhdlr_8",Es="_list_bhdlr_15",ks="_list__container_bhdlr_24",Os="_otchot_bhdlr_28",ws="_header_bhdlr_36",Ls="_header__item_bhdlr_43",Ms="_active_bhdlr_50",P={paymentTypes:Ps,paymentTypes__item:Ns,list:Es,list__container:ks,otchot:Os,header:ws,header__item:Ls,active:Ms},$s=[{name:"O'quvchilar",value:"student"},{name:"O'qituvchilar",value:"teacher"},{name:"Qo'shimcha harajatlar ",value:"overhead"},{name:"Capital",value:"capital"},{name:"Umumiy foyda",value:"total"}],Is=({allTable:t})=>{const{request:p}=Y(),n=$(),r=m(N),[c,u]=s.useState("student"),[l,d]=s.useState(null),[i,o]=s.useState(null),x=()=>{if(console.log(t?.payment_results),!(!c&&!t?.payment_results))return e.jsx(Fs,{data:t?.payment_results?.[c],activeType:c})};s.useEffect(()=>{if(i&&l){const a={year:l,month:i};p(`${q}Encashment/encashment_school/`,"POST",JSON.stringify({branch:r.id,...a}),R()).then(h=>{n(St(h)),console.log(h)})}},[r.id,l,i]);const y=a=>{d(a),o(null)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[e.jsx(E,{options:t?.dates?.map(a=>({name:a?.year,id:a?.year})),onChangeOption:y}),l&&e.jsx(E,{options:t?.dates?.filter(a=>a.year===+l)[0]?.months,onChangeOption:o,defaultValue:t?.dates?.filter(a=>a.year===+l)[0]?.months[0]})]}),e.jsx("div",{className:P.header,children:$s.map(a=>e.jsx("div",{className:ue(P.header__item,{[P.active]:a.value===c}),onClick:()=>u(a.value),children:a.name},a.value))}),x()]})},Fs=({data:t,activeType:p})=>{const[n,r]=s.useState(null);s.useEffect(()=>{t&&(Array.isArray(t)?r("array"):r("object"))},[t]);const c=s.useCallback(l=>{if(!(!l.length>0))return l.map((d,i)=>{const o=Object.keys(d);return e.jsxs("div",{className:P.paymentTypes__item,children:[e.jsx("h3",{children:d[o[0]]}),e.jsx("p",{children:d[o[1].toLowerCase()]})]},i)})},[]),u=s.useCallback(()=>{if(!(!t&&!n))return Object.entries(t).map((l,d)=>{if(Array.isArray(l[1]))return l[1].map((i,o)=>{const x=Object.keys(i);return e.jsxs("div",{className:P.paymentTypes__item,children:[e.jsx("h3",{children:i[x[0]]}),e.jsx("p",{children:i[x[1].toLowerCase()]})]},o)})})},[t,n]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:P.paymentTypes,children:[n==="array"?c(t):null,u()]}),p==="student"?e.jsx("div",{className:P.list,children:e.jsxs("div",{className:P.list__container,children:[e.jsxs("div",{className:P.otchot,children:["Qolgan qarz ",e.jsx("br",{})," ",t?.remaining_debt]}),e.jsxs("div",{className:P.otchot,children:["Umumiy qarz ",e.jsx("br",{})," ",t?.total_debt]})]})}):p==="teacher"?e.jsx("div",{className:P.list,children:e.jsxs("div",{className:P.list__container,children:[e.jsxs("div",{className:P.otchot,children:["Umumiy oylik ",e.jsx("br",{})," ",t?.total_salary]}),e.jsxs("div",{className:P.otchot,children:["Qolgan oylik ",e.jsx("br",{})," ",t?.remaining_salary]})]})}):null]})},Hs=()=>{const t=$(),p=m(N),n=m(Cs);s.useEffect(()=>{t(bt({branchId:p.id}))},[]);const[r,c]=s.useState(null),[u,l]=s.useState(null);return e.jsx("div",{children:e.jsx(Is,{allTable:n})})},zs=()=>{const t=i=>Number(i).toLocaleString(),p=m(tt),[n,r]=s.useState(!1),c=$(),{id:u}=m(N),l=ye(),d=s.useCallback(i=>{c(Ct({value:i})),l(`${i}`,{relative:"path"})},[l]);return e.jsxs("div",{className:v.accounting,children:[e.jsxs("div",{className:v.accounting__wrapper,children:[e.jsxs("div",{className:v.wrapper__filter,children:[e.jsx(U,{type:"filter",status:"filter",onClick:()=>r(!n),children:"Filter"}),e.jsx(E,{defaultValue:p[0]?.value,options:p,onChangeOption:d})]}),e.jsx("div",{className:v.wrapper__middle,children:e.jsxs("div",{className:v.typeExpenses,children:[e.jsx(Z,{to:`../inkasatsiya/${u}`,children:e.jsx(U,{children:"Inkasatsiya"})}),e.jsx(Z,{to:"../accounting",children:e.jsx(U,{type:"filter",children:"buxgalteriya"})})]})})]}),e.jsxs(xe,{children:[e.jsx(z,{path:"all",element:e.jsx(Hs,{})}),e.jsx(z,{path:"payment",element:e.jsx(Ts,{formatSalary:t})}),e.jsx(z,{path:"teacherSalary",element:e.jsx(As,{formatSalary:t})}),e.jsx(z,{path:"employerSalary",element:e.jsx(Ds,{formatSalary:t})})]})]})};export{zs as AccountingOtchotPage,ha as AccountingPageMain,ha as AccountingPageMainIndex,cs as EmployerSalaryPage,is as TeacherSalaryPage};
