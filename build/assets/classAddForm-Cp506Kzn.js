import{r as n,n as E,u as R,a as x,j as e,B as m,e as g,T as P,z as y,F as z,S as $,I as S,C as q,E as J,G as K,H as Q,J as W,K as X,L as Y,M as w,O as Z,h as ee,A as se,i as te,o as B}from"./index-DOfOZKEd.js";import{g as H,a as de,b as ne,c as ae}from"./groupProfileRating-BPTvnUHy.js";import{C as le}from"./confirmModal-ARekbj1x.js";import"./teachers-D35-71qq.js";const ce="_studentsList_tlmf1_1",re="_studentsList__icon_tlmf1_7",ie="_btns_tlmf1_10",oe="_btns__inner_tlmf1_16",_e="_studentsList__container_tlmf1_21",ue="_studentsList__input_tlmf1_50",he="_studentsList__delete_tlmf1_54",xe="_studentsList__status_tlmf1_65",me="_red_tlmf1_72",je="_yellow_tlmf1_76",fe="_deleteForm_tlmf1_81",be="_deleteForm__form_tlmf1_87",pe="_deleteForm__select_tlmf1_96",ge="_deleteForm__btn_tlmf1_100",Se="_addModal_tlmf1_104",Ce="_addModal__container_tlmf1_113",Me="_check_tlmf1_141",ve="_check__input_tlmf1_146",Le="_addModal__btn_tlmf1_171",d={studentsList:ce,studentsList__icon:re,btns:ie,btns__inner:oe,studentsList__container:_e,studentsList__input:ue,studentsList__delete:he,studentsList__status:xe,red:me,yellow:je,deleteForm:fe,deleteForm__form:be,deleteForm__select:pe,deleteForm__btn:ge,addModal:Se,addModal__container:Ce,check:Me,check__input:ve,addModal__btn:Le},Be=n.memo(()=>{const{register:C,handleSubmit:M}=E(),A=R(),l=x(H),[j,i]=n.useState(!1),[v,u]=n.useState(""),[f,L]=n.useState(null),[N,_]=n.useState([]),[F,b]=n.useState([]),k=s=>{},I=()=>{A(K({id:f?.id}))},p=s=>{},D=()=>l?.students?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:s?.user?.profile_img?J+s?.user?.profile_img:q,alt:""})}),e.jsxs("td",{children:[s?.user?.name," ",s?.user?.surname]}),e.jsx("td",{children:s?.user?.phone}),e.jsx("td",{children:s?.parents_number}),e.jsx("td",{children:e.jsx("div",{className:g(d.studentsList__status,{[d.red]:Number(s.money)<0,[d.yellow]:Number(s.money)>0&&Number(s.money)<1e5}),children:s.money})}),j?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx(S,{extraClassName:d.studentsList__input,type:"checkbox",onChange:()=>b(c=>c.filter(r=>r===s.id)[0]?c.filter(r=>r!==s.id):[...c,s.id])})}),e.jsx("td",{children:e.jsx("i",{className:g("fas fa-trash",d.studentsList__delete),onClick:()=>L(s)})})]}):null]})),h=()=>l?.students?.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:q,alt:""})}),e.jsx("td",{children:s?.user?.name}),e.jsx("td",{children:s?.user?.surname}),e.jsx("td",{children:s?.user?.phone}),e.jsx("td",{children:e.jsx("div",{className:d.check,children:e.jsx(S,{extraClassName:d.check__input,type:"checkbox",onChange:()=>_(c=>c.filter(r=>r===s.id)[0]?c.filter(r=>r!==s.id):[...c,s.id])})})})]})),T=D(),G=h();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.studentsList,children:[e.jsxs("div",{className:d.btns,children:[e.jsx("h1",{children:"O’quvchilar ro’yxati"}),e.jsxs("div",{className:d.btns__inner,children:[e.jsx(m,{disabled:F.length===0,type:F.length===0?"disabled":"",onClick:()=>u("change"),children:"Move"}),e.jsx(m,{onClick:()=>u("add"),children:"Add"}),e.jsx("i",{className:g("fas fa-edit",d.studentsList__icon),onClick:()=>i(!j)})]})]}),e.jsx("div",{className:d.studentsList__container,children:e.jsxs(P,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism Familya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Tel Ota-ona"}),e.jsx("th",{children:"Balans"}),j?e.jsxs(e.Fragment,{children:[e.jsx("th",{children:"check"}),e.jsx("th",{children:"del"})]}):null]})}),e.jsx("tbody",{children:T})]})})]}),e.jsxs(y,{extraClass:d.deleteForm,active:v==="change",setActive:u,children:[e.jsx("h1",{children:"Boshqa sinfga qo’shish"}),e.jsxs(z,{extraClassname:d.deleteForm__form,onSubmit:M(k),typeSubmit:"",children:[e.jsx($,{extraClass:d.deleteForm__select,title:"Color",register:C,name:"color"}),e.jsx($,{extraClass:d.deleteForm__select,title:"Class",register:C,name:"class"}),e.jsx(m,{extraClass:d.deleteForm__btn,children:"Add"})]})]}),e.jsxs(y,{active:v==="add",setActive:u,extraClass:d.addModal,children:[e.jsx(S,{placeholder:"Search"}),e.jsx("div",{className:d.addModal__container,children:e.jsxs(P,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:G})]})}),e.jsx(m,{extraClass:d.addModal__btn,onClick:p,children:"Add"})]}),e.jsx(le,{setActive:L,active:f,onClick:I,title:`Rostanham ${f.user} ni o'chirmoqchimisiz `,type:"danger"})]})}),Fe="_addModal_xl27x_1",ke="_addModal__container_xl27x_19",ye="_addModal__subject_xl27x_39",Ae="_check_xl27x_47",Ne="_check__input_xl27x_52",Ie="_status_xl27x_55",De="_active_xl27x_64",Te="_status__inner_xl27x_67",Ge="_addModal__btn_xl27x_77",a={addModal:Fe,addModal__container:ke,addModal__subject:ye,check:Ae,check__input:Ne,status:Ie,active:De,status__inner:Te,addModal__btn:Ge},Ee=n.memo(C=>{const{setActive:M,active:A,branch:l}=C,{request:j}=ee(),i=R(),{register:v,handleSubmit:u}=E(),f=x(Q),L=x(de),N=x(ne),_=x(H);x(ae);const[F,b]=n.useState(!1),[k,I]=n.useState(null),[p,D]=n.useState([]),[h,T]=n.useState(""),[G,s]=n.useState(!1),c=t=>{i(Z({id:t?.class})),b(!0)},r=()=>{const t={students:p,update_method:"add_students",group_type:"school"};s(!0),j(`${se}Group/groups/profile/${_?.id}/`,"PATCH",JSON.stringify(t),te()).then(o=>{i(B({type:"success",status:!0,msg:"O'quvchilar sinfga qo'shildi"})),b(!1),M(!1),s(!1)}).catch(o=>{i(B({type:"error",status:!0,msg:"xatolik yuz berdi (outside classAdd)"}))})};n.useEffect(()=>{l&&i(W(l))},[l]),n.useEffect(()=>{_&&l&&(i(X({userBranchId:l,group_id:_?.id,res:{ignore_students:_?.students.map(t=>t.id)}})),i(Y({userBranchId:l})))},[_,l]);const U=n.useMemo(()=>N?.slice()?.filter(o=>o?.user?.name?.toLowerCase().includes(h?.toLowerCase())||o?.user?.surname?.toLowerCase().includes(h?.toLowerCase())),[N,h]),V=U?.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:q,alt:""})}),e.jsx("td",{children:t?.user?.name}),e.jsx("td",{children:t?.user?.surname}),e.jsx("td",{children:t?.subject.length?e.jsx("div",{className:a.addModal__subject,children:t?.subject[0]?.name}):null}),e.jsx("td",{children:e.jsxs("div",{className:a.check,children:[e.jsx(S,{extraClassName:a.check__input,type:"checkbox",onChange:()=>D(o=>o.filter(O=>O===t.id)[0]?o.filter(O=>O!==t.id):[...o,t.id])}),e.jsx("div",{className:g(a.status,{[a.active]:t?.extra_info?.status}),children:e.jsx("div",{className:g(a.status__inner,{[a.active]:t?.extra_info?.status})})})]})})]}));return e.jsxs(e.Fragment,{children:[e.jsx(y,{setActive:t=>M(t),active:A,children:e.jsxs(z,{typeSubmit:"",extraClassname:a.addModal,onSubmit:u(c),children:[e.jsx("h2",{children:"Add Class"}),e.jsx($,{onChangeOption:I,options:f,title:"Classes",register:v,name:"class"}),e.jsx(m,{disabled:!k,type:k?"":"disabled",children:"Tekshirmoq"})]})}),e.jsxs(y,{active:F,setActive:b,extraClass:a.addModal,children:[e.jsx(S,{placeholder:"Search",onChange:t=>T(t.target.value),defaultValue:h}),L?e.jsx(w,{}):e.jsx("div",{className:a.addModal__container,children:e.jsxs(P,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Ism"}),e.jsx("th",{children:"Familya"}),e.jsx("th",{children:"Fanlar"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:V})]})}),G?e.jsx(w,{}):e.jsx(m,{extraClass:a.addModal__btn,onClick:r,type:p.length===0?"disabled":"",disabled:p.length===0?"disabled":"",children:"Add"})]})]})});export{Ee as C,Be as a};
