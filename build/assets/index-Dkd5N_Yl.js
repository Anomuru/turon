import{r,a as x,u as v,j as e,T as D,d as w,a2 as S,h as A,A as N,i as P,o as L,D as T,B as M}from"./index-DOfOZKEd.js";import{o as F,e as R,a as $}from"./employerCategoryPage-BXkltOKJ.js";import{E as le}from"./employerCategoryPage-BXkltOKJ.js";import{g as U}from"./searchSelector-B3qtoac4.js";import{P as q}from"./pagination-ajK0EmM0.js";import{C as z}from"./confirmModal-ARekbj1x.js";const B="_employer_w035t_1",I="_table_w035t_6",O="_thead_w035t_10",W="_checkbox__minus_w035t_14",Y="_checkbox__checked_w035t_29",h={employer:B,table:I,thead:O,checkbox__minus:W,checkbox__checked:Y,delete:"_delete_w035t_41"},H=t=>t.employers?.employersData,V=t=>t.employers?.loading,G=t=>t.employers?.employerDataWithFilter,J=({currentTableData:t,loading:c})=>{const[l,p]=r.useState([]),n=x(V),a=x(G),[_,m]=r.useState(!1),[o,u]=r.useState(),i=()=>n?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",children:"Yuklanmoqda..."})}):(a&&a.length>0?a:t)?.map((s,C)=>{if(typeof s=="object"&&!Array.isArray(s))return e.jsxs("tr",{children:[e.jsx("td",{children:C+1}),e.jsx(S,{to:`employerProfile/${s?.id}`,children:e.jsxs("td",{children:[s?.name," ",s?.surname]})}),e.jsx("td",{children:s?.phone}),e.jsx("td",{children:s?.age}),e.jsx("td",{children:s?.job}),e.jsx("td",{children:s.status?e.jsx("div",{onClick:()=>p(f=>l.includes(s?.id)?[...f.filter(E=>E!==s?.id)]:[...f,s?.id]),className:l.includes(s?.id)?h.checkbox__checked:h.checkbox__minus,children:l.includes(s?.id)?e.jsx("i",{className:"fa fa-check"}):e.jsx("i",{className:"fa fa-minus"})}):null}),e.jsx("td",{children:e.jsx("div",{onClick:()=>{u(s),m(!0)},className:h.delete,children:e.jsx("i",{className:"fa fa-trash"})})})]})}),{request:d}=A(),y=v(),k=()=>{d(`${N}Users/employers/delete/${o.id}`,"DELETE",null,P()).then(j=>{y(L({type:"success",status:!0,msg:j.msg})),y(F(o.id)),m(!1)})},b=i();return e.jsx("div",{className:h.employer,children:e.jsxs("div",{className:h.table,children:[e.jsxs(D,{children:[e.jsx("thead",{className:h.thead,children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Tel"}),e.jsx("th",{children:"Yosh"}),e.jsx("th",{children:"Ish"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),n?e.jsx(w,{}):e.jsx("tbody",{children:b})]}),e.jsx(z,{type:"danger",title:"O'chirmoq",text:`${o?.name} o'chirishni hohlaysizmi`,active:_,setActive:m,onClick:k})]})})},K="_employer_nlpwb_1",Q="_employer__header_nlpwb_7",g={employer:K,employer__header:Q},X={employers:R},ae=()=>{const t=x(H),c=x(U),[l,p]=r.useState(!1),[n,a]=r.useState(1),[_,m]=r.useState(!1),o=r.useMemo(()=>30,[]),u=r.useMemo(()=>{const i=t?.filter(d=>!d.deleted)||[];return a(1),c?i.filter(d=>d?.name?.toLowerCase().includes(c.toLowerCase())||d?.phone?.toLowerCase().includes(c.toLowerCase())):i},[t,c]);return e.jsx(T,{reducers:X,children:e.jsxs("div",{className:g.employer,children:[e.jsx("div",{className:g.employer__header,children:e.jsx(M,{onClick:()=>p(!l),status:"filter",type:"filter",children:"Filter"})}),e.jsx(J,{currentTableData:u.slice((n-1)*o,n*o)}),e.jsx(q,{setCurrentTableData:()=>{},search:c,users:u,setCurrentPage:a,currentPage:n,pageSize:o,onPageChange:i=>{a(i)}}),e.jsx($,{setActiveSwitch:m,activeSwitch:_,setActive:p,active:l})]})})};export{le as EmployerCategoryPage,ae as EmployerPage};
