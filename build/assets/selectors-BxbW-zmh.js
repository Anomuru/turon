import{R as L,r as o,l as V,n as p,j as t,a as k,u as v,A as C,h as P,c as _}from"./index-Cux8sda1.js";import{M as $}from"./modal-BR27MEf1.js";import{E as h}from"./editableCard-BNSd-vHU.js";import{A as y}from"./workerSelect-N9ju4zO7.js";import{F as B}from"./form-C3mZZqBW.js";import{u as F}from"./index.esm-DQmSsb0O.js";const M="_filter_1syjy_1",q="_cardSelect_1syjy_71",c={filter:M,cardSelect:q},re=L.memo(({active:a,setActive:e,user_id:r})=>{const{register:d,handleSubmit:b,setValue:z}=F(),[f,j]=o.useState([]),[g,w]=o.useState([]),[x,A]=o.useState([]),u=V(),D=p(U),m=p(s=>s.userSetPermissionSlice.locations),S=p(s=>s.userSetPermissionSlice.branches);o.useEffect(()=>{u(i())},[u]);const W=D?.systems?.map(s=>({value:s.id,label:s.name})),E=async()=>{const s={user:r,systems:f.map(n=>n.value),locations:g.map(n=>n.value),branchs:x.map(n=>n.value)};try{await u(l(s))}catch(n){console.error("An error occurred:",n)}e(!a)},T=s=>{j(s),s.map(n=>n.value)},R=s=>{w(s)},O=(Array.isArray(m)?m:[m])?.map(s=>({value:s.id,label:s.name})),G=(Array.isArray(S)?S:[S])?.map(s=>({value:s?.id,label:s?.name}));return t.jsx($,{active:a,setActive:e,children:t.jsxs(B,{onSubmit:b(E),extraClassname:c.filter,children:[t.jsx(h,{extraClass:c.cardSelect,children:t.jsx(y,{options:W,value:f,onChange:T})}),t.jsx(h,{extraClass:c.cardSelect,children:t.jsx(y,{options:O,value:g,onChange:R})}),t.jsx(h,{extraClass:c.cardSelect,children:t.jsx(y,{options:G,value:x,onChange:A})})]})})}),i=k("vacancyWorkerSoucre/vacancyWorkerGetThunk",async()=>{const{request:a}=v();return await a(`${C}Permissions/add_permissions_managers_and_directors/`,"GET",null,P())}),H={workerData:[],loading:!1,error:null},I=_({name:"vacancyWorkerSoucre",initialState:H,reducers:{},extraReducers:a=>{a.addCase(i.pending,e=>{e.loading=!0}).addCase(i.fulfilled,(e,r)=>{e.loading=!1,e.error=null,e.workerData=r.payload}).addCase(i.rejected,(e,r)=>{e.loading=!1,e.error=r.error.message})}}),ne=I.reducer,l=k("userSetPermissionSlice/userSetPermissionThunk",async(a,{rejectWithValue:e})=>{const{request:r}=v();try{return await r(`${C}Permissions/add_permissions_managers_and_directors/`,"POST",JSON.stringify(a),P())}catch(d){return e(d.message)}}),J={newPermission:[],locations:[],branches:[],loading:!1,error:null},N=_({name:"userSetPermissionSlice",initialState:J,reducers:{},extraReducers:a=>{a.addCase(l.pending,e=>{e.loading=!0}).addCase(l.fulfilled,(e,r)=>{e.loading=!1,e.error=null,e.newPermission=r.payload}).addCase(l.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),te=N.reducer,U=a=>a.vacancyWorkerSoucre?.workerData;export{re as V,l as a,i as b,U as g,te as u,ne as v};
