import{r as a,l as O,m as Q,k as X,n as r,u as Z,A as g,h as B,j as e,B as S,S as ee,T as F,I as te}from"./index-Cux8sda1.js";import{P as se}from"./pagination-Cj0p_t2O.js";import{getSearchValue as ae}from"./index-Dvh1lTlU.js";import{u as ne}from"./index.esm-DQmSsb0O.js";import{g as re}from"./index-B-IQsIPc.js";import{e as oe,d as le,h as ie,f as ce,G as de,j as ue,k as _e}from"./studentsSelector-TVQxHXsm.js";import"./workerSelect-N9ju4zO7.js";import{i as me,j as xe,k as he}from"./studentsSlice-JQcNq_2O.js";import{T as je}from"./teacherParseSlice-z7KSx3F7.js";import"./teacherThunk-qU_2Y3xX.js";import{g as be}from"./roomsSelectors-Dutms6Wd.js";import{f as pe}from"./filterRoomsSlice-ClpK4_Fa.js";import{R as fe}from"./radio-c1ywR2KC.js";import{M as Ce}from"./modal-BR27MEf1.js";import"./form-C3mZZqBW.js";import"./textArea-1604NtUh.js";import"./editableCard-BNSd-vHU.js";import"./index-CO9axSa1.js";import{f as ge}from"./oftenUsedSelector-B4R2CTqR.js";const Be="_mainContainer_1bjz4_1",Se="_mainContainer__container_1bjz4_4",Te="_mainContainer_buttonPanelBox_1bjz4_7",ve="_mainContainer_buttonPanelBox_leftCreateButton_1bjz4_10",Pe="_mainContainer_filterPanelBox_1bjz4_13",ze="_timeTable_1bjz4_17",Ne="_mainContainer_filterPanelBox_leftFilterRadioGroupBox_1bjz4_20",Fe="_activeFilter_1bjz4_25",Ae="_mainError_1bjz4_29",ye="_table_1bjz4_37",Ge="_table__box_1bjz4_48",ke="_table__container_1bjz4_59",Ee="_table__inner_1bjz4_79",Re="_wrapper_1bjz4_83",we="_studentBoxHeader_1bjz4_90",De="_studentBoxTable_1bjz4_97",Ie="_studentBoxTable__inner_1bjz4_116",Le="_studentBoxTable__input_1bjz4_121",Me="_status_1bjz4_129",He="_status__inner_1bjz4_138",s={mainContainer:Be,mainContainer__container:Se,mainContainer_buttonPanelBox:Te,mainContainer_buttonPanelBox_leftCreateButton:ve,mainContainer_filterPanelBox:Pe,timeTable:ze,mainContainer_filterPanelBox_leftFilterRadioGroupBox:Ne,activeFilter:Fe,mainError:Ae,table:ye,table__box:Ge,table__container:ke,table__inner:Ee,wrapper:Re,studentBoxHeader:we,studentBoxTable:De,studentBoxTable__inner:Ie,studentBoxTable__input:Le,status:Me,status__inner:He},A=[{name:"studying",label:"Students"},{name:"teachers",label:"Teachers"}],ht=()=>{a.useEffect(()=>{c(me())},[]);const{request:x}=Z(),{"*":h}=Q();localStorage.getItem("theme"),X();const{register:$e,handleSubmit:Ue}=ne();r(re),r(be);const u=r(oe),T=r(le),j=r(ie);r(ce);const _=r(ae),[y,G]=a.useState(),[b,k]=a.useState(),[E,R]=a.useState([]),[p,w]=a.useState([]),[o,v]=a.useState(null),[P,D]=a.useState([]),[i,l]=a.useState(""),I=(t,n)=>{if(!o)v(n);else if(o!==n)return v(n),null;R(d=>d.filter(C=>C===t)[0]?d.filter(C=>C!==t):[...d,t])};a.useEffect(()=>{o&&x(`${g}Subjects/level-for-subject/${o}/`,"GET",null,B()).then(t=>{c(xe(t))}).catch(t=>console.log(t))},[o]);const[qe,Ke]=a.useState(!1),[Ve,We]=a.useState([]),[m,L]=a.useState(A[0].name),[z,N]=a.useState(!1),[Ye,Je]=a.useState(!1),[M,H]=a.useState([]),[$,f]=a.useState(1);let U=a.useMemo(()=>20,[]);const c=O(),q=t=>{L(t)},K=a.useMemo(()=>{const t=T?.slice();return f(1),_?t.filter(n=>n?.user?.name?.toLowerCase().includes(_.toLowerCase())||n?.user?.surname?.toLowerCase().includes(_.toLowerCase())):t},[T,_]);a.useEffect(()=>{h&&c(pe({id:h})),x(`${g}TimeTable/week_days/`,"GET",null,B()).then(t=>{G(t?.days?.map(n=>({...n,name:n.name_uz})))}).catch(t=>console.log(t)),x(`${g}Group/course_types/`,"GET",null,B()).then(t=>{c(he(t))}).catch(t=>console.log(t)),c(ge())},[h]);const V=t=>t.map((n,d)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:d+1}),e.jsxs("td",{children:[n.user.surname," ",n.user.name]}),e.jsx("td",{children:n.user.age})]})})})),W=()=>u[b]?.students.map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:n+1}),e.jsxs("td",{children:[t.user.surname," ",t.user.name]}),e.jsx("td",{children:t.user.age}),e.jsx("td",{children:t.user.registered_date}),e.jsx("td",{children:t.user.comment}),e.jsx("td",{children:t.extra_info.status?e.jsxs("div",{className:s.studentBoxTable__inner,children:[e.jsx("div",{className:s.status,children:e.jsx("div",{className:s.status__inner})}),e.jsx(te,{type:"checkbox",extraClassName:s.studentBoxTable__input,onChange:()=>I(t.id,u[b]?.id)})]}):null})]})),Y=()=>u.map((t,n)=>t.subject_status?e.jsxs("div",{onClick:()=>{N(!z),k(n)},className:s.table__box,children:[e.jsx("h2",{className:s.table__title,children:t.name??"Ingliz tili"}),e.jsx("div",{className:s.table__container,children:e.jsxs(F,{extraClass:s.table__inner,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"â„–"}),e.jsx("th",{children:"Full name"}),e.jsx("th",{children:"Age"})]})}),V(t.students)]})})]}):null),J=a.useCallback(t=>{w([t])},[p]);return e.jsxs("div",{children:[e.jsxs("div",{className:s.mainContainer,children:[e.jsx("div",{className:s.mainContainer_buttonPanelBox,children:e.jsxs("div",{className:s.mainContainer_buttonPanelBox_leftCreateButton,children:[e.jsx(S,{onClick:()=>l("groupCreate"),type:m==="studying"?i==="groupAdd"?"filter":"btn":"filter",extraClass:s.extraCutClass,children:"Create group"}),e.jsx(S,{onClick:()=>l("groupAdd"),type:i==="groupAdd"?"btn":"filter",extraClass:s.noneBackground,children:"Add group"})]})}),e.jsx("div",{className:s.mainContainer_filterPanelBox,children:e.jsx(S,{extraClass:s.timeTable,onClick:()=>l("timeTable"),status:"timeTable",type:"login",children:"Time Table"})}),e.jsx("div",{className:s.mainContainer_filterPanelBox_leftFilterRadioGroupBox,children:A.map((t,n)=>e.jsx(fe,{onChange:()=>q(t.name),checked:m===t.name,extraClasses:m===t.name?s.activeFilter:null,children:t.label},n))})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.mainError,children:j?.rooms&&j.rooms[0]?e.jsx("h1",{children:j.rooms[0]}):null}),e.jsx("div",{className:s.mainContainer,children:m==="studying"?e.jsx("div",{className:s.table,children:Y()}):e.jsxs("div",{className:s.mainContainer__container,children:[e.jsx(je,{data:M,setSelect:J,select:p}),e.jsx(se,{setCurrentTableData:H,users:K,setCurrentPage:f,currentPage:$,pageSize:U,onPageChange:t=>{f(t)},type:"custom"})]})})]}),e.jsx(Ce,{setActive:N,active:z,children:e.jsxs("div",{className:s.wrapper,children:[e.jsx("div",{className:s.studentBox,children:e.jsxs("div",{className:s.studentBoxHeader,children:[e.jsx("h1",{children:u[b]?.name}),e.jsx(ee,{})]})}),e.jsx("div",{className:s.studentBoxTable,children:e.jsxs(F,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Ism Familiya"}),e.jsx("th",{children:"Yosh"}),e.jsx("th",{children:"Reg.sana"}),e.jsx("th",{children:"Koment"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:W()})]})})]})}),e.jsx(de,{setActive:l,active:i==="timeTable",selectTime:P,setSelectTime:D,weekDays:y}),e.jsx(ue,{setActive:l,active:i==="groupAdd"}),e.jsx(_e,{setActive:l,active:i==="groupCreate",selectedStudents:E,selectedTeachers:p,selectedSubjectId:o,selectedTime:P})]})};export{ht as G};
