import{j as a,b as S,u as p,a as h,r,aW as y,a9 as w,g as k,Q as R,z as $,I as g,B as f,h as A,A as F,i as I,aX as q,o as v,D as T,aY as E,aZ as L}from"./index-DJEj1NQv.js";import{a_ as ya}from"./index-DJEj1NQv.js";import{g as M}from"./searchSelector-B3qtoac4.js";import{g as D,a as G}from"./roomsSelectors-BrI_i2qA.js";const O=t=>t.filteredRoomsSlice?.rooms,X="_mainContainer_tablePanelBox_cardBox_4fipy_59",z="_mainContainer_tablePanelBox_cardBox_imgBox_4fipy_71",U="_mainContainer_tablePanelBox_cardBox_articleBox_4fipy_78",H="_mainContainer_tablePanelBox_cardBox_articleBox_sitterBox_4fipy_84",J="_mainContainer_tablePanelBox_cardBox_articleBox_boardBox_4fipy_89",Q="_mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox_4fipy_94",V="_skeleton_4fipy_100",W="_skeletonImage_4fipy_111",Y="_skeletonText_4fipy_111",Z="_skeletonSwitch_4fipy_111",n={mainContainer_tablePanelBox_cardBox:X,mainContainer_tablePanelBox_cardBox_imgBox:z,mainContainer_tablePanelBox_cardBox_articleBox:U,mainContainer_tablePanelBox_cardBox_articleBox_sitterBox:H,mainContainer_tablePanelBox_cardBox_articleBox_boardBox:J,mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox:Q,skeleton:V,skeletonImage:W,skeletonText:Y,skeletonSwitch:Z},K=()=>a.jsxs("div",{className:`${n.mainContainer_tablePanelBox_cardBox} ${n.skeleton}`,children:[a.jsx("div",{className:n.mainContainer_tablePanelBox_cardBox_imgBox,children:a.jsx("div",{className:n.skeletonImage})}),a.jsxs("div",{className:n.mainContainer_tablePanelBox_cardBox_articleBox,children:[a.jsxs("div",{className:n.mainContainer_tablePanelBox_cardBox_articleBox_sitterBox,children:[a.jsx("div",{className:n.skeletonText}),a.jsx("div",{className:n.skeletonText})]}),a.jsxs("div",{className:n.mainContainer_tablePanelBox_cardBox_articleBox_boardBox,children:[a.jsx("div",{className:n.skeletonText}),a.jsx("div",{className:n.skeletonSwitch})]}),a.jsx("div",{className:n.mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox,children:a.jsx("div",{className:n.skeletonText})})]})]}),aa="_mainContainer_tablePanelBox_cardBox_p67uc_59",ea="_mainContainer_tablePanelBox_cardBox_imgBox_p67uc_76",oa="_mainContainer_tablePanelBox_cardBox_imgBox_img_p67uc_80",na="_mainContainer_tablePanelBox_cardBox_articleBox_p67uc_83",ta="_mainContainer_tablePanelBox_cardBox_articleBox_sitterBox_p67uc_89",ia="_mainContainer_tablePanelBox_cardBox_articleBox_boardBox_p67uc_94",ra="_mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox_p67uc_99",sa="_skeletonContainer_p67uc_105",i={mainContainer_tablePanelBox_cardBox:aa,mainContainer_tablePanelBox_cardBox_imgBox:ea,mainContainer_tablePanelBox_cardBox_imgBox_img:oa,mainContainer_tablePanelBox_cardBox_articleBox:na,mainContainer_tablePanelBox_cardBox_articleBox_sitterBox:ta,mainContainer_tablePanelBox_cardBox_articleBox_boardBox:ia,mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox:ra,skeletonContainer:sa},la=({currentTableData:t})=>{const s=S();p();const _=h(O),C=h(D),[c,x]=r.useState({});r.useEffect(()=>{const o=t.reduce((e,u)=>(e[u.id]=u.electronic_board||!1,e),{});x(o)},[t]);const B=o=>{x(e=>({...e,[o]:!e[o]}))},m=_&&_.length>0?_:t;return C?a.jsx("div",{className:i.skeletonContainer,children:Array.from({length:5}).map((o,e)=>a.jsx(K,{},e))}):m?.map((o,e)=>a.jsx(a.Fragment,{children:!o.deleted&&a.jsxs("div",{onClick:()=>s(`roomsProfilePage/${o.id}`),className:i.mainContainer_tablePanelBox_cardBox,children:[a.jsx("div",{className:i.mainContainer_tablePanelBox_cardBox_imgBox,children:a.jsx("img",{src:y,alt:"",className:i.mainContainer_tablePanelBox_cardBox_imgBox_img})}),a.jsxs("div",{className:i.mainContainer_tablePanelBox_cardBox_articleBox,children:[a.jsxs("div",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_sitterBox,children:[a.jsx("h2",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_sitterBox_sitterArticle,children:"O'rindiqlar soni"}),a.jsx("h2",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_sitterBox_sitterCounter,children:o?.seats_number})]}),a.jsxs("div",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_boardBox,children:[a.jsx("h2",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_boardBox_isBoard,children:"Elektron doska"}),a.jsx(w,{disabled:!0,activeSwitch:c[o.id],onChangeSwitch:()=>B(o.id)},`switch-${e}`)]}),a.jsx("div",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox,children:a.jsx("h2",{className:i.mainContainer_tablePanelBox_cardBox_articleBox_roomNumBox_roomNum,children:o?.name})})]})]},e)}))},_a="_filter_aym0o_1",ca="_filter__switch_aym0o_44",xa="_buttonStyle_aym0o_50",j={filter:_a,filter__switch:ca,buttonStyle:xa},Ba=({isOpen:t,onClose:s})=>{const _=h(k),[C,c]=r.useState(""),[x,B]=r.useState(""),[m,o]=r.useState(!1),e=p(),{"*":u}=R(),{request:P}=A(),b=()=>{const d={name:C,seats_number:parseInt(x,10),electronic_board:m,deleted:!1,branch:_};P(`${F}Rooms/rooms_create/`,"POST",JSON.stringify(d),I()).then(N=>{e(q(N)),e(v({type:"success",status:!0,msg:"Xona muvofaqqiyatli qo'shildi"}))}).catch(N=>{e(v({type:"error",status:!0,msg:"Serverda hatolik "}))}),c(""),B(""),s()};return t?a.jsx($,{active:t,setActive:s,children:a.jsxs("div",{className:j.filter,children:[a.jsx("h1",{children:"Xona qo'shish"}),a.jsxs("div",{children:[a.jsx("div",{children:a.jsx(g,{title:"Xona nomi",type:"text",value:C,onChange:d=>c(d.target.value)})}),a.jsx("div",{children:a.jsx(g,{title:"O'rindiqlar soni",type:"number",value:x,onChange:d=>B(d.target.value)})}),a.jsx("div",{children:a.jsx(g,{title:"Elektron doska (bor/yo'q)",type:"checkbox",checked:m,onChange:d=>o(d.target.checked)})}),a.jsxs("div",{className:j.filter__switch,children:[a.jsx(f,{onClick:b,children:"Add room"}),a.jsx(f,{onClick:s,extraClass:j.buttonStyle,children:"Close"})]})]})]})}):null},ma="_mainContainer_fw8dk_1",da="_mainContainer_buttonPanelBox_fw8dk_6",Ca="_mainContainer_buttonPanelBox_leftCreateButton_fw8dk_13",ua="_mainContainer_filterPanelBox_fw8dk_29",ha="_extraCutClassFilter_fw8dk_37",ba="_mainContainer_filterPanelBox_rightFilterRadioGroupBox_fw8dk_40",Pa="_mainContainer_tablePanelBox_fw8dk_47",fa="_paginationBox_fw8dk_97",l={mainContainer:ma,mainContainer_buttonPanelBox:da,mainContainer_buttonPanelBox_leftCreateButton:Ca,mainContainer_filterPanelBox:ua,extraCutClassFilter:ha,mainContainer_filterPanelBox_rightFilterRadioGroupBox:ba,mainContainer_tablePanelBox:Pa,paginationBox:fa},ga={roomsSlice:E},va=()=>{p();const t=h(M),s=h(G),_=h(k),[C,c]=r.useState(!1),[x,B]=r.useState(!1),[m,o]=r.useState(1),e=r.useMemo(()=>50,[]),u=r.useMemo(()=>{const P=s?.filter(b=>!b.deleted)||[];return o(1),t?P.filter(b=>b.name?.toLowerCase().includes(t.toLowerCase())):P},[s,t]);return a.jsx(T,{reducers:ga,children:a.jsxs("div",{className:l.mainContainer,children:[a.jsx("div",{className:l.mainContainer_buttonPanelBox,children:a.jsx("div",{className:l.mainContainer_buttonPanelBox_leftCreateButton,children:a.jsx(f,{onClick:()=>B(!0),children:"Xona qo'shish"})})}),a.jsxs("div",{className:l.mainContainer_filterPanelBox,children:[a.jsx(f,{extraClass:l.extraCutClassFilter,type:"filter",onClick:()=>c(!0),children:"Filter"}),a.jsx("div",{className:l.mainContainer_filterPanelBox_rightFilterRadioGroupBox})]}),a.jsx("div",{className:l.mainContainer_tablePanelBox,children:a.jsx(la,{currentTableData:u.slice((m-1)*e,m*e)})}),a.jsx(L,{active:C,setActive:c,roomsData:u}),a.jsx("div",{className:l.paginationBox}),a.jsx(Ba,{branch:_,isOpen:x,onClose:()=>B(!1)})]})})};export{va as Rooms,ya as roomsAddSlice};
