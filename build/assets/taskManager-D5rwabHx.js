import{cc as k,cd as pe,ce as he,r as f,cf as H,R as O,cg as xe,ch as ve,ci as me,cj as K,ck as _e,cl as be,j as l,h as ye,u as Ie,a as Re,g as De,b1 as Ne,cm as Se,be as je,cn as Ce}from"./index-B1KXs2zi.js";import{T as ze}from"./taskManagerRight-cBHj5Jhk.js";const Te="_container_abpzi_2",we="_box_abpzi_7",Oe="_box__header_abpzi_16",ke="_box__header_title_abpzi_20",Me="_box__sides_abpzi_28",w={container:Te,box:we,box__header:Oe,box__header_title:ke,box__sides:Me};function V(e,n,t){const s=e.slice();return s.splice(t<0?s.length+t:t,0,s.splice(n,1)[0]),s}function Ee(e,n){return e.reduce((t,s,r)=>{const i=n.get(s);return i&&(t[r]=i),t},Array(e.length))}function M(e){return e!==null&&e>=0}function $e(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function Le(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const J=e=>{let{rects:n,activeIndex:t,overIndex:s,index:r}=e;const i=V(n,s,t),a=n[r],c=i[r];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},E={scaleX:1,scaleY:1},Ae=e=>{var n;let{activeIndex:t,activeNodeRect:s,index:r,rects:i,overIndex:a}=e;const c=(n=i[t])!=null?n:s;if(!c)return null;if(r===t){const d=i[a];return d?{x:0,y:t<a?d.top+d.height-(c.top+c.height):d.top-c.top,...E}:null}const u=Pe(i,r,t);return r>t&&r<=a?{x:0,y:-c.height-u,...E}:r<t&&r>=a?{x:0,y:c.height+u,...E}:{x:0,y:0,...E}};function Pe(e,n,t){const s=e[n],r=e[n-1],i=e[n+1];return s?t<n?r?s.top-(r.top+r.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):r?s.top-(r.top+r.height):0:0}const Q="Sortable",W=O.createContext({activeIndex:-1,containerId:Q,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:J,disabled:{draggable:!1,droppable:!1}});function Xe(e){let{children:n,id:t,items:s,strategy:r=J,disabled:i=!1}=e;const{active:a,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:o}=pe(),x=he(Q,t),m=c.rect!==null,h=f.useMemo(()=>s.map(N=>typeof N=="object"&&"id"in N?N.id:N),[s]),R=a!=null,p=a?h.indexOf(a.id):-1,_=d?h.indexOf(d.id):-1,y=f.useRef(h),D=!$e(h,y.current),I=_!==-1&&p===-1||D,v=Le(i);H(()=>{D&&R&&o(h)},[D,h,R,o]),f.useEffect(()=>{y.current=h},[h]);const C=f.useMemo(()=>({activeIndex:p,containerId:x,disabled:v,disableTransforms:I,items:h,overIndex:_,useDragOverlay:m,sortedRects:Ee(h,u),strategy:r}),[p,x,v.draggable,v.droppable,I,h,_,u,m,r]);return O.createElement(W.Provider,{value:C},n)}const Be=e=>{let{id:n,items:t,activeIndex:s,overIndex:r}=e;return V(t,s,r).indexOf(n)},Ye=e=>{let{containerId:n,isSorting:t,wasDragging:s,index:r,items:i,newIndex:a,previousItems:c,previousContainerId:u,transition:d}=e;return!d||!s||c!==i&&r===a?!1:t?!0:a!==r&&n===u},Fe={duration:200,easing:"ease"},Z="transform",Ge=K.Transition.toString({property:Z,duration:0,easing:"linear"}),Ue={roleDescription:"sortable"};function qe(e){let{disabled:n,index:t,node:s,rect:r}=e;const[i,a]=f.useState(null),c=f.useRef(t);return H(()=>{if(!n&&t!==c.current&&s.current){const u=r.current;if(u){const d=be(s.current,{ignoreTransform:!0}),o={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(o.x||o.y)&&a(o)}}t!==c.current&&(c.current=t)},[n,t,s,r]),f.useEffect(()=>{i&&a(null)},[i]),i}function ee(e){let{animateLayoutChanges:n=Ye,attributes:t,disabled:s,data:r,getNewIndex:i=Be,id:a,strategy:c,resizeObserverConfig:u,transition:d=Fe}=e;const{items:o,containerId:x,activeIndex:m,disabled:h,disableTransforms:R,sortedRects:p,overIndex:_,useDragOverlay:y,strategy:D}=f.useContext(W),I=He(s,h),v=o.indexOf(a),C=f.useMemo(()=>({sortable:{containerId:x,index:v,items:o},...r}),[x,r,v,o]),N=f.useMemo(()=>o.slice(o.indexOf(a)),[o,a]),{rect:P,node:X,isOver:te,setNodeRef:B}=xe({id:a,data:C,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...u}}),{active:z,activatorEvent:ne,activeNodeRect:re,attributes:se,setNodeRef:Y,listeners:ae,isDragging:$,over:ie,setActivatorNodeRef:oe,transform:ce}=ve({id:a,data:C,attributes:{...Ue,...t},disabled:I.draggable}),de=me(B,Y),S=!!z,F=S&&!R&&M(m)&&M(_),G=!y&&$,U=G&&F?ce:null,le=F?U??(c??D)({rects:p,activeNodeRect:re,activeIndex:m,overIndex:_,index:v}):null,T=M(m)&&M(_)?i({id:a,items:o,activeIndex:m,overIndex:_}):v,j=z?.id,g=f.useRef({activeId:j,items:o,newIndex:T,containerId:x}),ue=o!==g.current.items,q=n({active:z,containerId:x,isDragging:$,isSorting:S,id:a,index:v,items:o,newIndex:g.current.newIndex,previousItems:g.current.items,previousContainerId:g.current.containerId,transition:d,wasDragging:g.current.activeId!=null}),L=qe({disabled:!q,index:v,node:X,rect:P});return f.useEffect(()=>{S&&g.current.newIndex!==T&&(g.current.newIndex=T),x!==g.current.containerId&&(g.current.containerId=x),o!==g.current.items&&(g.current.items=o)},[S,T,x,o]),f.useEffect(()=>{if(j===g.current.activeId)return;if(j&&!g.current.activeId){g.current.activeId=j;return}const ge=setTimeout(()=>{g.current.activeId=j},50);return()=>clearTimeout(ge)},[j]),{active:z,activeIndex:m,attributes:se,data:C,rect:P,index:v,newIndex:T,items:o,isOver:te,isSorting:S,isDragging:$,listeners:ae,node:X,overIndex:_,over:ie,setNodeRef:de,setActivatorNodeRef:oe,setDroppableNodeRef:B,setDraggableNodeRef:Y,transform:L??le,transition:fe()};function fe(){if(L||ue&&g.current.newIndex===v)return Ge;if(!(G&&!_e(ne)||!d)&&(S||q))return K.Transition.toString({...d,property:Z})}}function He(e,n){var t,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(t=e?.draggable)!=null?t:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}k.Down,k.Right,k.Up,k.Left;const Ke="_funnel_zuotn_1",Ve="_funnel__wrapper_zuotn_16",A={funnel:Ke,funnel__wrapper:Ve},Je=f.forwardRef((e,n)=>{const{attributes:t,listeners:s,items:r,activeDown:i,onToggleChapter:a,style:c,dragOverlay:u,container:d,children:o}=e,x=f.useMemo(()=>r.map(m=>m.id),[r]);return l.jsxs("div",{style:c,...t,className:A.funnel,ref:n,children:[l.jsx("div",{className:A.funnel__header,children:l.jsx("h1",{children:d.title})}),l.jsx("div",{className:A.funnel__wrapper,children:l.jsx(Xe,{strategy:Ae,items:x,children:o})})]})}),Qe="_leadCard_10zyz_1",We="_dragging_10zyz_13",Ze="_dragOverlay_10zyz_13",et="_header_10zyz_26",tt="_info_10zyz_35",nt="_date_10zyz_41",rt="_footer_10zyz_44",st="_task_10zyz_47",b={leadCard:Qe,dragging:We,dragOverlay:Ze,header:et,info:tt,date:nt,footer:rt,task:st},at=O.memo(O.forwardRef(({color:e,dragOverlay:n,dragging:t,disabled:s,fadeIn:r,handle:i,handleProps:a,height:c,index:u,listeners:d,attributes:o,onRemove:x,renderItem:m,sorting:h,transition:R,transform:p,value:_,wrapperStyle:y,...D},I)=>(CSS.Transform?.toString(p),l.jsxs("div",{className:ye(b.leadCard,{[b.dragging]:t,[b.dragOverlay]:n}),ref:I,style:{...y,transition:[R,y?.transition].filter(Boolean).join(", "),"--translate-x":p?`${Math.round(p.x)}px`:void 0,"--translate-y":p?`${Math.round(p.y)}px`:void 0,"--scale-x":p?.scaleX?`${p.scaleX}`:void 0,"--scale-y":p?.scaleY?`${p.scaleY}`:void 0,"--index":u,"--color":e},...d,...o,children:[l.jsxs("div",{className:b.header,children:[l.jsxs("div",{className:b.info,children:[l.jsxs("div",{className:b.name,children:["Ulug'bek ",_]}),l.jsx("div",{className:b.surname,children:"Fatxullayev"})]}),l.jsx("div",{className:b.date,children:l.jsx("div",{className:b.date__title,children:"22-iyul 16:30"})})]}),l.jsx("div",{className:b.footer,children:l.jsx("div",{className:b.task,children:"Task: yes"})})]}))));O.memo(e=>{const{item:n}=e,{active:t,attributes:s,isDragging:r,listeners:i,over:a,setNodeRef:c,transition:u,transform:d}=ee({id:n.id,data:{type:"container",children:n.items}});return a&&(n.id===a.id&&t?.data.current?.type!=="container"||n.items.some(o=>o.id===a.id)),l.jsx(Je,{style:{transition:u,transform:CSS?.Translate?.toString(d),opacity:r?.5:void 0},attributes:s,listeners:i,ref:c,items:n?.items,container:n,children:n.items.map(o=>l.jsx(it,{item:o},o.id))})});function it({item:e}){const{isDragging:n,attributes:t,listeners:s,setNodeRef:r,transform:i,transition:a}=ee({id:e.id,transition:{duration:150,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}});return l.jsx(at,{attributes:t,listeners:s,ref:r,transform:i,transition:a,id:e.id,item:e,dragging:n})}const lt=()=>{const e=Ie(),{id:n}=Re(De),[t,s]=f.useState(new Date),[r,i]=f.useState("progress"),a=Ne(t);return f.useEffect(()=>{e(Se({date:a,taskType:r,branch:n})),e(je())},[a,r]),l.jsx("div",{className:w.container,children:l.jsxs("div",{className:w.box,children:[l.jsx("div",{className:w.box__header,children:l.jsx("h1",{className:w.box__header_title,children:"My Projects"})}),l.jsxs("div",{className:w.box__sides,children:[l.jsx(Ce,{setTaskType:i,taskType:r,formatted:a}),l.jsx(ze,{selectedDate:t,setSelectedDate:s})]})]})})};export{lt as TaskManager};
