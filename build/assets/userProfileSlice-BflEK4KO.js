import{r as i,j as e,B as x,T as j,I as d,a as u,u as y,A as p,h as g,b as L,c as R}from"./index-Cux8sda1.js";import{d as S}from"./user_image-CruVt77w.js";import{F as U}from"./form-C3mZZqBW.js";import{M as D}from"./modal-BR27MEf1.js";const w="_info_1o5hg_1",q="_info__container_1o5hg_12",$="_info__avatar_1o5hg_19",F="_info__role_1o5hg_24",M="_info__btn_1o5hg_32",A="_infos_1o5hg_36",B="_infos__item_1o5hg_41",E="_infos__title_1o5hg_50",O="_infos__value_1o5hg_53",H="_infos__wrapper_1o5hg_56",r={info:w,info__container:q,info__avatar:$,info__role:F,info__btn:M,infos:A,infos__item:B,infos__title:E,infos__value:O,infos__wrapper:H},ne=i.memo(({setActive:n,data:a,setStatus:s})=>e.jsxs("div",{className:r.info,children:[e.jsxs("div",{className:r.info__container,children:[e.jsx("img",{onClick:()=>{n("changeImage"),s(!1)},className:r.info__avatar,src:a?.profile_img??S,alt:""}),e.jsxs("h3",{children:[a?.surname," ",a?.name]}),e.jsx("p",{className:r.info__role,children:a?.job[0]})]}),e.jsx(x,{type:"simple",extraClass:r.info__btn,onClick:()=>{n("changeInfo"),s(!1)},children:"Change"}),e.jsxs("div",{className:r.infos,children:[e.jsxs("div",{className:r.infos__item,children:[e.jsx("span",{className:r.infos__title,children:"Father name"}),e.jsx("p",{className:r.infos__value,children:a?.father_name})]}),e.jsxs("div",{className:r.infos__item,children:[e.jsx("span",{className:r.infos__title,children:"Age"}),e.jsxs("div",{className:r.infos__wrapper,children:[e.jsx("p",{className:r.infos__value,children:a?.age}),e.jsx("p",{className:r.infos__value,children:a?.birth_date})]})]}),e.jsxs("div",{className:r.infos__item,children:[e.jsx("span",{className:r.infos__title,children:"Number"}),e.jsx("p",{className:r.infos__value,children:a?.phone})]})]})]})),J="_salaryList_pgdjv_1",z={salaryList:J},le=i.memo(({data:n,setActive:a})=>{const c=n.map(l=>e.jsxs("tr",{onClick:()=>{a(l.id)},children:[e.jsx("td",{}),e.jsx("td",{children:l.salary}),e.jsx("td",{children:l.theRest}),e.jsx("td",{children:l.received}),e.jsx("td",{children:l.month})]}));return e.jsx("div",{className:z.salaryList,children:e.jsxs(j,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Oylik"}),e.jsx("th",{children:"Qolgan"}),e.jsx("th",{children:"Olingan"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:c})]})})}),G="_change_1bbc7_1",Q="_change__header_1bbc7_8",V="_change__btn_1bbc7_13",K="_change__input_1bbc7_16",o={change:G,change__header:Q,change__btn:V,change__input:K};i.memo(n=>{const{active:a,setActive:s,onSubmit:c,register:l,setValue:_,data:t}=n,[h,b]=i.useState(!1);let C=i.useMemo(()=>t?.name,[t]),N=i.useMemo(()=>t?.surname,[t]),T=i.useMemo(()=>t?.father_name,[t]),I=i.useMemo(()=>t?.birth_date,[t]),k=i.useMemo(()=>t?.phone,[t]);i.useEffect(()=>{_("name",C),_("surname",N),_("father_name",T),_("birth_date",I),_("phone",k)},[t]);const P=(()=>{switch(h){case!1:return e.jsxs(e.Fragment,{children:[e.jsx(d,{extraClassName:o.change__input,register:l,name:"name",placeholder:"Ism",required:!0}),e.jsx(d,{extraClassName:o.change__input,register:l,name:"surname",placeholder:"Familiya",required:!0}),e.jsx(d,{extraClassName:o.change__input,register:l,name:"father_name",placeholder:"Otasining ismi",required:!0}),e.jsx(d,{extraClassName:o.change__input,register:l,name:"birth_date",placeholder:"Tug'ilgan sana",type:"date",required:!0}),e.jsx(d,{extraClassName:o.change__input,register:l,name:"phone",placeholder:"Telefon raqami",type:"number",required:!0})]});case!0:return e.jsxs(e.Fragment,{children:[e.jsx(d,{extraClassName:o.change__input,register:l,name:"password",placeholder:"Parol",type:"password",required:!0}),e.jsx(d,{extraClassName:o.change__input,register:l,name:"confirm_password",placeholder:"Parolni tasdiqlang",type:"password",required:!0})]})}})();return e.jsx(D,{active:a,setActive:s,children:e.jsxs("div",{className:o.change,children:[e.jsxs("div",{className:o.change__header,children:[e.jsx("h1",{children:"Malumotni o'zgartirish"}),e.jsx(x,{onClick:()=>b(!h),extraClass:o.change__btn,type:h?"simple":"simple-add",children:"Password"})]}),e.jsx(U,{onSubmit:c,children:P})]})})});const W="_salaryListInner_1xxck_1",X="_salaryListInner__inner_1xxck_8",f={salaryListInner:W,salaryListInner__inner:X},te=i.memo(({data:n})=>{const s=n.map((c,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsx("td",{children:c.salary}),e.jsx("td",{children:e.jsx("div",{className:f.salaryListInner__inner,children:c.salaryType})}),e.jsx("td",{children:c.date})]}));return e.jsx("div",{className:f.salaryListInner,children:e.jsxs(j,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Summa "}),e.jsx("th",{children:"Summa turi"}),e.jsx("th",{children:"Sana"})]})}),e.jsx("tbody",{children:s})]})})}),m=u("userProfile/fetchUserProfileData",async n=>{const{request:a}=y();return await a(`${p}Users/users/${n}/`,"GET",null,g())});u("userProfile/changeUserProfileData",async({id:n,data:a})=>{const{request:s}=y();return await s(`${p}Users/users/update/${n}/`,"PATCH",JSON.stringify(a),g())});u("userProfile/changeUserProfileImage",async({id:n,data:a})=>{const{request:s}=y(),c=new FormData;return c.append("profile_img",a),s(`${p}Users/users/update/${n}/`,"PATCH",c,L())});const Y={userBranchId:null,userSystemId:null,userData:null,userJob:null,userPermissions:null,salaryData:[{id:1,salary:1e10,theRest:1e3,received:2e3,month:"may"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"june"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"july"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"aug"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"september"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"may"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"june"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"july"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"aug"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"september"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"may"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"june"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"july"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"aug"},{id:1,salary:3e3,theRest:1e3,received:2e3,month:"september"}],salaryInnerData:[{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"},{salary:390,salaryType:"Click",date:"2024.01.11"}],loading:!1,salaryLoading:!1,error:null},v=R({name:"userProfile",initialState:Y,reducers:{},extraReducers:n=>n.addCase(m.pending,a=>{a.loading=!0,a.error=null}).addCase(m.fulfilled,(a,s)=>{a.userData=s.payload,a.userBranchId=s.payload?.branch?.id,a.userJob=s.payload?.job[0],localStorage.setItem("job",s.payload?.job[0]),localStorage.setItem("username",s.payload.username),a.userPermissions=s.payload.permissions,a.loading=!1,a.error=null}).addCase(m.rejected,(a,s)=>{a.loading=!1,a.error="error"})}),{changeUserProfile:ie,changingUserProfile:ce}=v.actions,oe=v.reducer;export{ne as U,te as a,le as b,ce as c,ie as d,m as f,oe as u};
